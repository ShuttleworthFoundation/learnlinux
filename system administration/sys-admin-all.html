<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>System Administration</title><link rel="stylesheet" href="corpstyle.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="sys-admin"></a>System Administration</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Matthew</span> <span class="surname">West</span></h3></div></div></div><div><p class="copyright">Copyright &copy; 2004 The Shuttleworth Foundation</p></div><div><div class="legalnotice"><p>Unless otherwise expressly stated, all original material of whatever nature created by the
        contributors of the Learn Linux community, is licensed under the <a href="http://creativecommons.org/" target="_top">Creative Commons</a> license <a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_top"></a><a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_top">Attribution-ShareAlike 2.0</a><a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_top"></a>.</p><p>What follows is a copy of the "human-readable summary" of this document.
        The Legal Code (full license) may be read <a href="http://creativecommons.org/licenses/by-sa/2.0/legalcode/" target="_top">here</a>.</p><p>
        <span class="bold"><b>You are free:</b></span>
    </p><div class="itemizedlist"><ul type="disc" compact><li><p>to copy, distribute, display, and perform the work</p></li><li><p>to make derivative works</p></li><li><p>to make commercial use of the work</p></li></ul></div><p>
        <span class="bold"><b>Under the following conditions:</b></span>
    </p><p>
        <span class="inlinemediaobject"><img src="../images/ccdeed2.gif" align="left"></span>
        <span class="bold"><b>Attribution.</b></span> You must give the original author credit. </p><p>
        <span class="inlinemediaobject"><img src="../images/ccdeed3.gif" align="left"></span>
        <span class="bold"><b>Share Alike.</b></span> If you alter, transform, or build upon this
        work, you may distribute the resulting work only under a license identical to this one. </p><div class="itemizedlist"><ul type="disc" compact><li><p>For any reuse or distribution, you must make clear to others the license terms of
                this work.</p></li><li><p>Any of these conditions can be waived if you get permission from the copyright holder.</p></li></ul></div><p>
        <span class="bold"><b>Your fair use and other rights are in no way affected by the above.</b></span>
    </p><p>This is a human-readable summary of the <a href="http://creativecommons.org/licenses/by-sa/2.0/legalcode/" target="_top">Legal Code (the
            full license)</a>.</p></div></div><div><p class="pubdate">
    2005-01-25 19:29:58
</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="2"><b>Revision History</b></th></tr><tr><td align="left">Revision 0.0.1</td><td align="left">01/NOV/2004</td></tr><tr><td align="left" colspan="2">Initial version</td></tr></table></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#General_Hints">1. General Hints for System Administrators</a></span></dt><dd><dl><dt><span class="sect1"><a href="#gen_hints_introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#reading_list">Reading list for administrators</a></span></dt><dt><span class="sect1"><a href="#checklist">Installation and Configuration Checklist</a></span></dt><dt><span class="sect1"><a href="#Admin_file_Summ">Administrators file summary</a></span></dt><dt><span class="sect1"><a href="#Keep_record_sys">Keeping a record of your system</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e328">System Log</a></span></dt><dt><span class="sect2"><a href="#hdw_config_compat">Hardware Configuration and Compatibility</a></span></dt><dt><span class="sect2"><a href="#d0e441">Software Checklist</a></span></dt><dt><span class="sect2"><a href="#d0e459">Backup Log</a></span></dt><dt><span class="sect2"><a href="#d0e469">A review of some of basic commands</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#SysAdminChapter">2. Installation and Bootup</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Installation">Installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#preparation">Planning and Preparation</a></span></dt><dt><span class="sect2"><a href="#Starting_Installation">Starting the Installation</a></span></dt><dt><span class="sect2"><a href="#Language_Dbootstrap">Language and "dbootstrap"</a></span></dt><dt><span class="sect2"><a href="#MainMenu">Main Menu</a></span></dt><dt><span class="sect2"><a href="#select_keyboard">Select a keyboard</a></span></dt><dt><span class="sect2"><a href="#partition_hd">Partition hard disk</a></span></dt><dt><span class="sect2"><a href="#harddrive_Device_names">Hard drive device names</a></span></dt><dt><span class="sect2"><a href="#large_hd_oldmachines">Large disks in older machines</a></span></dt><dt><span class="sect2"><a href="#cfdisk">cfdisk</a></span></dt><dt><span class="sect2"><a href="#init_activ_swap">Initialize and activate swap</a></span></dt><dt><span class="sect2"><a href="#init_linux_part">Initialize a Linux partition</a></span></dt><dt><span class="sect2"><a href="#found_CDROM">Found a Debian CD-ROM</a></span></dt><dt><span class="sect2"><a href="#config_Dev_Drivers">Configure device driver modules</a></span></dt><dt><span class="sect2"><a href="#Config_netwk">Configure the network</a></span></dt><dt><span class="sect2"><a href="#Install_base_Sys">Install the base system</a></span></dt><dt><span class="sect2"><a href="#make_Sys_boot">Make system bootable</a></span></dt><dt><span class="sect2"><a href="#make_boot_floppy">Make a boot floppy</a></span></dt><dt><span class="sect2"><a href="#reboot">Reboot</a></span></dt><dt><span class="sect2"><a href="#Whoops_Installation_failed">Troubleshooting - Whoops, it didn't work, now what?</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Post_Installation_Configuration">Post-installation configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Time_Zone">Time Zone</a></span></dt><dt><span class="sect2"><a href="#MD5_Passwd">MD5 passwords</a></span></dt><dt><span class="sect2"><a href="#Shadow_Passwd">Shadow passwords</a></span></dt><dt><span class="sect2"><a href="#root_passwd">Root password</a></span></dt><dt><span class="sect2"><a href="#Create_user_acct">Create a normal user account</a></span></dt><dt><span class="sect2"><a href="#pcmcia">ACACIA</a></span></dt><dt><span class="sect2"><a href="#PPP_DialUp_Config">PPP dial-up configuration</a></span></dt><dt><span class="sect2"><a href="#config_apt">Configuring APT</a></span></dt><dt><span class="sect2"><a href="#tasksel_dselect">tasksel and dselect</a></span></dt><dt><span class="sect2"><a href="#Loggin_in">Logging In</a></span></dt><dt><span class="sect2"><a href="#bootup">Bootup</a></span></dt><dt><span class="sect2"><a href="#X11_System">The X11 system</a></span></dt><dt><span class="sect2"><a href="#lilo_grub">Changing your bootloader from LILO to GRUB</a></span></dt><dt><span class="sect2"><a href="#Package_management">Debian Package Management</a></span></dt><dt><span class="sect2"><a href="#RPM">RPM Package Management:</a></span></dt><dt><span class="sect2"><a href="#upgrd_kernel">Upgrading your Linux kernel in Debian</a></span></dt><dt><span class="sect2"><a href="#config_XWindows">Configuring X Windows</a></span></dt><dt><span class="sect2"><a href="#d0e2797">networked installations:</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#file-types-file-systems">3. File Types and File Systems</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Filetype_FileSystem_review">Let's review the different file types</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Regular_files">Regular files</a></span></dt><dt><span class="sect2"><a href="#directory_files">Directory files</a></span></dt><dt><span class="sect2"><a href="#device_files">Device files</a></span></dt><dt><span class="sect2"><a href="#Interprocess_communication_Devices">Interprocess communication Devices</a></span></dt><dt><span class="sect2"><a href="#inodes">Inodes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></span></dt><dt><span class="sect1"><a href="#whatis_filesystem">What is a filesystem?</a></span></dt><dt><span class="sect1"><a href="#filesystem_types">Types of filesystems</a></span></dt><dt><span class="sect1"><a href="#filesystem_Layout">The layout of a filesystem</a></span></dt><dt><span class="sect1"><a href="#File_Systems">Using Filesystems</a></span></dt><dd><dl><dt><span class="sect2"><a href="#mount_unmount">mount and unmount</a></span></dt><dt><span class="sect2"><a href="#proc">/proc</a></span></dt><dt><span class="sect2"><a href="#File_Sys_Mointoring">file system monitoring</a></span></dt><dt><span class="sect2"><a href="#adv_File_perm">Advanced file permissions</a></span></dt><dt><span class="sect2"><a href="#File_Attrib_ext2">file attributes on the ext2 file system</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#backups">4. Backups</a></span></dt><dd><dl><dt><span class="sect1"><a href="#backup_introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#BackupMedia">Backup media</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4141">Magnetic Tape</a></span></dt><dt><span class="sect2"><a href="#d0e4153">CD-ROM</a></span></dt><dt><span class="sect2"><a href="#d0e4160">Hard Disk</a></span></dt><dt><span class="sect2"><a href="#d0e4165">Which form of Media to use?</a></span></dt><dt><span class="sect2"><a href="#d0e4180">Securing your backup</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Backup_concepts">Backup concepts</a></span></dt><dt><span class="sect1"><a href="#backup_software">Backup software</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4257">mt</a></span></dt><dt><span class="sect2"><a href="#d0e4381">tar</a></span></dt><dt><span class="sect2"><a href="#d0e4424">cpio</a></span></dt><dt><span class="sect2"><a href="#d0e4475">dump and restore</a></span></dt><dt><span class="sect2"><a href="#d0e4511">dd</a></span></dt></dl></dd><dt><span class="sect1"><a href="#OpenSource_Backup_Software">Open source backup solutions</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4533">AMANDA -- http://www.amanda.org/</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e4546">Roll your own</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4558">Performing a backup</a></span></dt><dt><span class="sect2"><a href="#d0e4616">Verifying Backups</a></span></dt><dt><span class="sect2"><a href="#cmds_Restore_backup">Restore from backup</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#userinfo-admin">5. User Information and Administration</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Userinfo_Admininistration">Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="#useradd">useradd</a></span></dt><dt><span class="sect2"><a href="#groupadd">groupadd</a></span></dt><dt><span class="sect2"><a href="#groupmod">groupmod</a></span></dt><dt><span class="sect2"><a href="#groups">groups</a></span></dt><dt><span class="sect2"><a href="#usermod">usermod</a></span></dt><dt><span class="sect2"><a href="#userdel">userdel</a></span></dt><dt><span class="sect2"><a href="#groupdel">groupdel</a></span></dt><dt><span class="sect2"><a href="#add_user_Group_deluser_delgroup">adduser, addgroup, deluser and delgroup</a></span></dt><dt><span class="sect2"><a href="#chfn_chsh">chfn and chsh</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Disk_quotas">Debian and disk quotas:</a></span></dt><dd><dl><dt><span class="sect2"><a href="#quota_init_setup">initial setup</a></span></dt><dt><span class="sect2"><a href="#repquota">repquota</a></span></dt><dt><span class="sect2"><a href="#edquota">edquota</a></span></dt><dt><span class="sect2"><a href="#quota">quota</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#Process_acounting">6. Process Accounting</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Procc_acc_Introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#installing_acct">Installing the accounting package</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ac">ac</a></span></dt><dt><span class="sect2"><a href="#lastcomm">lastcomm</a></span></dt><dt><span class="sect2"><a href="#sa">sa</a></span></dt><dt><span class="sect2"><a href="#last">last</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#Managing_Processes">7. Managing Processes</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Man_Procc_Introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#process_table_nice_command">The process table and the nice command</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5380">Process creation</a></span></dt><dt><span class="sect2"><a href="#d0e5387">System Processes</a></span></dt><dt><span class="sect2"><a href="#d0e5392">Scheduling Command execution with batch (cron) jobs</a></span></dt><dt><span class="sect2"><a href="#monitor_Sys_resources">Monitoring system resources</a></span></dt><dt><span class="sect2"><a href="#d0e5865">ulimit:</a></span></dt><dt><span class="sect2"><a href="#log_files">Working with log files</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#Hardware_Installation">8. Hardware Installation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#add_new_hd">Adding a new drive to a Linux system:</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5976">Does the kernel detect the drive?</a></span></dt><dt><span class="sect2"><a href="#d0e5995">Partition the new drive</a></span></dt><dt><span class="sect2"><a href="#d0e6014">Build Linux filesystem on any relevant partitions</a></span></dt><dt><span class="sect2"><a href="#d0e6026">Decide on a mountpoint and create it</a></span></dt><dt><span class="sect2"><a href="#d0e6044">Add the new filesystem to /etc/fstab
            </a></span></dt></dl></dd><dt><span class="sect1"><a href="#Print_configuration">Print configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e6077">BSD Print Spooler (lpr)</a></span></dt><dt><span class="sect2"><a href="#d0e6090">/etc/printcap</a></span></dt><dt><span class="sect2"><a href="#d0e6102">Explanation of the legend used</a></span></dt><dt><span class="sect2"><a href="#d0e6206">Explaining the Generic entry</a></span></dt></dl></dd><dt><span class="sect1"><a href="#cups">CUPS - Common Unix Printing System</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e6302">installation</a></span></dt><dt><span class="sect2"><a href="#d0e6311">lpinfo</a></span></dt><dt><span class="sect2"><a href="#d0e6325">lpadmin</a></span></dt><dt><span class="sect2"><a href="#d0e6355">Removing a printer:</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#Kernel_config">9. Configuration of the Kernel</a></span></dt><dd><dl><dt><span class="sect1"><a href="#proc_config">The /proc filesystem:</a></span></dt></dl></dd><dt><span class="appendix"><a href="#troubleshooting">A. Troubleshooting</a></span></dt><dd><dl><dt><span class="sect1"><a href="#trouble_log_files">Log files</a></span></dt><dt><span class="sect1"><a href="#common_probelms">Common problems:</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e6439">Lost root password:</a></span></dt><dt><span class="sect2"><a href="#trouble_lilo">Troubleshooting LILO:</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#sys-admin-exercises">B. Additional exercises:</a></span></dt><dt><span class="appendix"><a href="#sys-admin-lab">C. Practical lab</a></span></dt><dt><span class="index"><a href="#d0e6674">Index</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>2.1. <a href="#d0e1936">The Bootup sequence</a></dt><dt>2.2. <a href="#d0e2268">XWindow client/server model</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>2.1. <a href="#d0e631">Navigation Keys(dbootstrap)</a></dt><dt>2.2. <a href="#d0e855">Disk Device Names</a></dt><dt>2.3. <a href="#d0e956">Navigation Keys in cfdisk</a></dt><dt>2.4. <a href="#d0e2035">Runlevels</a></dt><dt>2.5. <a href="#d0e2534">apt-get commands</a></dt><dt>4.1. <a href="#d0e4272">mt commands</a></dt><dt>5.1. <a href="#d0e4722">useradd options</a></dt><dt>7.1. <a href="#d0e5496">crontab options</a></dt><dt>7.2. <a href="#d0e5710">procs</a></dt><dt>7.3. <a href="#d0e5730">memory</a></dt><dt>7.4. <a href="#d0e5752">swap</a></dt><dt>7.5. <a href="#d0e5769">io</a></dt><dt>7.6. <a href="#d0e5786">system</a></dt><dt>7.7. <a href="#d0e5803">cpu</a></dt></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="General_Hints"></a>Chapter&nbsp;1.&nbsp;General Hints for System Administrators</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#gen_hints_introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#reading_list">Reading list for administrators</a></span></dt><dt><span class="sect1"><a href="#checklist">Installation and Configuration Checklist</a></span></dt><dt><span class="sect1"><a href="#Admin_file_Summ">Administrators file summary</a></span></dt><dt><span class="sect1"><a href="#Keep_record_sys">Keeping a record of your system</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e328">System Log</a></span></dt><dt><span class="sect2"><a href="#hdw_config_compat">Hardware Configuration and Compatibility</a></span></dt><dt><span class="sect2"><a href="#d0e441">Software Checklist</a></span></dt><dt><span class="sect2"><a href="#d0e459">Backup Log</a></span></dt><dt><span class="sect2"><a href="#d0e469">A review of some of basic commands</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gen_hints_introduction"></a>Introduction</h2></div></div><div></div></div><p>To define the responsibilities of an administrator 100% at this time would be
            impossible for us to do, the scope of this job would have to depend on the size of the
            system or network that you are working with, the numbers of users involved, the amount
            of resources available to you and the type of applications that the users would be using.</p><p>However one thing is for sure and that is that doing the work of a system
            administrator is fairly time consuming - look at the shell scripting course and get a
            good idea of how to automate some of the processes.</p><p>If we were to itemize the type of jobs that you may have to do the first would have to
            be to analyze the system(s) that you are working with and the users needs.</p><p>The second could very well be to install the operating system or to install some of
            the desktops and the third and maybe most important to automate would be to maintain the
            system that you have established.</p><p>In order to ensure that your foundation installation is solid check the following
            guidelines and fill in the missing information where required.</p><p>Remember that "Knowledge is power" and when installing a system the
            more knowledge you have the better the installation will be.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="reading_list"></a>Reading list for administrators</h2></div></div><div></div></div><p>The job of a system's administrator involves continually learning and keeping up to
            date with technology which affects their work. Thus, it's a good idea to have a handful
            of resources to refer to in order to track what's happening out there.</p><p>Some good web sites to become familiar with include:</p><p>
            <a href="http://www.freshmeat.net" target="_top">http://www.freshmeat.net</a>/</p><p>Lots of software, both new and updated releases, are announced here.</p><p>
            <a href="http://www.slashdot.org/" target="_top">http://www.slashdot.org/</a>
        </p><p>"News for Nerds. Stuff that Matters."</p><p>
            <a href="http://www.sage.org/" target="_top">http://www.sage.org/</a>
        </p><p>The System Administrator's Guild, affiliated with the Usenix Association. They have
            several nice booklets and a hard copy magazine, called ";login:",
            specifically for system administrators!</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="checklist"></a>Installation and Configuration Checklist</h2></div></div><div></div></div><div class="task"><p class="title"><b>To Install the hardware</b></p><div class="procedure"><ol type="1"><li><p>Take a note of device compatibility</p></li><li><p>Take a note of the address information (<a href="#hdw_config_compat" title="Hardware Configuration and Compatibility">the section called &#8220;Hardware Configuration and Compatibility&#8221;</a>).</p></li><li><p>Make sure that you know your system thoroughly e.g. How much memory do you have?</p></li></ol></div></div><div class="task"><p class="title"><b>Prepare to install the operating system and software</b></p><div class="procedure"><ol type="1"><li><p>Calculate the amount of disk space that you will need for each application
                        or additional software that you are intending to install.</p></li><li><p>Also note in the installation guides for this additional software if they
                        have recommendations for allocating kernel resources or installation tips.</p></li><li><p>Prepare the materials required for the installation (CDROM etc.)</p></li><li><p>Read any installation guide that is available to you</p></li></ol></div></div><div class="task"><p class="title"><b>Install Operating System</b></p><div class="procedure"><ol type="1"><li><p>Consider the defaults supplied throughout the installation process. Not
                        all are applicable to your installation</p></li><li><p>Determine the hardware interrupts and install the devices</p></li><li><p>Follow the installation process carefully and make notes of all the
                        settings that you configure and the decisions that you make, any error
                        messages or areas of concern that we may have to go back to.</p></li></ol></div></div><div class="task"><p class="title"><b>Configure the system and software</b></p><div class="procedure"><ol type="1"><li><p>Look at the security requirements that you are going to have and implement
                        the relevant solutions.</p></li><li><p>Install the application software and make changes to resources if required.</p></li><li><p>Install users, passwords and make other changes to the system profile files.</p></li><li><p>Follow the process in chapter two for post installation configuration.</p></li><li><p>Verify your set-up.</p></li><li><p>Make a backup of the clean system.</p></li><li><p>Create a system log.</p></li></ol></div></div><div class="task"><p class="title"><b>On-going</b></p><div class="procedure"><ol type="1"><li><p>Follow system resources versus system needs and change if affecting performance</p></li><li><p>Create and keep organizing the filesystems and files</p></li><li><p>Manage the users processes</p></li><li><p>Administrate and monitor system security and closely follow the log files</p></li><li><p>Maintain the network and access to the Internet if required</p></li><li><p>Educate the users and hand over some responsibility e.g. log in and lo out
                        procedures and appoint/train a junior printer administrator or backup
                        administrator or user administrator per floor or division.</p></li></ol></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Admin_file_Summ"></a>Administrators file summary</h2></div></div><div></div></div><p>If you've been put in charge of a system which was previously looked after by someone
            else, there are several files and commands with which it is a good idea to familiarize
            yourself, so that you can tell how the system has been set up.</p><p>Obviously, most of the files in the <b class="filename"><tt>/etc</tt></b>
            directory fall into this category, specifically <b class="filename"><tt>/etc/passwd</tt></b> and the associated <b class="filename"><tt>/etc/shadow</tt></b> file, as well as <b class="filename"><tt>/etc/group</tt></b>. On a Debian system, you should also
            familiarize yourself with a list of the currently installed packages and their versions;
            you can use the <span><b class="command">dpkg -list</b></span> command to achieve this. This command is
            covered in more detail later.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Keep_record_sys"></a>Keeping a record of your system</h2></div></div><div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e328"></a>System Log</h3></div></div><div></div></div><p>Record all system modifications and other events</p><div class="informaltable"><table border="1"><colgroup><col width="33%" align="left"><col width="33%" align="left"><col width="34%" align="left"></colgroup><tbody><tr><td align="left">Date</td><td align="left">System Modification</td><td align="left">System Event</td></tr><tr><td align="left">.</td><td align="left">.</td><td align="left">.</td></tr></tbody></table></div><p>Diagnose any system problems</p><div class="informaltable"><table border="1"><colgroup><col width="33%" align="left"><col width="33%" align="left"><col width="34%" align="left"></colgroup><tbody><tr><td align="left">Date</td><td align="left">System Problem</td><td align="left">Solution used</td></tr><tr><td align="left">.</td><td align="left">.</td><td align="left">.</td></tr></tbody></table></div><p>Make a note of system usage and any growth</p><div class="informaltable"><table border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">Date</td><td align="left">Description</td></tr><tr><td align="left">.</td><td align="left">.</td></tr></tbody></table></div><p>Make a note of the security implementation and its success, remember not to keep
                these records in an unsafe place.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="hdw_config_compat"></a>Hardware Configuration and Compatibility</h3></div></div><div></div></div><p>List your system hardware components and as suggested in the course material,
                check the hardware's compatibility with the operating system that you are installing.</p><p>For each hardware component record the following information:</p><div class="informaltable"><table border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">Item</td><td align="left">.</td></tr><tr><td align="left">Manufacturer</td><td align="left">.</td></tr><tr><td align="left">Serial #</td><td align="left">.</td></tr><tr><td align="left">DMA</td><td align="left">.</td></tr><tr><td align="left">IRQ</td><td align="left">.</td></tr><tr><td align="left">Base Address</td><td align="left">.</td></tr><tr><td align="left">Description (any further relevant driver information)Is it
                                compatible with the operating system that you are installing and
                                where did you find the compatibility information. Anything to be
                                careful of in future or in the case of a re-install? </td><td align="left">.</td></tr></tbody></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e441"></a>Software Checklist</h3></div></div><div></div></div><div class="informaltable"><table border="1"><colgroup><col width="33%" align="left"><col width="33%" align="left"><col width="34%"></colgroup><tbody><tr><td align="left">Application</td><td align="left">Description</td><td class="auto-generated">&nbsp;</td></tr><tr><td align="left">Software-Name</td><td align="left">Short description of the installation, problems, resources
                                allocated, serial numbers, licenses and any other pertinent information.</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e459"></a>Backup Log</h3></div></div><div></div></div><a class="indexterm" name="d0e462"></a><p>Decide on your backup procedure whether full or incremental, daily, weekly etc.
                Then create a log that you can refer to especially at restore time or if handing
                over the system to someone else (see <a href="#backups" title="Chapter&nbsp;4.&nbsp;Backups">Chapter&nbsp;4</a>).</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e469"></a>A review of some of basic commands</h3></div></div><div></div></div><p>Check in the man or info pages if you do not know these commands:</p><p>For managing files we covered <span><b class="command">ls</b></span>, <span><b class="command">mv</b></span>,
                <span><b class="command">cp</b></span>, <span><b class="command">rm</b></span>, <span><b class="command">grep</b></span>,
                <span><b class="command">file</b></span> and <span><b class="command">find</b></span>.</p><p>We displayed files with <span><b class="command">cat</b></span>, <span><b class="command">more</b></span>,
                <span><b class="command">pg</b></span>, <span><b class="command">less</b></span>, <span><b class="command">head</b></span> and <span><b class="command">tail</b></span>.</p><p>Managed directory files with <span><b class="command">cd</b></span>, <span><b class="command">mkdir</b></span>,
                <span><b class="command">rmdir</b></span>, <span><b class="command">pwd</b></span> and <span><b class="command">copy</b></span>.</p><p>Used input/output redirection with &gt;, &lt;, &gt;&gt; and |</p><p>Download the vi-referance card from <a href="http://resources/vi-ref.pdf" target="_top">this</a> page</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="SysAdminChapter"></a>Chapter&nbsp;2.&nbsp;Installation and Bootup</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Installation">Installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#preparation">Planning and Preparation</a></span></dt><dt><span class="sect2"><a href="#Starting_Installation">Starting the Installation</a></span></dt><dt><span class="sect2"><a href="#Language_Dbootstrap">Language and "dbootstrap"</a></span></dt><dt><span class="sect2"><a href="#MainMenu">Main Menu</a></span></dt><dt><span class="sect2"><a href="#select_keyboard">Select a keyboard</a></span></dt><dt><span class="sect2"><a href="#partition_hd">Partition hard disk</a></span></dt><dt><span class="sect2"><a href="#harddrive_Device_names">Hard drive device names</a></span></dt><dt><span class="sect2"><a href="#large_hd_oldmachines">Large disks in older machines</a></span></dt><dt><span class="sect2"><a href="#cfdisk">cfdisk</a></span></dt><dt><span class="sect2"><a href="#init_activ_swap">Initialize and activate swap</a></span></dt><dt><span class="sect2"><a href="#init_linux_part">Initialize a Linux partition</a></span></dt><dt><span class="sect2"><a href="#found_CDROM">Found a Debian CD-ROM</a></span></dt><dt><span class="sect2"><a href="#config_Dev_Drivers">Configure device driver modules</a></span></dt><dt><span class="sect2"><a href="#Config_netwk">Configure the network</a></span></dt><dt><span class="sect2"><a href="#Install_base_Sys">Install the base system</a></span></dt><dt><span class="sect2"><a href="#make_Sys_boot">Make system bootable</a></span></dt><dt><span class="sect2"><a href="#make_boot_floppy">Make a boot floppy</a></span></dt><dt><span class="sect2"><a href="#reboot">Reboot</a></span></dt><dt><span class="sect2"><a href="#Whoops_Installation_failed">Troubleshooting - Whoops, it didn't work, now what?</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Post_Installation_Configuration">Post-installation configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Time_Zone">Time Zone</a></span></dt><dt><span class="sect2"><a href="#MD5_Passwd">MD5 passwords</a></span></dt><dt><span class="sect2"><a href="#Shadow_Passwd">Shadow passwords</a></span></dt><dt><span class="sect2"><a href="#root_passwd">Root password</a></span></dt><dt><span class="sect2"><a href="#Create_user_acct">Create a normal user account</a></span></dt><dt><span class="sect2"><a href="#pcmcia">ACACIA</a></span></dt><dt><span class="sect2"><a href="#PPP_DialUp_Config">PPP dial-up configuration</a></span></dt><dt><span class="sect2"><a href="#config_apt">Configuring APT</a></span></dt><dt><span class="sect2"><a href="#tasksel_dselect">tasksel and dselect</a></span></dt><dt><span class="sect2"><a href="#Loggin_in">Logging In</a></span></dt><dt><span class="sect2"><a href="#bootup">Bootup</a></span></dt><dt><span class="sect2"><a href="#X11_System">The X11 system</a></span></dt><dt><span class="sect2"><a href="#lilo_grub">Changing your bootloader from LILO to GRUB</a></span></dt><dt><span class="sect2"><a href="#Package_management">Debian Package Management</a></span></dt><dt><span class="sect2"><a href="#RPM">RPM Package Management:</a></span></dt><dt><span class="sect2"><a href="#upgrd_kernel">Upgrading your Linux kernel in Debian</a></span></dt><dt><span class="sect2"><a href="#config_XWindows">Configuring X Windows</a></span></dt><dt><span class="sect2"><a href="#d0e2797">networked installations:</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Installation"></a>Installation</h2></div></div><div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="preparation"></a>Planning and Preparation</h3></div></div><div></div></div><p>In this course we are going to go through a complete installation of Debian Linux.
                You will require at least the first Debian installation CD to do a Debian installation.</p><p>Only the first CD is required to turn your computer into a fully working Linux
                system, although there are lots of useful packages on the other 7 (!) CDs.</p><p>You should consult the Debian web site<sup>[<a name="d0e561" href="#ftn.d0e561">1</a>]</sup> for a list of places where you can get your hands on a copy.</p><p>This document covers Debian version 3.0r2, but is applicable to most other versions.</p><p>You will need to configure your system's CMOS to tell it that you wish to boot off
                the CD-ROM drive.</p><p>Before attempting the installation make an inventory of the hardware components of
                your machine. Although the Debian installation system will attempt to automatically
                detect your hardware, it may not always be successful. Probably the most important
                pieces of information to record are the IRQ and IO addresses for your ISA/EISA
                cards, if you have any.</p><p>If you're going to be doing the installation onto a machine, which already
                contains data, and you wish to preserve this data then make a backup!</p><p>Debian requires that there be some unused partition space on which it can be
                installed. Please note that this is not the same as having free space on your C:
                drive (assuming you're running DOS or Windows).</p><p>A typical desktop Debian installation requires about 600MB of disk space, but this
                can obviously change depending on what additional software you intend to install, as
                well as the amount of data that you are going to be storing.</p><p>It is highly recommended that you also review the installation documentation
                available on the Debian CDs, as this will cover specific configuration problems in
                depth, as well as last minute "gotchas" that might have crept into
                the release.</p><p>Debian Linux is a community driven operating system like most open source
                projects. A way to get the most out of using the software is to become involved with
                the community. If you're running a Debian system, it is definitely recommended that
                you subscribe to some of the Debian mailing lists, you can subscribe to these
                mailing lists on <a href="http://lists.debian.org/" target="_top">this</a> page</p><p>As someone looking after a Debian system, you should at least subscribe to
                "announce" and "security announce" mailing
                lists. These are low volume, but they will keep you up to date with what's happening
                with the Debian project, and, very importantly, about any security related
                information that becomes available.</p><p>During an installation of any operating system, it's a good idea to note down what
                it is you've done and what choices you've made, and possibly even your reasons. This
                can prove invaluable when reviewing a system, and especially if you have to
                re-install it due to a system failure!</p><p>Some of the other obvious things that you should do prior to an installation are
                to make an inventory of the hardware that the system contains, and then to check up
                online whether or not that specific hardware combination is supported by the
                operating system and applications that you are going to be installing.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Starting_Installation"></a>Starting the Installation</h3></div></div><div></div></div><p>Once you've booted off the installation CD, your screen should appear as follows:</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot01.png"></div></div><p>Note that it is important to read and note everything that is displayed during the
                installation. If you skim over something, you may miss a critical piece of
                information and end up having to start the installation from scratch again!</p><p>Once you've read what's on the screen, feel free to use the function keys to
                investigate the other screens. Once you're ready to begin press <span><b class="keycap">Enter</b></span>.</p><p>You should notice a lot of text scroll off the screen. Don't worry if it goes past
                too quickly for you to read, we can come back to it later.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Language_Dbootstrap"></a>Language and "dbootstrap"</h3></div></div><div></div></div><a class="indexterm" name="d0e618"></a><p>If all goes well while booting off the CD, you should be presented with the
                following screen:</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot02.png"></div></div><p>The application that is now running is called "dbootstrap"; it
                is responsible for the installation and initial configuration of the system.</p><p>You can use the following keys to navigate in dbootstrap:</p><div class="table"><a name="d0e631"></a><p class="title"><b>Table&nbsp;2.1.&nbsp;Navigation Keys(dbootstrap)</b></p><table summary="Navigation Keys(dbootstrap)" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left"><span><b class="keycap">right</b></span> arrow, or <span><b class="keycap">Tab</b></span></td><td align="left">move forward between buttons and selections</td></tr><tr><td align="left"><span><b class="keycap">left</b></span> arrow, or <span><b class="keycap">Shift</b></span>-<span><b class="keycap">Tab</b></span></td><td align="left">move backward between buttons and selections</td></tr><tr><td align="left"><span><b class="keycap">Up</b></span>/<span><b class="keycap">Down</b></span> arrow</td><td align="left">highlight items within a scroll list</td></tr><tr><td align="left"><span><b class="keycap">Spacebar</b></span></td><td align="left">select an item, such as a check box</td></tr><tr><td align="left"><span><b class="keycap">Enter</b></span></td><td align="left">activate current choice</td></tr><tr><td align="left"><span><b class="keycap">Alt</b></span>-<span><b class="keycap">F1</b></span></td><td align="left">view dbootstrap screen</td></tr><tr><td align="left"><span><b class="keycap">Alt</b></span>-<span><b class="keycap">F2</b></span></td><td align="left">view virtual console</td></tr><tr><td align="left"><span><b class="keycap">Alt</b></span>-<span><b class="keycap">F3</b></span></td><td align="left">view error messages</td></tr><tr><td align="left"><span><b class="keycap">Alt</b></span>-<span><b class="keycap">F4</b></span></td><td align="left">package unpacking and setup messages</td></tr></tbody></table></div><p>Now that you know how to find your way around, use the arrow keys to move the
                selection bar (the yellow text on a red background) down to your preferred language
                choice (probably "en"). Once your choice is highlighted, as in the
                screenshot, press the <span><b class="keycap">Enter</b></span> key.</p><p>You may be prompted to further refine your choice, as below:</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot03.png"></div></div><p>Once you've done that successfully, you will be presented with the
                "Release Notes" display:</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot04.png"></div></div><p>Once you've read this, press <span><b class="keycap">Enter</b></span> again to continue.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="MainMenu"></a>Main Menu</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot05.png"></div></div><p>From here, you can jump to most parts of the installation. For the purposes of a
                standard installation though, you should simply concentrate on the top grouped
                choices; in this case <span><b class="guibutton">Next</b></span>, "Alternate" and "Alternate1".</p><p>The <span><b class="guibutton">Next</b></span> choice is the next logical step in the
                installation procedure, and is usually always the one you will want. The "Alternate"
                options allow you to chose an alternative installation path. This is sometimes
                useful if you want to skip a section which doesn't make sense for your particular installation.</p><p>Make sure that the highlight bar is on "Next: Configure the
                Keyboard", and then press the <span><b class="keycap">Enter</b></span> key.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="select_keyboard"></a>Select a keyboard</h3></div></div><div></div></div><a class="indexterm" name="d0e768"></a><div class="screenshot"><div class="mediaobject"><img src="../images/shot06.png"></div></div><p>Select your keyboard type, and then press Enter. If you're not sure which keyboard
                you have, then go with the default "qwerty/us" selection.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="partition_hd"></a>Partition hard disk</h3></div></div><div></div></div><a class="indexterm" name="d0e782"></a><div class="screenshot"><div class="mediaobject"><img src="../images/shot07.png"></div></div><p>Debian needs at least one partition in order to run. However, you can also create
                a swap partition.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e791"></a>Why create a swap partition?</h4></div></div><div></div></div><a class="indexterm" name="d0e794"></a><p>A swap partition allows the operating system to treat some of the disk space
                    as "virtual memory". If your system has less than 16MB of RAM,
                    then you will have to create a swap partition in order for the system to work.
                    If you have more RAM than that, then a swap partition is not required, but is
                    still recommended.</p><a class="indexterm" name="d0e799"></a><p>Generally, the cost of RAM is a lot higher than the cost of disk space. For
                    this reason, it is often useful to be able to use part of the hard disk as if it
                    were memory. This is what a swap partition allows the operating system to do.
                    The kernel will be able to "swap" current unneeded data out of
                    RAM and write it to the swap partition on the disk. When the data is needed by
                    the kernel again, it will be read off the disk, and placed back into RAM.</p><p>The benefit is that you get away with not having to have the full amount of
                    physical RAM required to run a specific application. One important point to
                    remember though is that accessing the hard drive is a lot slower than accessing
                    RAM, and so you will incur a speed penalty.</p><p>A good rule of thumb is to have the amount of swap that you have equal to
                    twice the amount of RAM that you have, but no more than 1GB. Obviously, this
                    might vary depending on what you're wanting to use the system for.</p><p>In our example, we're going to create a 64MB swap partition.</p><p>Select "Partition hard disk" and then press <span><b class="keycap">Enter</b></span>.</p><p>You will then be prompted to select which hard disk you wish to partition:</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot08.png"></div></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="harddrive_Device_names"></a>Hard drive device names</h3></div></div><div></div></div><a class="indexterm" name="d0e826"></a><p>The Linux kernel assigns short names to the storage devices that it finds on your
                system. It's important to know what naming scheme it uses, so that you can correctly
                chose which disks to partition:</p><a class="indexterm" name="d0e831"></a><a class="indexterm" name="d0e834"></a><a class="indexterm" name="d0e837"></a><a class="indexterm" name="d0e840"></a><a class="indexterm" name="d0e843"></a><a class="indexterm" name="d0e846"></a><a class="indexterm" name="d0e849"></a><a class="indexterm" name="d0e852"></a><div class="table"><a name="d0e855"></a><p class="title"><b>Table&nbsp;2.2.&nbsp;Disk Device Names</b></p><table summary="Disk Device Names" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">device</td><td align="left">description</td></tr><tr><td align="left">hda</td><td align="left">primary master IDE hard disk</td></tr><tr><td align="left">hdb</td><td align="left">primary slave IDE hard disk</td></tr><tr><td align="left">hdc</td><td align="left">secondary master IDE hard disk</td></tr><tr><td align="left">hdd</td><td align="left">secondary slave IDE hard disk</td></tr><tr><td align="left">sd0</td><td align="left">first SCSI hard disk</td></tr><tr><td align="left">xda</td><td align="left">first XT disk</td></tr><tr><td align="left">fd0</td><td align="left">first floppy drive</td></tr><tr><td align="left">scd0</td><td align="left">first SCSI CD-ROM</td></tr></tbody></table></div><p>In our example, there is only one drive installed in the system; a primary master
                IDE drive (hda).</p><a class="indexterm" name="d0e909"></a><p>Press <span><b class="keycap">Enter</b></span> to select this drive, and continue.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="large_hd_oldmachines"></a>Large disks in older machines</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot09.png"></div></div><p>If you have a large HDD, but an old machine, you may encounter problems booting a
                Linux system. Please read the notes on this screen carefully. If your machine is
                from 1998 or later, then you shouldn't be affected by this problem. Press
                <span><b class="keycap">Enter</b></span> to continue.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cfdisk"></a>cfdisk</h3></div></div><div></div></div><a class="indexterm" name="d0e936"></a><div class="screenshot"><div class="mediaobject"><img src="../images/shot10.png"></div></div><p>The dbootstrap application has now launched another application called "cfdisk".
                This is the actual tool that you will use to partition your hard drive. If you are
                installing onto a new disk, you will be presented with a prompt as above. Simply
                press "Y" and then <span><b class="keycap">Enter</b></span> to continue.</p><p>You will then be presented with the cfdisk main screen, which should look like this:</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot11.png"></div></div><p>You can use the following keys to navigate around cfdisk:</p><div class="table"><a name="d0e956"></a><p class="title"><b>Table&nbsp;2.3.&nbsp;Navigation Keys in cfdisk</b></p><table summary="Navigation Keys in cfdisk" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left"><span><b class="keycap">left</b></span>/<span><b class="keycap">right</b></span> arrow keys</td><td align="left">move menu selection highlight</td></tr><tr><td align="left"><span><b class="keycap">Up</b></span>/<span><b class="keycap">Down</b></span> arrow keys</td><td align="left">move partition selection highlight</td></tr><tr><td align="left"><span><b class="keycap">Enter</b></span></td><td align="left">select current menu and partition options</td></tr></tbody></table></div><p>The first thing you should do is press <span><b class="keycap">Enter</b></span> and read through the
                help section to familiarize yourself with its contents.</p><p>Once you have read the help section return to the main screen, press the
                <span><b class="keycap">right</b></span> arrow key to highlight the "New" menu
                option, and then press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot12.png"></div></div><p>You will then be prompted to chose which type of partition you wish to create;
                either a primary one or a logical one. Unless you already have four primary
                partitions on your system, select "primary" and press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot13.png"></div></div><p>You will then be prompted for the size of the partition, given in MB.</p><p>We will create a 64MB sized one, so type "64" and press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot14.png"></div></div><p>Now you can choose whether you wish to add this partition to the beginning of your
                free space, or to the end. Select "Beginning" and press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot15.png"></div></div><p>You screen should now look something like this:</p><div class="mediaobject"><img src="../images/shot16.png"></div><p>You'll see that the partition you've just created is now displayed. It's called
                "hda1". As mentioned previously "hda" is your
                primary master IDE drive; the "1" signifies that it is the first partition.</p><p>You'll see that it's also a "Primary" partition, that it's a
                "Linux" filesystem type and that it's 64MB in size.</p><p>You'll also see that we still have some free space left, 983.68MB worth in the screenshot.</p><p>However, we don't want this to be a "Linuxv" partition, we want
                it to be a "Linux swap" partition. Use the <span><b class="keycap">right
                arrow</b></span> key to move the cursor all the way from "Bootable"
                over to "Type", and then press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot17.png"></div></div><p>You'll be presented with two pages worth of partition types, and their associated
                partition type numbers.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot18.png"></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot19.png"></div></div><p>At the end of that, you'll be prompted to enter the number of the partition type
                that you want.</p><p>The two numbers that you'll be most interested in remembering are:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen"><tt class="computeroutput">
82 - Linux swap
83 - Linux
</tt></pre></td></tr></table><a class="indexterm" name="d0e1075"></a><a class="indexterm" name="d0e1078"></a><p>The rest might be useful if you're having to recover your partition table at some
                point in time, but they're not necessary for a standard Linux installation.</p><p>Enter the number "82" (for "Linux swap") and
                press <span><b class="keycap">Enter</b></span>.</p><p>You should now see that the main screen has been updated to reflect your choice,
                and that the FS Type for hda1 is set to "Linux swap".</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot20.png"></div></div><p>Now we want to create another partition out of the remaining free space. Press the
                    <span><b class="keycap">down arrow</b></span> key to move the highlight bar onto the
                "Free Space" section, and then press the <span><b class="keycap">right
                    arrow</b></span> key to select "New".</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot21.png"></div></div><p>Press <span><b class="keycap">Enter</b></span>, and you should be presented with the now familiar
                menu asking you to select between creating a Primary or a Logical partition. Just
                press <span><b class="keycap">Enter</b></span> again to select Primary.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot22.png"></div></div><p>As before, you'll be prompted to select the size of the partition. Just hit
                <span><b class="keycap">Enter</b></span> to select the default, which is to use all the available free space.</p><p>Since this is the partition you'll be wanting to boot from, press the
                <span><b class="keycap">Enter</b></span> key again to toggle the partition's
                "Bootable" flag. This tells your computer than that partition can
                be booted from. The main screen should now look something like this:</p><a class="indexterm" name="d0e1128"></a><div class="screenshot"><div class="mediaobject"><img src="../images/shot23.png"></div></div><p>You can see that you now have two partitions; "hda1" is the
                previously created Linux swap partition, while "hda2" is your
                newly created Linux partition. You'll note that the "hda2"
                partition has its "Boot" flag enabled.</p><p>Phew! Now we can finally write this partition table to the hard drive.</p><p>Use the <span><b class="keycap">right</b></span> arrow key to move the highlight over to the
                <tt class="option">Write</tt> option, and press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot24.png"></div></div><p>You will be prompted as to whether you do indeed wish to perform this operation:</p><div class="mediaobject"><img src="../images/shot25.png"></div><p>Type out the full word "yes" if you are sure that you are happy
                with this.</p><p>Once the partition table has been written out successfully, you can move the
                highlight over to <tt class="option">Quit</tt> using the arrow keys, and then press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot26.png"></div></div><p>You have now completed the hardest part of the installation and the rest is
                relatively easy from here.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="init_activ_swap"></a>Initialize and activate swap</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot27.png"></div></div><p>As the display tells you, you've created a swap partition, but you haven't
                initialized and activated it yet. Press <span><b class="keycap">Enter</b></span> to opt to do this now.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot28.png"></div></div><p>As explained in the write-up on dbootstrap, you can skip this step if you have a
                relatively modern HDD, as it is able to handle bad blocks on its own.</p><p>Select <span><b class="guibutton">No</b></span> and press <span><b class="keycap">Enter</b></span> to continue.</p><div class="mediaobject"><img src="../images/shot29.png"></div><p>Last chance! Are you sure that this is the correct partition (hda1 in our
                example)? Once you select <span><b class="guibutton">Yes</b></span> and press
                <span><b class="keycap">Enter</b></span>, any information stored on that part of the disk will now be overwritten.</p><p>Now your system has that disk space available as virtual memory. This is very
                useful if you're installing on a machine with a small amount of RAM, as dbootstrap
                can now make use of this resource.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="init_linux_part"></a>Initialize a Linux partition</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot30.png"></div></div><p>Now we need to Initialize ("format" in DOS parlance) your Linux
                partition, and then mount it so that we can access it to install Debian onto it.</p><p>Press <span><b class="keycap">Enter</b></span> to begin this process now.</p><p>Depending on the size of your partition, and the speed of your system and drive,
                this may take a few moments.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot31.png"></div></div><p>The root ("/") is the base of your filesystem; for our example
                installation, we will only have this single partition. You may wish to make use of a
                more complicated layout if you have special needs.</p><p>For example, if you have a Samba file server sharing user's home directories, you
                might well want to have the system ("/", <b class="filename"><tt>/usr</tt></b>, etc.) on a separate disk to your data (<b class="filename"><tt>/home</tt></b>). This will allow you to upgrade your system
                without interfering with the user data, and, likewise, allow you to expand the
                amount of data storage space easily, without having to re-install the system from scratch.</p><p>However, a single filesystem is usually sufficient for a workstation or similar installation.</p><a class="indexterm" name="d0e1250"></a><p>Select <span><b class="guibutton">Yes</b></span> to mount the root filesystem onto our hda2 device.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot32.png"></div></div><p>Now that you have mounted your root filesystem, you may choose to mount additional
                filesystems, or continue on and install the Linux kernel and driver modules.</p><p> For our example, as we only have one partition, we chose to do the later.</p><p>You might want to mount additional filesystems to install additional software, or
                if you are attempting to use the installation program to rescue or upgrade your system.</p><p>Press <span><b class="keycap">Enter</b></span>.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="found_CDROM"></a>Found a Debian CD-ROM</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot33.png"></div></div><p>The installation program has detected your Debian CD-ROM and is asking whether or
                not you wish to install the packages from it.</p><p>Alternatives would be to install packages from another source, such as over the
                network or from another hard disk in the system.</p><p>We want to use the CD though, so just select <span><b class="guibutton">Yes</b></span> and press <span><b class="keycap">Enter</b></span>.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="config_Dev_Drivers"></a>Configure device driver modules</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot34.png"></div></div><p>This section lets you configure which Linux kernel modules, or device drivers, you
                wish to use. This is useful if you have a network card which is not automatically
                detected, or, if you're installing on a laptop, if you have any ACACIA devices which
                you wish to use.</p><a class="indexterm" name="d0e1305"></a><p>Select <span><b class="guibutton">Next</b></span> and press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot35.png"></div></div><p>If you have a supported PCI network card, support for it will already exist in the
                Linux kernel, so you won't have to select a kernel module for it. However, if you
                have one of the older ISA/EISA network cards, (e.g. an NE2000 compatible one), then
                you may well have to select a driver for it.</p><a class="indexterm" name="d0e1322"></a><a class="indexterm" name="d0e1325"></a><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../images/admon/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>One handy way of doing this is seeing what settings the hardware is detected
                    as having by other operating systems.</p></td></tr></table></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot36.png"></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Config_netwk"></a>Configure the network</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot38.png"></div></div><p>If Linux has detected a network card, or if you have selected a network card
                module, you will be presented with the option of configuring it.</p><p>If you don't have a network card, or if you do but don't wish to configure it, you
                can skip ahead to the next section, otherwise press <span><b class="keycap">Enter</b></span> to begin
                the configuration.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot39.png"></div></div><p>You'll be prompted for a name for your machine; you can call it whatever you like,
                as long as the name conforms to the rules mentioned on the screen. The default name
                is "debian", so we'll just stick with that.</p><a class="indexterm" name="d0e1358"></a><p>Press <span><b class="keycap">Enter</b></span> to continue.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot40.png"></div></div><p>Here you'll have to know a little bit about your network. If you're putting your
                machine on a live network, and you know that your network has a DHCP server, then
                you can tell Debian to behave as a DHCP client. This is useful as it will
                automatically configure your network settings for you.</p><a class="indexterm" name="d0e1372"></a><p>However, if your machine isn't on a network, or your network doesn't support DHCP,
                then you'll have to do it manually. For this example, we'll do it manually.</p><p>Use the arrow keys to select <span><b class="guibutton">No</b></span>, and then press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot41.png"></div></div><p>You'll need to provide an IP address here; the default is
                "192.168.1.1", which is a private IP address. We'll use this one
                for our example, but you may need to specify a real one depending on your own
                network configuration.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Install_base_Sys"></a>Install the base system</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot42.png"></div></div><p>This step will install the "base system", or, put another way,
                just enough to get your system up and functioning.</p><p>Press <span><b class="keycap">Enter</b></span> to continue.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot43.png"></div></div><p>This step will take awhile, as it will have to copy a large number of files off
                the CD-ROM, extract them and install them on your Linux partition.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="make_Sys_boot"></a>Make system bootable</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot44.png"></div></div><p>Once the installation has finished, you'll be asked whether you wish to make the
                system bootable.</p><p>Press <span><b class="keycap">Enter</b></span> to continue with this step.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot45.png"></div></div><a class="indexterm" name="d0e1433"></a><p>For our example installation, we'll install the LILO boot loader in the MBR
                (Master Boot Record) of the hard drive. If you were installing onto a disk which
                already had a boot loader, you might opt to instead install LILO in the root
                partition (hda2, remember?) instead.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admon/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>The space on your hard disk can be partitioned into a maximum of four (4)
                    "primary partitions". Sometimes, your configuration requires
                    that you have more than 4 partitions available. To address this problem, you can
                    convert one of the 4 primary partitions into an "extended
                    partition", within which you can create "logical
                    partitions", which allows you to have more than 4 partitions on a
                    single disk. Each partition can hold a different operating system, or your
                    operating system may be spread over several partitions, each acting as a
                    different drive letter (Windows) or mount point (Linux). </p></td></tr></table></div><p>Press <span><b class="keycap">Enter</b></span> to install LILO in the MBR.</p><a class="indexterm" name="d0e1446"></a><a class="indexterm" name="d0e1449"></a><div class="screenshot"><div class="mediaobject"><img src="../images/shot46.png"></div></div><p>If you're interested in keeping your machine secure from physical access, you
                should read this notice carefully.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="make_boot_floppy"></a>Make a boot floppy</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot47.png"></div></div><a class="indexterm" name="d0e1467"></a><p>It's recommended that you make a boot floppy, it is a very useful troubleshooting
                tool; you could use the floppy disk to boot your Debian system if it has problems
                booting from the hard drive as an example.</p><p>Press <span><b class="keycap">Enter</b></span>.</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot48.png"></div></div><p>Now insert a blank floppy disk, and hit <span><b class="keycap">Enter</b></span> again.</p><p>Once you've made a boot floppy, you're ready to reboot the system and see if it
                works. Make sure that you remove the floppy that you have made as well as the
                installation CD.</p><p>Once that's all done, press <span><b class="keycap">Enter</b></span> to reboot.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="reboot"></a>Reboot</h3></div></div><div></div></div><div class="screenshot"><div class="mediaobject"><img src="../images/shot49.png"></div></div><p>Your system should then reboot, and you will hopefully be presented with a screen
                which looks like this:</p><div class="screenshot"><div class="mediaobject"><img src="../images/shot50.png"></div></div><p>Congratulations!</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Whoops_Installation_failed"></a>Troubleshooting - Whoops, it didn't work, now what?</h3></div></div><div></div></div><p>If you aren't presented with the "Congratulations" screen when
                you reboot, then something unfortunately must have gone wrong. The first thing I
                would suggest is attempting to boot off the boot floppy that you made earlier.</p><p>Some systems have problems with the LILO boot loader on the hard disk.</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Post_Installation_Configuration"></a>Post-installation configuration</h2></div></div><div></div></div><p>Once you've successfully booted your system for the first time, Debian will ask you
            several questions to configure the packages that you have installed. You can revisit
            this process at any time by issuing the <span><b class="command">/usr/sbin/base-config</b></span> command
            as root.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Time_Zone"></a>Time Zone</h3></div></div><div></div></div><a class="indexterm" name="d0e1527"></a><p>You will be asked whether you wish to set your hardware clock to GMT. As noted on
                the screen, if you are only running one operating system on your machine, then this
                setting is usually fine. However, if you are using a multi-boot system, you may wish
                to leave the hardware clock set at local time.</p><p>You will then be asked to select your time zone.</p><p>You can use the "arrow keys" and the <span><b class="keycap">Enter</b></span> key
                to make your selections.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="MD5_Passwd"></a>MD5 passwords</h3></div></div><div></div></div><a class="indexterm" name="d0e1544"></a><p>You will be prompted about whether or not to enable MD5 passwords. If this is
                going to be a stand-alone system, then MD5 passwords should work fine. If you are
                going to be integrating this system into an already existing network of Unix
                machines, you may wish to use the older DES encryption method. Again, make your
                selection with the "arrow keys" and then the
                <span><b class="keycap">Enter</b></span> key.</p><p>The differences between MD5 and DES password encryption is covered in the
                Fundamentals section.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Shadow_Passwd"></a>Shadow passwords</h3></div></div><div></div></div><a class="indexterm" name="d0e1558"></a><p>You should always enable shadow passwords unless you have a very good reason for
                doing otherwise. Not using shadow passwords leaves your system very vulnerable to
                local attacks.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="root_passwd"></a>Root password</h3></div></div><div></div></div><p>You need to set a password for the "root" or administrator
                account. Read the instructions on the screen carefully and chose a password.</p><p>You'll be prompted to enter the password twice to verify that you didn't make any typos.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admon/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>Choose a really good password for the root user? Remember that a person having
                    access to the root account would have full permissions on the system.</p></td></tr></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Create_user_acct"></a>Create a normal user account</h3></div></div><div></div></div><p>It's usually always a good idea to create a normal user account. For our example,
                we'll create one called "student", but you can choose whatever
                your preferred username is.</p><p>Again, choose a good password for your normal user account.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="pcmcia"></a>ACACIA</h3></div></div><div></div></div><a class="indexterm" name="d0e1586"></a><p>If you're not installing on a laptop, Debian will detect this and ask if you wish
                to remove the ACACIA packages. This is safe to do, unless you know you'll be wanting
                ACACIA support for something.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="PPP_DialUp_Config"></a>PPP dial-up configuration</h3></div></div><div></div></div><p>If you have a modem connected to your machine, and want to enable your Debian
                system to use it to connect to the Internet, then select <span><b class="guibutton">Yes</b></span>.</p><a class="indexterm" name="d0e1602"></a><p>If you don't have a modem, or don't wish to connect to the Internet via PPP
                (perhaps you have a network card), then you can select <span><b class="guibutton">No</b></span>.</p><a class="indexterm" name="d0e1610"></a><p>If you selected <span><b class="guibutton">Yes</b></span>, you'll be taken through the PPP
                Configuration Utility. You'll need to know your dial-up number, username and
                password. Your ISP should be able to provide you with these.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="config_apt"></a>Configuring APT</h3></div></div><div></div></div><p>APT is part of the Debian package management system.</p><a class="indexterm" name="d0e1624"></a><p>You need to tell APT where it can obtain Debian packages from. If you have a
                permanent Internet connection, then it's usually a good idea to select a local
                Debian mirror to obtain packages from. If you don't have an Internet connection,
                then you can tell Debian to obtain its packages from CD-ROM instead.</p><p>APT is clever enough to be able to handle multiple CDs, so you could load all 7
                official CD images into its database if necessary.</p><p>Since we've just installed off CD-ROM, this is probably the easiest way to
                continue, so insert the CD and then just select "cdrom" and press <span><b class="keycap">Enter</b></span>.</p><p>APT will then prompt you for further CDs. If you have them, then feel free to load
                them in. Otherwise, select <span><b class="guibutton">No</b></span> and press <span><b class="keycap">Enter</b></span>.</p><p>APT will then prompt you to select any additional package sources.</p><p>Select <span><b class="guibutton">No</b></span> and press <span><b class="keycap">Enter</b></span>.</p><p>You'll also be asked if you wish to track security updates from the official
                Debian security site. If you have a connection to the Internet, this option is
                definitely recommended.</p><p>You can get back to this section after you've finished your installation by
                running the <span><b class="command">apt-setup</b></span> command.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tasksel_dselect"></a>tasksel and dselect</h3></div></div><div></div></div><a class="indexterm" name="d0e1665"></a><a class="indexterm" name="d0e1668"></a><p>You'll be asked if you wish to use "tasksel" (task select),
                which will allow you to tailor your system to perform specific tasks by installing
                the correct packages.</p><p>Select <span><b class="guibutton">Yes</b></span> and press <span><b class="keycap">Enter</b></span>.</p><p>You can use the <span><b class="keycap">Up</b></span>/<span><b class="keycap">Down</b></span> arrow keys to scroll
                through the list of "tasks" in tasksel, and you can use the
                <span><b class="keycap">left</b></span>/<span><b class="keycap">right</b></span> arrow keys to select either the
                selection screen, the <span><b class="guibutton">Finish</b></span>, <span><b class="guibutton">Task
                info</b></span> or <span><b class="guibutton">Help</b></span> buttons.</p><p>While the selection screen is active, you can use either the
                <span><b class="keycap">Spacebar</b></span> or <span><b class="keycap">Enter</b></span> key to toggle which options you
                wish to install.</p><p>For a first time desktop installation, it is recommended that you select the
                "X window system" and "desktop environment" options.</p><p>Once you've toggle what you want, you can select the <span><b class="guibutton">Finish</b></span>
                button and hit <span><b class="keycap">Enter</b></span>.</p><p>You'll now be prompted about whether you wish to use <span><b class="command">dselect</b></span>.
                This is similar tool to "tasksel", but allows your more control
                over what software packages you're going to install. You can safely skip this step
                for now though.</p><p>Select <span><b class="guibutton">No</b></span> and press <span><b class="keycap">Enter</b></span>.</p><p>You will then be presented with a long list of packages that are now going to be
                installed, as well as the summary on the disk space that will be required to perform
                this operation. You can select <tt class="option">Y</tt> and <span><b class="keycap">Enter</b></span> to
                continue, or <tt class="option">N</tt> and <span><b class="keycap">Enter</b></span> if you wish to abort the installation.</p><p>APT will then proceed to load the packages that it requires from the various
                sources that you'd told it about previously. If you told it to load packages off the
                CD-ROM, it will prompt you to make sure that the relevant CD is inserted, and to
                then press <span><b class="keycap">Enter</b></span>.</p><a class="indexterm" name="d0e1754"></a><p>Do this now.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="binutils"></a>binutils</h4></div></div><div></div></div><a class="indexterm" name="d0e1762"></a><p>You may receive an error message about the "binutils"
                    package and a "Kernel link failure". You can just press
                    <span><b class="keycap">Enter</b></span> and safely ignore the message, as it is only pertinent if
                    you are performing an upgrade of your system, rather than an installation.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="less"></a>less</h4></div></div><div></div></div><p>You will be prompted to configure the <span><b class="command">less</b></span> command; you can
                    also safely just press <span><b class="keycap">Enter</b></span> here.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="Locale"></a>locale</h4></div></div><div></div></div><a class="indexterm" name="d0e1784"></a><p>You will be prompted to chose which locale(s) you wish to support.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="statd_tcpwrappers"></a>statd and tcpwrappers</h4></div></div><div></div></div><p>You will be notified that the statd daemon uses tcpwrappers. Again, just hit <span><b class="keycap">Enter</b></span>.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="Openssh"></a>OpenSSH</h4></div></div><div></div></div><a class="indexterm" name="d0e1800"></a><p>You will be prompted about whether to allow only SSH protocol 2.</p><p>Again, just hit <span><b class="keycap">Enter</b></span> to select <span><b class="guibutton">Yes</b></span>.</p><p>You will also be notified about OpenSSH's privilege separation, and be given
                    the option of installing ssh-keysign with the SUID bit set.</p><p>You can hit <span><b class="keycap">Enter</b></span> through these two options.</p><p>You will also be prompted about whether you wish to run the OpenSSH server. If
                    you intend to remotely access this machine, then you should enable the server.
                    Otherwise, you can leave this off.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="psfontmgr_paper"></a>psfontmgr and paper size</h4></div></div><div></div></div><p>Enable this if you have a PostScript printer. Most modern printers are.</p><a class="indexterm" name="d0e1827"></a><p>You will also be prompted for your default paper size.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="GDM"></a>GDM</h4></div></div><div></div></div><p>You'll be asked to select a default X Windows display manager. You can just
                    select the default.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="Mozilla"></a>Mozilla</h4></div></div><div></div></div><a class="indexterm" name="d0e1842"></a><p>You should enable TrueType fonts for Mozilla. It looks prettier.</p><p>You can leave the "tsp wrapper" set to "none".</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="Xserver"></a>Xserver</h4></div></div><div></div></div><a class="indexterm" name="d0e1852"></a><p>You should opt to have your X server wrapper managed by "debconf".</p><p>You should opt to have your X server configuration file managed by "debconf".</p><p>You'll need to select which X server you wish to use, based on your video
                    card. Select "vesa" if you're unsure. Don't worry, you can
                    always come back here and try later.</p><p>You can opt to use the kernel framebuffer device interface.</p><p>For a beginner, it's easiest to use the <tt class="option">Simple</tt> option to
                    configure your X Windows System.</p><p>Select your monitor size, resolution and color depth.</p><p>You should now see quite a few lines of text scrolling up your display. These
                    are the individual packages being unpacked and installed on your system.</p><p>Once this has been done, the newly installed packages will be configured. Some
                    of this configuration will require your input.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ispell"></a>ispell</h4></div></div><div></div></div><p>You'll be asked which dictionaries you wish to use, select either 1 or 2, and
                    then press <span><b class="keycap">Enter</b></span>.</p><p>You'll be asked if you wish to erase and previously downloaded .deb files. You
                    can just press <span><b class="keycap">Enter</b></span> here.</p><a class="indexterm" name="d0e1887"></a></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="exim"></a>exim</h4></div></div><div></div></div><a class="indexterm" name="d0e1893"></a><p>The default MTA<sup>[<a name="d0e1898" href="#ftn.d0e1898">2</a>]</sup> that comes with Debian is Exim. You'll be prompted to let Debian
                    know what sort of mail system configuration your environment uses.</p><a class="indexterm" name="d0e1902"></a><a class="indexterm" name="d0e1905"></a><p>You can safely choose "4) Local delivery only".</p><p>Provide your normal user account as the address which should receive postmaster-mail.</p><a class="indexterm" name="d0e1912"></a><p>You should, finally, be presented with a "Have fun!" screen.</p><p>Well done, your Debian system is up and running and ready to use!</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Loggin_in"></a>Logging In</h3></div></div><div></div></div><p>Now you should be ready to finally log in! You should make your initial login with
                the normal user account that you created earlier.</p><p>Once you've logged in under your normal user account, you can then use the
                "su" (substitute user) command to become the super user, also
                called the "root user", if you are going to be performing any
                administration tasks.</p><a class="indexterm" name="d0e1927"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
Linux baloo.zoo.org.za 2.2.20-idepci #1 Sat Apr 20 12:45:19 EST 2002 i686 unknown

Most of the programs included with the Debian GNU/Linux system are
freely redistributable; the exact distribution terms for each program
are described in the individual files in /usr/share/doc/*/copyright

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.

student@debian:~$ su 
Password: 
debian:/home/student#
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="bootup"></a>Bootup</h3></div></div><div></div></div><div class="figure"><a name="d0e1936"></a><p class="title"><b>Figure&nbsp;2.1.&nbsp;The Bootup sequence</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0"><tr style="height: 602px"><td><img src="../images/diagram09.png" height="602" alt="The Bootup sequence"></td></tr></table></div></div><p>This chapter will describe the steps that your machine takes from the time that it
                is turned on up until your operating system is fully loaded.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admon/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>This only covers the sequence of events on x86 (Intel 80x86 or compatible). If
                    you are using a Sparc or Alpha architecture machine, the process will be
                    similar, but not identical.</p></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1947"></a>Switch on BIOS and CMOS</h4></div></div><div></div></div><p>When you start your machine, it goes through a process known as
                    "bootstrapping", or "booting".</p><a class="indexterm" name="d0e1952"></a><a class="indexterm" name="d0e1955"></a><p>Simply put, your computer doesn't know what to do when you turn it on, so it
                    has to go and fetch some instructions from somewhere. It will initially start
                    the BIOS<sup>[<a name="d0e1960" href="#ftn.d0e1960">3</a>]</sup> off your machines CMOS<sup>[<a name="d0e1964" href="#ftn.d0e1964">4</a>]</sup> chip.</p><p>As the name implies, the BIOS can handle very simple read and write procedures
                    on your machine, usually the system's hard drive.</p><p>Before the BIOS does anything else, it will initiate what is known as POST<sup>[<a name="d0e1972" href="#ftn.d0e1972">5</a>]</sup>. These are a series of very simple tests to check that the hardware
                    connected to the system (such as RAM, hard drives, video) are functional.</p><p>If you system fails POST, it will emit a series of beeps. You can usually look
                    up the meaning of these beeps in your motherboard's manual.</p><a class="indexterm" name="d0e1978"></a></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1981"></a>Master Boot Record</h4></div></div><div></div></div><p>Once POST has been passed, the CMOS will then examine the first sector of your
                    hard disk for the Master Boot Record (MBR), which will contain a boot loader. If
                    it cannot find the MBR, or cannot find a boot loader, the CMOS will halt with an error.</p><a class="indexterm" name="d0e1986"></a><a class="indexterm" name="d0e1989"></a><p>Remember that the space on your hard disk can be partitioned into a maximum of
                    four (4) "primary partitions". Sometimes, your configuration
                    requires that you have more than 4 partitions available. To address this
                    problem, you can convert one of the 4 primary partitions into an
                    "extended partition", within which you can create
                    "logical partitions", which allows you to have more than 4
                    partitions on a single disk.</p><p>Each partition can hold a different operating system, or your operating system
                    may be spread over several partitions, each acting as a different drive letter
                    (Windows) or mount point (Linux).</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1996"></a>Boot Loader (LILO)</h4></div></div><div></div></div><p>Once the boot loader has been loaded off the MBR, it will take over control of
                    the machine.</p><a class="indexterm" name="d0e2001"></a><p>The boot loader may have been configured to boot a single operating system, or
                    it may provide the user with a choice of operating systems to choose from. Such
                    functionality is available from the *Li*nux Boot *Lo*ader, LILO.</p><p>Once the boot loader knows which partition you want to boot, it will examine
                    the first sector of that partition, also known as the boot sector, for the boot
                    program. If you're booting Linux, this will also be LILO.</p><p>Once the boot program has been loaded, it will be able to examine the Linux
                    filesystem and be able to load the Linux kernel into memory and execute it. It
                    will also be able to pass instructions on to the Linux kernel.</p><p>The Linux kernel will then proceed to probe the hardware in the machine based
                    on the setting the kernel was compiled with. These will include the device
                    drivers, which enable to kernel to read from the hard disk.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2012"></a>"init" and Run Levels</h4></div></div><div></div></div><p>The default instruction will be for the kernel to load up the
                    "init" process.</p><p>The init process is known as the parent of all processes and is generally
                    stored in the <b class="filename"><tt>/sbin</tt></b> directory.</p><a class="indexterm" name="d0e2022"></a><a class="indexterm" name="d0e2025"></a><p>The kernel will tell "init" what
                    "runlevel" to start the system at. Runlevel 2 is the default
                    runlevel for Debian.</p><p>The runlevels, and what happens at each level, are configured in the <b class="filename"><tt>/etc/inittab</tt></b> file.</p><div class="table"><a name="d0e2035"></a><p class="title"><b>Table&nbsp;2.4.&nbsp;Runlevels</b></p><table summary="Runlevels" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">Runlevel</td><td align="left">action</td></tr><tr><td align="left">0</td><td align="left">halt the system</td></tr><tr><td align="left">1</td><td align="left">single user or maintenance mode</td></tr><tr><td align="left">2-5</td><td align="left">multi-user mode</td></tr><tr><td align="left">6</td><td align="left">reboot</td></tr></tbody></table></div><p>The init process will then call a shell script called "rc"<sup>[<a name="d0e2069" href="#ftn.d0e2069">6</a>]</sup>, with the runlevel as its parameter, which will then start up
                    various system services, based on the runlevel that init was given.</p><a class="indexterm" name="d0e2073"></a><p>The "rc" script will examine the following directory<sup>[<a name="d0e2078" href="#ftn.d0e2078">7</a>]</sup>:</p><p>
                    <b class="filename"><tt>/etc/rc#.d/</tt></b>
                </p><p>Where the "#" is replaced by the current runlevel. For a
                    machine, which is booting normally, this would be runlevel 2, so rc would be
                    examining the contents of:</p><p>
                    <b class="filename"><tt>/etc/rc2.d/</tt></b>
                </p><p>In that directory are a collection of scripts.</p><p>What is important is their names and the first letter of the name must be a
                    capital "K" (short for kill, used when shutting down the
                    system) or a capital "S" (short for start, used when booting
                    up the system).</p><p>Anything else is ignored.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls /etc/rc2.d/
S10sysklogd  S19nfs-common  S20lpd    
S20ssh  S89cron S99rmnologin
S11klogd     S20exim        S20makedev
S20xfs  S99gdm S99xdm
S14ppp       S20inetd       S20nfs-kernel-server
S89atd  S99kdm
                    </pre></td></tr></table><p>The "rc" script will call all "K" scripts
                    with the "stop" parameter, this instructing those processes to
                    stop. It will then call all "S" scripts with the
                    "start" parameter, instructing those processes to start up.</p><p>The second and third characters of the script names are usually numbers. Since
                    "rc" executes the scripts in order, you can use this number to
                    determine the order in which processes are started and stopped.</p><p>This is useful for doing things like making sure that the network is up and
                    configured before starting your web server, etc.</p><p>One of the rc2.d scripts will examine a file called "fstab"
                    (short for file system table) in your <b class="filename"><tt>/etc</tt></b> directory. This file lists all the filesystems
                    that you want your system to mount at boot time.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2113"></a>Mounting Filesystems</h4></div></div><div></div></div><a class="indexterm" name="d0e2116"></a><p>The script will then examine this file, and mount the filesystems if appropriate.</p><a class="indexterm" name="d0e2121"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /etc/fstab 
# /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;	 &lt;dump&gt;  &lt;pass&gt;
/dev/hdb2       /               ext2    errors=remount-ro       0       1
/dev/hdb1       none            swap    sw                      0       0
proc            /proc           proc    defaults                0       0
/dev/fd0        /floppy         auto    user,noauto             0       0
/dev/cdrom      /cdrom          iso9660 ro,user,noauto          0       0
                    </pre></td></tr></table><a class="indexterm" name="d0e2126"></a><a class="indexterm" name="d0e2129"></a><a class="indexterm" name="d0e2132"></a><div class="itemizedlist"><ul type="disc"><li><p>The "file system" column contains the device, or
                            special name in the case of <b class="filename"><tt>proc</tt></b>,
                            for the file system. </p></li><li><p>The "mount point" specifies where that file system
                            will be mounted. </p></li><li><p>The "type" column indicates what type of file system
                            it is. The standard type under Debian Linux is "ext2". </p></li><li><p>The "options" column specifies any special options
                            that are to be used for this filesystem.</p><div class="itemizedlist"><ul type="circle"><li><p> ro = read only</p></li><li><p> noauto = don't mount at boot time</p></li></ul></div><p>
                        </p></li><li><p>The "dump" number indicates the level the drive
                            should be dumped, or backed up at. A level 0 means a full backup, while
                            higher numbers mean incremental backups.</p></li><li><p>The "pass" number indicates the order that the file
                            systems should be checked with "fsck" when the system
                            boots. The root ("/") file system should always be
                            checked first, and so should have a pass number of 1. A pass number of
                            "0" means that the file system won't be checked with "fsck"</p></li></ul></div><p>Obviously, some of the files may exist in more than one <b class="filename"><tt>rc#.d</tt></b> directory. So, in order to ease
                    administration (imagine having to make a change in a file common to all run
                    levels), and to save space, the actual scripts live in the <b class="filename"><tt>/etc/init.d/</tt></b> directory, and are then symlinked into
                    their relevant <b class="filename"><tt>/etc/rc#.d</tt></b> directories.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls -la /etc/rc2.d
total 8
drwxr-xr-x    2 root  root  4096 Mar 12 08:46 .
drwxr-xr-x   59 root  root  4096 Mar 12 09:08 ..
lrwxrwxrwx    1 root  root  18 Mar 12  2004 
	S10sysklogd -&gt; ../init.d/sysklogd
lrwxrwxrwx    1 root  root  15 Mar 12  2004 
	S11klogd -&gt; ../init.d/klogd
lrwxrwxrwx    1 root  root  13 Mar 12  2004 
	S14ppp -&gt; ../init.d/ppp
lrwxrwxrwx    1 root  root  20 Mar 12 08:44
	S19nfs-common -&gt; ../init.d/nfs-common
lrwxrwxrwx    1 root  root  14 Mar 12  2004
	S20exim -&gt; ../init.d/exim
lrwxrwxrwx    1 root  root  15 Mar 12  2004
	S20inetd -&gt; ../init.d/inetd
lrwxrwxrwx    1 root  root  13 Mar 12 08:44 
	S20lpd -&gt; ../init.d/lpd
lrwxrwxrwx    1 root  root  17 Mar 12  2004
	S20makedev -&gt; ../init.d/makedev
lrwxrwxrwx    1 root  root  27 Mar 12 08:44 
	S20nfs-kernel-server -&gt; ../init.d/nfs-kernel-server
lrwxrwxrwx    1 root  root  13 Mar 12 08:44 
	S20ssh -&gt; ../init.d/ssh
lrwxrwxrwx    1 root  root  13 Mar 12 08:46 
	S20xfs -&gt; ../init.d/xfs
lrwxrwxrwx    1 root  root  13 Mar 12  2004 
	S89atd -&gt; ../init.d/atd
lrwxrwxrwx    1 root  root  14 Mar 12  2004 
	S89cron -&gt; ../init.d/cron
lrwxrwxrwx    1 root  root  13 Mar 12 08:45
	S99gdm -&gt; ../init.d/gdm
lrwxrwxrwx    1 root  root  13 Mar 12 08:46 
	S99kdm -&gt; ../init.d/kdm
lrwxrwxrwx    1 root  root  19 Mar 12  2004
	S99rmnologin -&gt; ../init.d/rmnologin
lrwxrwxrwx    1 root  root  13 Mar 12 08:46
	S99xdm -&gt; ../init.d/xdm
                    </pre></td></tr></table><p>Once the system has reached the state required by the contents of the rc#.d
                    directory, the user will be presented with a login screen.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2180"></a>Getty, issue and motd</h4></div></div><div></div></div><a class="indexterm" name="d0e2183"></a><a class="indexterm" name="d0e2186"></a><a class="indexterm" name="d0e2189"></a><p>The text-based login screen is an application called
                    "getty", which displays the contents of <b class="filename"><tt>/etc/issue</tt></b>, which is a file that usually holds the
                    name of the operating system, as well as the terminal name.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
Debian GNU/Linux 3.0 baloo.zoo.org.za
baloo.zoo.org.za login: root
                    </pre></td></tr></table><p>One you provide your username, the getty process then spawns another process
                    called "login".</p><p>This asks you for your password, and then checks your answer against the
                    contents of <b class="filename"><tt>/etc/passwd</tt></b>, or equivalent
                    authentication mechanism.</p><p>If the match succeeds, the login program displays the contents of the
                        <b class="filename"><tt>/etc/motd</tt></b> file, and then replaces
                    itself (using the exec( ) system call) with a copy of your shell, running under
                    your user id.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
Password:
Last login: Wed Mar 24 10:02:19 2004 on tty2
Linux baloo.zoo.org.za 2.2.20-idepci #1 Sat Apr 20 12:45:19 EST 2002 i686 
unknown

Most of the programs included with the Debian GNU/Linux system are
freely redistributable; the exact distribution terms for each program
are described in the individual files in /usr/share/doc/*/copyright

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
                    </pre></td></tr></table><p>Your shell will then process the <b class="filename"><tt>/etc/profile</tt></b> file, and, if your shell is bash, the
                        <b class="filename"><tt>/etc/bashrc and $HOME/.bash_login</tt></b> files.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# pstree
init-+-atd
&#65533;&#65533;&#65533;&#65533; |-bash---pstree
&#65533;&#65533;&#65533;&#65533; |-cron
&#65533;&#65533;&#65533;&#65533; |-5*[getty]
&#65533;&#65533;&#65533;&#65533; |-inetd
&#65533;&#65533;&#65533;&#65533; |-keventd
&#65533;&#65533;&#65533;&#65533; |-kflushd
&#65533;&#65533;&#65533;&#65533; |-klogd
&#65533;&#65533;&#65533;&#65533; |-kswapd
&#65533;&#65533;&#65533;&#65533; |-kupdate
&#65533;&#65533;&#65533;&#65533; |-lpd
&#65533;&#65533;&#65533;&#65533; |-sshd---sshd---bash---top
&#65533;&#65533;&#65533;&#65533; `-syslogd 
                    </pre></td></tr></table><a class="indexterm" name="d0e2223"></a><p>The Message of the Day (<b class="filename"><tt>/etc/motd</tt></b>)
                    file is useful for system announcements that you want your users to see when
                    they log in. This could be something like your company policy on the use of the
                    computing facilities, to a "Joke of the Day".</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2231"></a>Shutting down:</h4></div></div><div></div></div><p>You can use the "shutdown" command to gracefully shut the
                    system down.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
shutdown [ -r | -h ] time [ message ]
                    </pre></td></tr></table><a class="indexterm" name="d0e2238"></a><p>The "-r" flag tells the system that you wish to reboot once
                    everything's been shut down. The "-h" flag instead tells the
                    system that you wish to simply halt it. Once a system is halted, you will have
                    to power it off and then on again manually.</p><p>If you don't specify either of these flags, the system will be brought down
                    into maintenance, or single user mode.</p><p>The "time" parameter specifies when the shutdown is to take
                    place. This can be specified either in HH:MM format (i.e., 01:00 means shut down
                    at 1AM), or in "+minutes", where minutes is the number of
                    minutes from the time the command is issued until the shutdown process begins.
                    You can also specify "now" to shut down the system immediately.</p><p>The "message" options specifies an optional message which
                    will be broadcast to all shell users currently logged onto the system.</p><h5><a name="d0e2249"></a>Examples:</h5><p>Shutdown the system now, for a reboot:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# shutdown -r now

Broadcast message from root (pts/0) (Sat Mar 20 03:34:37 2004):

The system is going down for reboot NOW!
                    </pre></td></tr></table><p>You can use the "shutdown" and "reboot"
                    commands to gracefully shutdown the</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="X11_System"></a>The X11 system</h3></div></div><div></div></div><a class="indexterm" name="d0e2261"></a><p>The standard graphical user interface (GUI) that comes with Debian is called
                XFree86. This is a free implementation of the X Windows System (X11R6), written for
                the x86 architecture.</p><p>The X Windows System uses the client/server architecture. The server runs on the
                machine which has the video display hardware, while the clients run can run on the
                same machine, or on a remote system.</p><div class="figure"><a name="d0e2268"></a><p class="title"><b>Figure&nbsp;2.2.&nbsp;XWindow client/server model</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0"><tr style="height: 461px"><td><img src="../images/diagram08.png" height="461" alt="XWindow client/server model"></td></tr></table></div></div><p>This means that your X Windows server must know how to handle your video display hardware.</p><p>Your X Windows clients are your graphical applications; examples include
                "xterm", "mozilla" and "openoffice".</p><p>In addition, you usually need a system to manage to each of the
                "windows" that your applications generate. This system is called
                your "window manager". It is responsible for putting borders
                around your application windows, and allowing you to perform actions such altering
                the size (know as "geometry" in X11 parlance) and location of the
                window on the screen.</p><p>Some of the popular window managers include "fluxbox",
                "fvwm" and "afterstep".</p><p>In addition to window managers, you also get "integrated desktop
                environments". These are a collection of applications, usually including a
                menu system, a window manager and a graphical file manager that supports
                drag'drop between the various desktop elements.</p><p>Examples of popular desktop environments include KDE, Gnome and XFCE.</p><p>You can find a good summary of available window managers and desktop environments
                    <a href="http://xwinman.org/" target="_top">here</a>
            </p><p>There are two ways of allowing access to your X Windows system.</p><p>You can make use of the <span><b class="command">startx</b></span> command from a local console,
                after you've logged in.</p><p>Alternatively, you can configure an X Windows Display Manager. The default display
                manager that comes with XFree86 is called plain "XDM".</p><p>There is a KDE specific one called "KDM" and a Gnome specific
                one called "GDM"; the KDE and GNOME Display Managers, respectively.</p><p>All three of these applications provide a graphical login screen, and can be
                accessed either via the local console, or via the network by means of the XDMCP protocol.</p><p>You can use the following command under Debian to configure XFree86 (as root):</p><p>
                <tt class="computeroutput">dpkg-reconfigure xserver-xfree86</tt>
            </p><a class="indexterm" name="d0e2311"></a><p>This will take you through the same configuration procedure as when you first
                installed it earlier (see <a href="#config_XWindows" title="Configuring X Windows">the section called &#8220;Configuring X Windows&#8221;</a>).</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="lilo_grub"></a>Changing your bootloader from LILO to GRUB</h3></div></div><div></div></div><p>The default Debian installation uses the Linux Boot Loader (LILO), and it performs
                perfectly for simple boot configurations. However, a lot of people find the GRand
                Unified Bootloader (GRUB) easier to use and more powerful and thus better suited for
                their needs.</p><a class="indexterm" name="d0e2324"></a><a class="indexterm" name="d0e2327"></a><p>Switching from LILO to GRUB on Debian is a relatively easy process.</p><p>First, you'll need to install the GRUB package:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install grub
Reading Package Lists... Done
Building Dependency Tree... Done
The following NEW packages will be installed:
  grub 
0 packages upgraded, 1 newly installed, 0 to remove and 2  not upgraded.
Need to get 0B/247kB of archives. After unpacking 504Kb will be used.
Media Change: Please insert the disc labeled &amp;apos;Debian GNU/Linux 3.0 r2 _Woody_ 
- Official i386 Binary-1 (20031201)&amp;apos; in the drive &amp;apos;/cdrom/&amp;apos; 
and press enter

Selecting previously deselected package grub.
(Reading database ... 9857 files and directories currently installed.)
Unpacking grub (from .../g/grub/grub_0.91-2_i386.deb) ...
Setting up grub (0.91-2) ...
                </pre></td></tr></table><p>Once that's done, you'll need to install the boot loader code on the device that
                you boot from.</p><p>In our example system, that's the second IDE drive on the system
                ("/dev/hdb"), so the command you would issue would be:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# grub-install /dev/hdb
Installation finished. No error reported.
This is the contents of the device map /boot/grub/device.map.
Check if this is correct or not. If any of the lines is incorrect,
fix it and re-run the script `grub-install&amp;apos;.

(fd0)   /dev/fd0
(hd0)   /dev/hda
(hd1)   /dev/hdb
                </pre></td></tr></table><p>Once that's done, you'll need to run the <span><b class="command">update-grub</b></span> command,
                which is Debian specific, and which will generate a GRUB menu configuration file for
                you, called <b class="filename"><tt>/boot/grub/menu.lst</tt></b>.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# update-grub
Searching for GRUB installation directory ... found: /boot/grub .
Testing for an existing GRUB menu.list file... 

Could not find /boot/grub/menu.lst file. Would you like one generated 
for you? (y/N) y
Updating /boot/grub/menu.lst ... done


Please note that configuration parameters for GRUB are stored in
/boot/grub/menu.lst . You must edit this file in order to set the 
options which GRUB passes to the kernel, as well as the drive which 
GRUB looks in to for the kernel.

Everything on the line after &amp;quot;kopt=&amp;quot; is passed to the kernel
as parameters, and &amp;quot;groot=&amp;quot; must be set to the partition
(in GRUB terms, such as &amp;quot;(hd0,0)&amp;quot;) which GRUB will load the 
kernel from.

After you have edited /boot/grub/menu.lst , please re-run 
&amp;apos;update-grub&amp;apos;.
                </pre></td></tr></table><p>As the instructions tell you, you will need to edit the "kopt"
                and "groot" parameters in that file. You should use
                "vi" to do this:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# vi /boot/grub/menu.lst
                </pre></td></tr></table><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
(hd0,0) refers to the first hard disk's first partition
(hd1,0) refers to the second hard disk's first partition
(hd1,1) refers to the second hard disk's second partition
etc.
                </pre></td></tr></table><p>Once you've edited the <b class="filename"><tt>menu.lst</tt></b> file to
                your satisfaction, you will need to re-run the <span><b class="command">update-grub</b></span> command:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# update-grub
Searching for GRUB installation directory ... found: /boot/grub .
Testing for an existing GRUB menu.list file... found: /boot/grub/menu.lst .
Updating /boot/grub/menu.lst ... done
                </pre></td></tr></table><p>Now reboot, and see if it has worked!</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# shutdown -r now
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Package_management"></a>Debian Package Management</h3></div></div><div></div></div><p>Unlike the RPM package management system which RedHat Linux uses, Debian's
                packages files have a .deb extension.</p><a class="indexterm" name="d0e2378"></a><a class="indexterm" name="d0e2381"></a><p>Debian uses three different, but related, sets of tools to manage its packages:
                dpkg, dselect and apt.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2386"></a>dkpg</h4></div></div><div></div></div><a class="indexterm" name="d0e2389"></a><p>The <span><b class="command">dpkg</b></span> command is the most analogous to RPM's
                    "rpm" command; it allows you to add and remove packages, and
                    to query currently installed packages, check their integrity and dependencies.</p><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2397"></a>List installed packages:</h5></div></div><div></div></div><p>
                        <tt class="computeroutput">dpkg --list</tt>
                    </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# dpkg --list
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Installed/Config-files/Unpacked/Failed-config/Half-installed
|/ Err?=(none)/Hold/Reinst-required/X=both-problems (Status,Err: uppercase=bad)
||/ Name           Version        Description
+++-======================================
ii  aalib1         1.4p5-13       ascii art library
ii  abiword        1.0.2+cvs.2002 Dummy package providing abiword
ii  abiword-common 1.0.2+cvs.2002 WYSIWYG word processor
ii  abiword-gtk    1.0.2+cvs.2002 WYSIWYG word processor based on GTK
ii  adduser        3.47           Add and remove users and groups
ii  apt            0.5.4          Advanced front-end for dpkg
ii  apt-utils      0.5.4          APT utility programs
ii  ark            2.2.2-9        An archiver for KDE
ii  asclock-themes 2.0.12-5       Theme files for ASclock, a clock applet
ii  at             3.1.8-11       Delayed job execution and batch processing
ii  base-config    1.33.18        Debian base configuration package
ii  base-files     3.0.2          Debian base system miscellaneous files
ii  base-passwd    3.4.1          Debian Base System Password/Group Files
[ ... ]
ii  xlibs          4.1.0-16woody1 X Window System client libraries
ii  xnest          4.1.0-16woody1 nested X server
ii  xprt           4.1.0-16woody1 X print server
ii  xserver-common 4.1.0-16woody1 files and utilities common to all X servers
ii  xserver-xfree8 4.1.0-16woody1 the XFree86 X server
ii  xspecs         4.1.0-16woody1 X protocol, extension, and library technical
ii  xterm          4.1.0-16woody1 X terminal emulator
ii  xutils         4.1.0-16woody1 X Window System utility programs
ii  xvfb           4.1.0-16woody1 virtual framebuffer X server
ii  zlib1g         1.1.4-1.0woody compression library - runtime
                        </pre></td></tr></table></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2407"></a>Information about a .deb file:</h5></div></div><div></div></div><p>
                        <span><b class="command">dpkg --info package.deb</b></span>
                    </p></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2415"></a>Install a .deb file:</h5></div></div><div></div></div><p>
                        <span><b class="command">dpkg --install package.deb</b></span>
                    </p></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2423"></a>Example Installation</h5></div></div><div></div></div><p>We'll install the "bsdgames" package.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# mount /cdrom
debian:~# dpkg --info /cdrom/pool/main/b/bsdgames/bsdgames_2.13-7_i386.deb
 new debian package, version 2.0.
 size 791782 bytes: control archive= 6220 bytes.
     841 bytes,    20 lines      control              
   10117 bytes,   158 lines      md5sums              
    1791 bytes,    56 lines   *  postinst             #!/bin/sh
     969 bytes,    32 lines   *  postrm               #!/bin/sh
    1580 bytes,    55 lines   *  preinst              #!/bin/sh
     198 bytes,     7 lines   *  prerm                #!/bin/sh
 Package: bsdgames
 Version: 2.13-7
 Section: games
 Priority: optional
 Architecture: i386
 Depends: libc6 (&gt;= 2.2.4-4), libncurses5 (&gt;= 5.2.20020112a-1),
 wenglish | wordlist
 Suggests: wenglish
 Conflicts: bsdgames-nonfree (&lt;&lt; 2.5), suidmanager (&lt;&lt; 0.50)
 Replaces: bsdgames-nonfree (&lt;&lt; 2.5)
 Installed-Size: 2064
 Maintainer: Joey Hess &lt;joeyh@debian.org&gt;
 Description: collection of text games from BSD systems
  This is a collection of some of the text-based games and amusements that have
  been enjoyed for decades on unix systems.
  .
  Includes these programs: adventure, arithmetic, atc, backgammon, battlestar,
  bcd, boggle, caesar, canfield, countmail, cribbage, fish, gomoku, hangman,
  hunt, mille, monop, morse, number, pig, phantasia, pom, ppt, primes, quiz,
  random, rain, robots, sail, snake, tetris, trek, wargames, worm, worms,
  wump, wtf
debian:~# dpkg --install /cdrom/pool/main/b/bsdgames/bsdgames_2.13-7_i386.deb 
Selecting previously deselected package bsdgames.
(Reading database ... 36337 files and directories currently installed.)
Unpacking bsdgames (from .../bsdgames_2.13-7_i386.deb) ...
Setting up bsdgames (2.13-7) ...

debian:~# _
                        </pre></td></tr></table></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2430"></a>List files installed by a specific package:</h5></div></div><div></div></div><p>
                        <tt class="computeroutput">dpkg --listfiles package</tt>
                    </p><p>Let's list all the files which we've just installed that were part of the
                        "bsdgames" package.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# dpkg --listfiles bsdgames
/.
/usr
/usr/share
/usr/share/doc
/usr/share/doc/bsdgames
/usr/share/doc/bsdgames/BUGS.atc
/usr/share/doc/bsdgames/ChangeLog.gz
/usr/share/doc/bsdgames/README.linux.hunt
/usr/share/doc/bsdgames/README.phantasia
/usr/share/doc/bsdgames/README.boggle
/usr/share/doc/bsdgames/README.linux.boggle
/usr/share/doc/bsdgames/TODO.gz
/usr/share/doc/bsdgames/ChangeLog.0
/usr/share/doc/bsdgames/trek.me.gz
[ ... ]
/var/games
/var/games/bsdgames
/var/games/bsdgames/phantasia
/var/games/bsdgames/sail
/usr/share/doc/bsdgames/NEWS.gz
/usr/share/man/man6/teachgammon.6.gz
/usr/share/man/man6/rot13.6.gz
/usr/share/man/man6/morse.6.gz
/usr/share/man/man6/ppt.
                        </pre></td></tr></table></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2442"></a>Find out which package a specific file belongs to:</h5></div></div><div></div></div><p>
                        <span><b class="command">dpkg --search filename</b></span>
                    </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# dpkg --search /usr/games/wtf
bsdgames: /usr/games/wtf
                        </pre></td></tr></table><p>This is useful if you're going to be upgrading a package and want to
                        preserve its existing configuration information.</p></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2454"></a>Uninstall an installed package:</h5></div></div><div></div></div><a class="indexterm" name="d0e2457"></a><p>
                        <span><b class="command">dpkg --remove package</b></span>
                    </p></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2465"></a>Uninstall an installed package _and_ its associated configuration files:</h5></div></div><div></div></div><p>
                        <span><b class="command">dpkg --purge package</b></span>
                    </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# dpkg --purge bsdgames
(Reading database ... 36513 files and directories currently installed.)
Removing bsdgames ...
dpkg - warning: while removing bsdgames, directory 
`/var/games/bsdgames/phantasia&amp;apos; not empty so not removed.
dpkg - warning: while removing bsdgames, directory 
`/var/games/bsdgames' not empty so not removed.
dpkg - warning: while removing bsdgames, directory 
`/var/games' not empty so not removed.
Purging configuration files for bsdgames ...
                        </pre></td></tr></table><p>You'll notice the warnings about "/var/games" not being
                        empty, but if you check now, you'll see that the directory has indeed been deleted:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls /var/games
ls: /var/games: No such file or directory
                        </pre></td></tr></table><p>This is because the directory was removed as part of the "purging
                        configuration files" step.</p><p>You should consult the dpkg(8) manual page for further information about
                        this command.</p><a class="indexterm" name="d0e2483"></a></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="deselect"></a>dselect</h4></div></div><div></div></div><p>The <span><b class="command">dselect</b></span> command is a frontend to the
                    <span><b class="command">dpkg</b></span> command and APT system, and lets you access all its
                    functions through a text based menu system.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apt"></a>apt</h4></div></div><div></div></div><p>The APT (Advanced Package Tool) system is probably one of the reasons that
                    Debian has gained such popularity as a Linux distribution.</p><a class="indexterm" name="d0e2505"></a><p>Unlike dpkg and dselect, APT is able to handle dependencies and makes
                    upgrading the software on your system very easy.</p><p>APT maintains a listing of packages and their locations.</p><p>You can use the <span><b class="command">apt-cdrom</b></span> command to add a CD to the
                    current listing. So, for example, you could insert the second Debian CD, and add
                    the packages on it to the list of the ones available:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-cdrom add
Using CD-ROM mount point /cdrom/
Unmounting CD-ROM
Please insert a Disc in the drive and press enter 
Mounting CD-ROM
Identifying.. [580650a473d808bc27074b25dff224f7-2]
Scanning Disc for index files..  Found 4 package indexes and 0 source
indexes.
This Disc is called:
 &amp;apos;Debian GNU/Linux 3.0 r2 _Woody_ - Official i386 Binary-1 (20031201)&amp;apos;
Reading Package Indexes... Done
Wrote 1167 records.
Writing new source list
Source List entries for this Disc are:
deb cdrom:[Debian GNU/Linux 3.0 r2 _Woody_ - Official i386 Binary-1 (20031201)]
/ unstable contrib main non-US/contrib non-US/main
Repeat this process for the rest of the CDs in your set.
debian:~# 
                    </pre></td></tr></table><p>You can likewise use the <span><b class="command">apt-ftp</b></span> command to add a remote
                    FTP archive to your list of package sources.</p><a class="indexterm" name="d0e2526"></a><p>To actually download and/or install packages, you can use the
                    <span><b class="command">apt-get</b></span> command, which takes the following parameters as commands:</p><div class="table"><a name="d0e2534"></a><p class="title"><b>Table&nbsp;2.5.&nbsp;apt-get commands</b></p><table summary="apt-get commands" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left"><span><b class="command">Update</b></span></td><td align="left">Retrieve new lists of packages</td></tr><tr><td align="left"><span><b class="command">Upgrade</b></span></td><td align="left">Perform an upgrade</td></tr><tr><td align="left"><span><b class="command">Install</b></span></td><td align="left">Install new packages</td></tr><tr><td align="left"><span><b class="command">Remove</b></span></td><td align="left">Remove packages</td></tr><tr><td align="left"><span><b class="command">Check</b></span></td><td align="left">Verify that there are no broken dependencies</td></tr></tbody></table></div><p>So, to install the "bsdgames" package, we would run:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install bsdgames
Reading Package Lists... Done
Building Dependency Tree... Done
The following NEW packages will be installed:
  bsdgames 
0 packages upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 0B/792kB of archives. After unpacking 2114Kb will be used.
Media Change: Please insert the disc labeled &amp;apos;Debian GNU/Linux 3.0 
r2 _Woody_ - Official i386 Binary-1 (20031201)&amp;apos; in the drive
&amp;apos;/cdrom/&amp;apos; and press enter

Selecting previously deselected package bsdgames.
(Reading database ... 36340 files and directories currently installed.)
Unpacking bsdgames (from .../bsdgames_2.13-7_i386.deb) ...
Setting up bsdgames (2.13-7) ...

debian:~# _
                    </pre></td></tr></table><p>As you can see, APT is clever enough to know which CD the package is on, and
                    will prompt you for the correct media when you ask it to install something.</p><p>You can also use the <span><b class="command">apt-setup</b></span> command to configure the
                    list of sources for packages.</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="RPM"></a>RPM Package Management:</h3></div></div><div></div></div><p>RPM, a cyclic acronym for RPM Package Management, forms the base of the RedHat
                Linux package management system, as well as several other distributions. Although it
                is not used for the base package management system in Debian Linux, you can still
                make use of it if required.</p><p>RPM packages are given a ".rpm" extension, but otherwise follow
                a naming scheme very similar to .deb packages. Although the package files are in a
                different format, the same basic operations are common to the different package
                management systems:</p><a class="indexterm" name="d0e2591"></a><p>List installed packages:</p><p>
                <span><b class="command">rpm -qa</b></span>
            </p><p>Information about a .rpm file:</p><p>
                <span><b class="command">rpm -qi package.rpm</b></span>
            </p><p>Install a .rpm file:</p><p>
                <span><b class="command">rpm -U package.rpm</b></span>
            </p><p>List files installed by a specific package:</p><p>
                <span><b class="command">rpm -ql package</b></span>
            </p><p>Find out which package a specific file belongs to:</p><p>
                <span><b class="command">rpm -qf filename</b></span>
            </p><p>Uninstall an installed package:</p><p>
                <span><b class="command">rpm -e package</b></span>
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="upgrd_kernel"></a>Upgrading your Linux kernel in Debian</h3></div></div><div></div></div><a class="indexterm" name="d0e2641"></a><p>Debian makes it very easy to upgrade your kernel by using kernel packages.</p><p>We're going to attempt something more challenging though, and try to build a
                kernel of our own.</p><p>We are currently running Linux 2.2.20:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# uname -a
Linux debian 2.2.20-idepci #1 Sat Apr 20 12:45:19 EST 2002 i686 unknown
                </pre></td></tr></table><p>We're going to upgrade to Linux 2.4.18, so we need to install the following packages:</p><div class="itemizedlist"><ul type="disc"><li><p>ncurses-dev</p></li><li><p>kernel-package</p></li><li><p>kernel-source-2.4.18</p></li><li><p>fakeroot</p></li></ul></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install kernel-package kernel-source-2.4.18 ncurses-dev
Reading Package Lists... Done
Building Dependency Tree... Done
The following NEW packages will be installed:
  kernel-package kernel-source-2.4.18 
0 packages upgraded, 2 newly installed, 0 to remove and 0  not upgraded.
Need to get 0B/24.1MB of archives. After unpacking 24.9MB will be used.
Media Change: Please insert the disc labeled &amp;apos;Debian GNU/Linux
3.0 r2 _Woody_ - Official i386 Binary-1 (20031201)&amp;apos; in the drive
&amp;apos;/cdrom/&amp;apos; and press enter

Selecting previously deselected package kernel-package.
(Reading database ... 36515 files and directories currently installed.)
Unpacking kernel-package (from .../kernel-package_7.107_all.deb) ...
Selecting previously deselected package kernel-source-2.4.18.
Unpacking kernel-source-2.4.18 
(from .../kernel-source-2.4.18_2.4.18-13_all.deb) ...
Selecting previously deselected package libncurses5-dev.
Unpacking libncurses5-dev 
(from .../libncurses5-dev_5.2.20020112a-7_i386.deb) ...

Setting up kernel-package (7.107) ...

Setting up kernel-source-2.4.18 (2.4.18-13) ...

Setting up libncurses5-dev (5.2.20020112a-7) ...

debian:~# _
                </pre></td></tr></table><p>Now change into your staging area (<b class="filename"><tt>/usr/local/src</tt></b> is a good place), and extract the kernel
                source into that directory:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cd /usr/local/src/
debian:/usr/local/src# tar -xjf /usr/src/kernel-source-2.4.18.tar.bz2
debian:/usr/local/src# cd kernel-source-2.4.18/
debian:/usr/local/src/kernel-source-2.4.18# _
                </pre></td></tr></table><p>Now you can run <span><b class="command">make xmenuconfig</b></span> if you want to use the X
                configuration interface; alternatively you can run <span><b class="command">make
                menuconfig</b></span> to use the text based interface. The <span><b class="command">make</b></span>
                command looks for a <b class="filename"><tt>Makefile</tt></b> (often called
                Makefile, or makefile), which you can think of as a recipe in order to be able to
                build something. You can optionally tell make what it is that you want to build, and
                make will inspect the relevant section in the Makefile to ascertain:</p><div class="itemizedlist"><ul type="disc"><li><p>the ingredients, or dependencies - what is required to make what is
                        requested and</p></li><li><p>the instructions - how to take the dependencies and turn them into the
                        requested target</p></li></ul></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/usr/local/src/kernel-source-2.4.18# make menuconfig
                </pre></td></tr></table><p>Peruse the menu, and make your selections. Once that's done, Exit and Save your
                kernel configuration file.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
Saving your kernel configuration...

*** End of Linux kernel configuration.
*** Check the top-level Makefile for additional configuration.
*** Next, you must run &amp;apos;make dep&amp;apos;.

debian:/usr/local/src/kernel-source-2.4.18# _
                </pre></td></tr></table><p>Clean the source tree and reset the kernel-package parameters:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">

debian:/usr/local/src/kernel-source-2.4.18# make-kpkg clean
                </pre></td></tr></table><p>Compile the kernel:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/usr/local/src/kernel-source-2.4.18# fakeroot make-kpkg /
/--revision=tsf.1.0 kernel_image
                </pre></td></tr></table><p>This command will build a kernel package which we can then install later. You can
                make the revision anything you want, although it's probably a good idea to give it a
                meaningful name so that you know what it is.</p><p>This can take a long time; probably best to go and take a break and come back and
                see if it's finished later.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
[ ... ]
make[2]: Leaving directory `/usr/local/src/kernel-source-2.4.18&amp;apos;
rm -f stamp-build
touch stamp-image
make[1]: Leaving directory `/usr/local/src/kernel-source-2.4.18&amp;apos;
debian:/usr/local/src/kernel-source-2.4.18# _

                </pre></td></tr></table><p>Once it's finished, you'll be able to simply install the new package, and have
                your kernel upgraded:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/usr/local/src/kernel-source-2.4.18# dpkg --install/
/  ../kernel-image-2.4.18_tsf.1.0_i386.deb 
                </pre></td></tr></table><p>The package installation procedure will offer to make a boot floppy with your new
                kernel, as the original installation did with the original kernel. Again, it's
                suggested that you make one.</p><p>The package installation will also install a new MBR for you, if it is needed.</p><a class="indexterm" name="d0e2725"></a><p>Now reboot, and see if your new kernel works!</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="config_XWindows"></a>Configuring X Windows</h3></div></div><div></div></div><p>As mentioned previously, there are two methods for starting XFree86:</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2736"></a>startx</h4></div></div><div></div></div><a class="indexterm" name="d0e2739"></a><a class="indexterm" name="d0e2742"></a><p>You can use the <span><b class="command">startx</b></span> command to start up the X11 server
                    and client system from the console. X Windows sessions started via this method
                    will consult the <b class="filename"><tt>.xinitrc</tt></b> file in the
                    user's home directory for commands to execute when starting their session.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2753"></a>xdm</h4></div></div><div></div></div><a class="indexterm" name="d0e2756"></a><p>You can use the X Display Manager, or equivalent, to provide a GUI login
                    screen on the console. Using the XDMCP (XDM control protocol), it is also
                    possible to make this login screen available to remote systems over the network.</p><p>X Windows sessions started via this method will consult the <b class="filename"><tt>.xsession</tt></b> file in the user's home directory for
                    commands to execute when logging in.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2766"></a>Installing and running KDE:</h4></div></div><div></div></div><a class="indexterm" name="d0e2769"></a><p>KDE is a very complex arrangement of different packages. However, you can use
                    apt to easily install them all:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install kde*
                    </pre></td></tr></table><p>Once apt has installed the packages, you can use the following command to
                    start up your X session with the KDE desktop environment:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
student@debian:~$ startkde
                    </pre></td></tr></table><a class="indexterm" name="d0e2780"></a><p>Debian will also default to now starting up the KDM graphical login interface
                    at startup time.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2785"></a>Installing and running Gnome:</h4></div></div><div></div></div><a class="indexterm" name="d0e2788"></a><p>Like KDE, Gnome is also composed of several different packages, and can be
                    easily installed via apt:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install gnome*
                    </pre></td></tr></table><p>As with KDE, the GDM graphical login interface will be enabled at bootup. If
                    you already have installed KDE, you will be prompted to select with interface
                    you wish to use.</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2797"></a>networked installations:</h3></div></div><div></div></div><p>Although not covered in detail in this course, it is possible to install Debian
                directly from the network, using only a small bootable image. You can find more
                information on this installation method here: <a href="http://www.debian.org/CD/netinstsystem resources" target="_top">http://www.debian.org/CD/netinst/</a>
            </p><p>It is also possible to automate your Debian Linux installations. This might be
                useful in a Linux lab or Linux cluster installation. The current method of doing
                this is known as FAI (Fully Automatic Installation), and you can obtain more
                information about it here:<a href="http://www.informatik.uni-koeln.de/fai/" target="_top">http://www.informatik.uni-koeln.de/fai/</a>
            </p><p>You should also consult the Linux Documentation Projects notes on performing
                network installations: <a href="http://www.tldp.org/HOWTO/Network-Install-HOWTO.html" target="_top">http://www.tldp.org/HOWTO/Network-Install-HOWTO.html</a>
            </p></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.d0e561" href="#d0e561">1</a>] </sup>
                        <a href="http://debian.org" target="_top">www.debian.org</a>
                    </p></div><div class="footnote"><p><sup>[<a name="ftn.d0e1898" href="#d0e1898">2</a>] </sup>Mail Transfer Agent</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e1960" href="#d0e1960">3</a>] </sup>Basic Input/Output System</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e1964" href="#d0e1964">4</a>] </sup>Complementary Metal Oxide Semiconductor</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e1972" href="#d0e1972">5</a>] </sup>Power-On Self-Test</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e2069" href="#d0e2069">6</a>] </sup>The name "rc" is short for "run
                            commands", and originates from a script creation utility called
                            "runcom", which was present in Cray's predecessor to
                            both Multics and Unix.</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e2078" href="#d0e2078">7</a>] </sup>The ".d" in the directory name indicates that,
                            historically, this used to be a single file, but was then later split
                            into several smaller files, all of which are now present in this directory.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="file-types-file-systems"></a>Chapter&nbsp;3.&nbsp;File Types and File Systems</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Filetype_FileSystem_review">Let's review the different file types</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Regular_files">Regular files</a></span></dt><dt><span class="sect2"><a href="#directory_files">Directory files</a></span></dt><dt><span class="sect2"><a href="#device_files">Device files</a></span></dt><dt><span class="sect2"><a href="#Interprocess_communication_Devices">Interprocess communication Devices</a></span></dt><dt><span class="sect2"><a href="#inodes">Inodes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></span></dt><dt><span class="sect1"><a href="#whatis_filesystem">What is a filesystem?</a></span></dt><dt><span class="sect1"><a href="#filesystem_types">Types of filesystems</a></span></dt><dt><span class="sect1"><a href="#filesystem_Layout">The layout of a filesystem</a></span></dt><dt><span class="sect1"><a href="#File_Systems">Using Filesystems</a></span></dt><dd><dl><dt><span class="sect2"><a href="#mount_unmount">mount and unmount</a></span></dt><dt><span class="sect2"><a href="#proc">/proc</a></span></dt><dt><span class="sect2"><a href="#File_Sys_Mointoring">file system monitoring</a></span></dt><dt><span class="sect2"><a href="#adv_File_perm">Advanced file permissions</a></span></dt><dt><span class="sect2"><a href="#File_Attrib_ext2">file attributes on the ext2 file system</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Filetype_FileSystem_review"></a>Let's review the different file types</h2></div></div><div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Regular_files"></a>Regular files</h3></div></div><div></div></div><p>A simply definition of a regular file would be that it is a one dimensional
                assortment of bytes that are stored on a disk or other mass storage devices.</p><a class="indexterm" name="d0e2827"></a><div class="orderedlist"><ol type="1"><li><p>A program that uses a file needs to know the structure of the file and
                        needs to interpret the file contents. This is because no structure is
                        imposed on the contents of a file by the operating system itself. This is a
                        very powerful feature as it means that you could work with any file that you
                        need to work on e.g. a DOS file.</p></li><li><p>Files are presented to the application as a stream of bytes and then an
                        EOF condition.</p></li><li><p>However the EOF condition is not typed in, it is merely that the stream of
                        bytes is as long as the file size is and then it is at the end. In other
                        words it is actually a sort of offset that will happen when a program
                        attempts to access an offset larger than the file size itself.</p></li><li><p>There are many different types of regular files, text, binary, executable
                        etc. When using the <span><b class="command">file</b></span> command to establish a file type
                        the command accesses the magic database. If you get a chance have a look at
                        the magic file and see how many different types of files Linux could support.</p></li><li><p>A regular file is referenced by an inode number (see <a href="#inodes" title="Inodes">the section called &#8220;Inodes&#8221;</a>).</p></li></ol></div><a class="indexterm" name="d0e2851"></a><a class="indexterm" name="d0e2854"></a></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="directory_files"></a>Directory files</h3></div></div><div></div></div><p>A simple definition of a directory is that it is a file that provides a mapping
                mechanism between the names of files and the files (datablocks) themselves.</p><a class="indexterm" name="d0e2862"></a><div class="orderedlist"><ol type="1"><li><p>A directory is also called a file. Its purpose is really to make sure that
                        there is a good structure maintained on the system - sort of like a good
                        filing system.</p></li><li><p>The directory only holds inode numbers and filenames. Yet this is also
                        vitally important as this is the only place where a filename is referenced
                        by its inode.</p></li><li><p>If you delete a file from a directory the entry in the list is zeroed and
                        this is then called a shadow inode. The inode is then freed up.</p></li></ol></div><a class="indexterm" name="d0e2875"></a><a class="indexterm" name="d0e2878"></a></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="device_files"></a>Device files</h3></div></div><div></div></div><p>A device file refers to a device driver and these are important to the kernel. The
                device drivers are written in C and compiled to make an object file and then placed
                as part of the kernel. Created a device file using the mknod command.</p><a class="indexterm" name="d0e2886"></a><div class="orderedlist"><ol type="1"><li><p>The files in <b class="filename"><tt>/dev</tt></b> are used to
                        ensure that we can access hardware such as the printer, cdrom, network etc.</p></li><li><p>If you look at the way Linux uses a device driver, it handles many of the
                        functions that we could compare to the way DOS uses the BIOS. However the
                        differences are often the reason why a piece of hardware that would work
                        with a DOS related system will not work with a Unix or Linux related system.
                        Linux will either see or not see a non-standard piece of hardware.</p></li><li><p>Here we can read and write directly to the device, so the user issues a
                        system call to a device, the kernel performs a successful open on that
                        device, if busy the read/write routine cannot operate, if not busy then
                        reads or writes directly to that device.</p></li><li><p>There are different types of device files:</p><div class="itemizedlist"><ul type="disc"><li><p>Character device files - writes to and from the device a character
                                at a time. Indicated by a "c" in the first field.
                                Very little preliminary processing required by the kernel so the
                                request is passed directly to the device.</p></li><li><p>A block device only receives a request once block buffering has
                                taken place in the kernel. Indicated by a "b" in
                                the first field. A filesystem is an example of a block buffering
                                device. Block devices generally have an associated character device
                                - for example if you format a diskette you would use the character
                                device file name, if backing up to that diskette you would use the
                                block device name where the blocking is handled in the kernel buffer cache.</p></li></ul></div></li></ol></div><a class="indexterm" name="d0e2912"></a><a class="indexterm" name="d0e2915"></a><a class="indexterm" name="d0e2918"></a><a class="indexterm" name="d0e2921"></a></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Interprocess_communication_Devices"></a>Interprocess communication Devices</h3></div></div><div></div></div><p>It is possible in Linux to set up device files that allow communication between
                processes. Some of these are pipes, semaphores and shared memory devices and we have
                already seen the effectiveness of using un-named pipes.</p><a class="indexterm" name="d0e2929"></a><p>Theoretically these are special files and they are handled in a similar way to the
                device files however they are not true device files. They are created when needed
                and then removed.</p><p>The scope of these definitions moves into development and therefore we are only
                going to discuss the theory of such, it is important to have an understanding of
                these features as the system administrator.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="pipes"></a>Pipes</h4></div></div><div></div></div><p>We are thus far used pipes as un-named pipes when doing shell scripting,
                    however there are also named pipes available for us to use.</p><a class="indexterm" name="d0e2941"></a><p>In a named pipe situation the processes are being run by the same process
                    group and by the same user. e.g.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
ls  -li  |  more
                    </pre></td></tr></table><p>An un-named pipe would be created as a node using the mknod command and here
                    you could use it when running processes within different process groups. The
                    un-named pipe has to be specified to both processes separately. e.g. When the
                    output from one process becomes the input to another process running in the background.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="semaphore"></a>Semaphore</h4></div></div><div></div></div><a class="indexterm" name="d0e2953"></a><p>The shortest definition would be that it is a data structure used by several
                    processes to control and synchronize the operations on one resource.</p><p>e.g. If more than one user is accessing a record in a database it is likely
                    that a semaphore would either gain exclusive access for each process in turn, or
                    lock the record being updated.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="shared_memory"></a>Shared Memory</h4></div></div><div></div></div><a class="indexterm" name="d0e2963"></a><p>This type of file is indicated by an "m" in the first field.
                    A piece of user-memory is allocated as a work-space, where it is possible for a
                    process to read the data at the same time as another writes it.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="Major_Minor_dev_numb"></a>Major and Minor Device Numbers</h4></div></div><div></div></div><a class="indexterm" name="d0e2971"></a><p>Each device is referenced by numbers, which are read when the kernel needs to
                    use a device and subsequent device driver.</p><p>These numbers are called the major and minor device numbers.</p><p>The major device number refers to the device driver that should be used to
                    access the device and it is a unique number, whereas the minor device number
                    points to the device itself.</p><p>If you do a long listing in the <b class="filename"><tt>/dev</tt></b>
                    directory you will see that they are represented in the 6th column of the long
                    listing report.</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="inodes"></a>Inodes</h3></div></div><div></div></div><p>As a file is created a unique number is ascribed to that file and this is called
                an inode number. The inode holds specific information about the file such as:</p><a class="indexterm" name="d0e2990"></a><div class="itemizedlist"><ul type="disc"><li><p>The permission mode assigned to that file (at creation time this would
                        have been assigned with the system umask)</p></li><li><p>The number of links in place for the file</p></li><li><p>The file owners UID number</p><a class="indexterm" name="d0e3003"></a></li><li><p>The group GID number</p><a class="indexterm" name="d0e3009"></a></li><li><p>The file size represented in bytes</p></li><li><p>The address of the datablocks (or major and minor device numbers)</p><a class="indexterm" name="d0e3018"></a></li><li><p>The time the file was last modified</p></li><li><p>The time that file was last accessed (useful for housekeeping for if a
                        file has not been accessed for 3 years maybe we could remove it)</p></li><li><p>The time any part of the inode was changed</p></li></ul></div><p>When an inode resides on the disk it is called a disk inode, however when a file
                is opened, the kernel puts the inode onto a generic inode table and the inode is
                called a generic inode. Inodes are stored on the generic table with a link to a hash
                queue and this is stored in table that is reference by the kernel each time it opens
                a file to make sure that the file is not already open.</p><a class="indexterm" name="d0e3032"></a></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="root_filesysytem"></a>A detailed look at the filesystem in Debian</h2></div></div><div></div></div><a class="indexterm" name="d0e3039"></a><p>A typical Linux system has, among others, the following directories:</p><a class="indexterm" name="d0e3044"></a><a class="indexterm" name="d0e3047"></a><a class="indexterm" name="d0e3050"></a><a class="indexterm" name="d0e3053"></a><a class="indexterm" name="d0e3056"></a><a class="indexterm" name="d0e3059"></a><a class="indexterm" name="d0e3062"></a><a class="indexterm" name="d0e3065"></a><a class="indexterm" name="d0e3068"></a><a class="indexterm" name="d0e3071"></a><a class="indexterm" name="d0e3074"></a><a class="indexterm" name="d0e3077"></a><a class="indexterm" name="d0e3080"></a><a class="indexterm" name="d0e3083"></a><a class="indexterm" name="d0e3086"></a><a class="indexterm" name="d0e3089"></a><a class="indexterm" name="d0e3092"></a><a class="indexterm" name="d0e3095"></a><a class="indexterm" name="d0e3098"></a><div class="itemizedlist"><ul type="disc"><li><p>/</p><p>This is the root directory. This is where the whole tree starts.</p></li><li><p>
                    <b class="filename"><tt>/bin</tt></b>
                </p><p>This directory contains executable programs which are needed in single user
                    mode and to bring the system up or repair it.</p></li><li><p>
                    <b class="filename"><tt>/boot</tt></b>
                </p><p>Contains static files for the boot loader. This directory only holds the files
                    which are needed during the boot process.</p></li><li><p>
                    <b class="filename"><tt>/dev</tt></b>
                </p><p>Special or device files, which refer to physical devices.</p></li><li><p>
                    <b class="filename"><tt>/etc</tt></b>
                </p><p>Contains configuration files which are local to the machine. Some larger
                    software packages, like X11, can have their own subdirectories below <b class="filename"><tt>/etc</tt></b>. Site-wide configuration files may be placed
                    here or in <b class="filename"><tt>/usr/etc</tt></b>. Nevertheless,
                    programs should always look for these files in <b class="filename"><tt>/etc</tt></b> and you may have links for these files to
                        <b class="filename"><tt>/usr/etc</tt></b>.</p></li><li><p>/etc/skel</p><p>When a new user account is created, files from this directory are usually
                    copied into the user's home directory.</p></li><li><p> /etc/X11</p><p>Configuration files for the X11 window system.</p></li><li><p> /home</p><p>On machines with home directories for users, these are usually beneath this
                    directory, directly or not. The structure of this directory depends on local
                    administration decisions.</p></li><li><p>/lib</p><p>This directory should hold those shared libraries that are necessary to boot
                    the system and to run the commands in the root filesystem.</p></li><li><p>/mnt</p><p>is a mount point for temporarily mounted filesystems</p></li><li><p>/proc </p><p>This is a mount point for the proc filesystem, which provides information
                    about running processes and the kernel.</p></li><li><p>
                    <b class="filename"><tt>/sbin</tt></b>
                </p><p>Like <b class="filename"><tt>/bin</tt></b>, this directory holds
                    commands needed to boot the system, but which are usually not executed by normal users.</p></li><li><p>/tmp</p><p>This directory contains temporary files which may be deleted with no notice,
                    such as by a regular job or at system boot up.</p></li><li><p>/usr</p><p>This directory is usually mounted from a separate partition. It should hold
                    only sharable, read-only data, so that it can be mounted by various machines
                    running Linux.</p></li><li><p>/usr/X11R6</p><p>The X-Window system.</p></li><li><p>/usr/bin</p><p>This is the primary directory for executable pro grams. Most programs executed
                    by normal users which are not needed for booting or for repairing the system and
                    which are not installed locally should be placed in this directory.</p></li><li><p>/usr/bin/X11</p><p>is the traditional place to look for X11 executable's; on Linux, it usually is
                    a symbolic link to /usr/X11R6/bin.</p></li><li><p>/usr/dict</p><p> This directory holds files containing word lists for spell checkers.</p></li><li><p>/usr/doc</p><p>You may find documentation about the installed software packages in this directory.</p></li><li><p>
                    <b class="filename"><tt>/usr/etc</tt></b>
                </p><p>Site-wide configuration files to be shared between several machines may be
                    stored in this directory. However, commands should always reference those files
                    using the <b class="filename"><tt>/etc</tt></b> directory. Links from
                    files in <b class="filename"><tt>/etc</tt></b> should point to the
                    appropriate files in <b class="filename"><tt>/usr/etc</tt></b>.</p></li><li><p>
                    <b class="filename"><tt>/usr/include</tt></b>
                </p><p>Include files for the C compiler.</p></li><li><p>
                    <b class="filename"><tt>/usr/include/X11</tt></b>
                </p><p>Include files for the C compiler and the X-Windows system. This is usually a
                    symbolic link to /usr/X11R6/include/X11.</p></li><li><p>
                    <b class="filename"><tt>/usr/include/asm</tt></b>
                </p><p>Include files which declare some assembler functions. This used to be a
                    symbolic link to /usr/src/linux/include/asm.</p></li><li><p>
                    <b class="filename"><tt>/usr/include/linux</tt></b>
                </p><p> This contains information which may change from system release to system
                    release and used to be a symbolic link to /usr/src/linux/include/linux to get at
                    operating system specific information.</p><p>(Note that one should have include files there that work correctly with the
                    current libc and in user space. However, Linux kernel source is not designed to
                    be used with user programs and does not know anything about the libc you are
                    using. It is very likely that things will break if you let <b class="filename"><tt>/usr/include/asm</tt></b> and <b class="filename"><tt>/usr/include/linux</tt></b> point at a random kernel tree.
                    Debian systems don't do this and use headers from a known good kernel version,
                    provided in the libc*-dev package.)</p></li><li><p>Include files to use with the GNU C++ compiler.</p></li><li><p>
                    <b class="filename"><tt>/usr/lib</tt></b>
                </p><p>Object libraries, including dynamic libraries, plus some executable's which
                    usually are not invoked directly. More complicated programs may have whole
                    subdirectories there.</p></li><li><p>
                    <b class="filename"><tt>/usr/lib/X11</tt></b>
                </p><p>The usual place for data files associated with X programs, and configuration
                    files for the X system itself. On Linux, it usually is a symbolic link to
                        <b class="filename"><tt>/usr/X11R6/lib/X11</tt></b>
                </p></li><li><p>
                    <b class="filename"><tt>/usr/lib/gcc-lib</tt></b>
                </p><p>contains executable's and include files for the GNU C compiler.</p></li><li><p>
                    <b class="filename"><tt>/usr/lib/groff</tt></b>
                </p><p> Files for the GNU groff document formatting system.</p></li><li><p>
                    <b class="filename"><tt>/usr/local</tt></b>
                </p><p>This is where programs which are local to the site typically go.</p></li><li><p>
                    <b class="filename"><tt>/usr/local/bin</tt></b>
                </p><p>Binaries for programs local to the site go there.</p></li><li><p>
                    <b class="filename"><tt>/usr/local/doc</tt></b>
                </p><p> Local documentation</p></li><li><p>
                    <b class="filename"><tt>/usr/local/etc</tt></b>
                </p><p>Configuration files associated with locally installed programs go there.</p></li><li><p>
                    <b class="filename"><tt>/usr/local/lib</tt></b>
                </p><p>Files associated with locally installed programs go there.</p></li><li><p>
                    <b class="filename"><tt>/usr/local/info</tt></b>
                </p><p>Info pages associated with locally installed pro grams go there.</p></li><li><p>
                    <b class="filename"><tt>/usr/local/man</tt></b>
                </p><p>Manpages associated with locally installed programs go there.</p></li><li><p>
                    <b class="filename"><tt>/usr/local/sbin</tt></b>
                </p><p>Locally installed programs for system administration.</p></li><li><p>
                    <b class="filename"><tt>/usr/local/src</tt></b>
                </p><p>Source code for locally installed software.</p></li><li><p>
                    <b class="filename"><tt>/usr/man</tt></b>
                </p><p>Manpages traditionally go in there, into their sub directories.</p></li><li><p>
                    <b class="filename"><tt>/usr/sbin</tt></b>
                </p><p>This directory contains program binaries for system administration which are
                    not essential for the boot process, for mounting /usr, or for system repair.</p></li><li><p>
                    <b class="filename"><tt>/usr/share</tt></b>
                </p><p>This directory contains subdirectories with specific application data, that
                    can be shared among different architectures of the same OS. Often one finds
                    stuff here that used to live in /usr/doc or <b class="filename"><tt>/usr/lib</tt></b> or /usr/man.</p></li><li><p>
                    <b class="filename"><tt>/usr/share/man</tt></b>
                </p><p>Manpages go in there, into their subdirectories.</p></li><li><p>
                    <b class="filename"><tt>/usr/src</tt></b>
                </p><p>Source files for different parts of the system, included with some packages
                    for reference purposes. Don't work here with your own projects, as files below
                    /usr should be read-only except when installing software</p></li><li><p>
                    <b class="filename"><tt>/usr/src/linux</tt></b>
                </p><p>This has always been the traditional place where kernel sources were unpacked.
                    This was important on systems that <b class="filename"><tt>/usr/include/linux</tt></b> was a symlink here. You should
                    probably use another directory for building the kernel now.</p></li><li><p>
                    <b class="filename"><tt>/usr/tmp</tt></b>
                </p><p>Obsolete. This should be a link to /var/tmp. This link is present only for
                    compatibility reasons and shouldn't be used.</p></li><li><p>
                    <b class="filename"><tt>/var</tt></b>
                </p><p>This directory contains files which may change in size, such as spool and log files.</p></li><li><p>
                    <b class="filename"><tt>/var/adm</tt></b>
                </p><p>This directory is superseded by <b class="filename"><tt>/var/log</tt></b> and should be a symbolic link to <b class="filename"><tt>/var/log</tt></b>.</p></li><li><p>
                    <b class="filename"><tt>/var/backups</tt></b>
                </p><p>This directory is used to save backup copies of important system files.</p></li><li><p>
                    <b class="filename"><tt>/var/lock</tt></b>
                </p><p>Lock files are placed in this directory. The naming convention for device lock
                    files is LCK..&lt;device&gt; where &lt;device&gt; is the
                    device's name in the filesystem. The format used is that of HDU UUCP lock files,
                    i.e. lock files contain a PID as a 10-byte ASCII decimal number, followed by a
                    newline character.</p></li><li><p>
                    <b class="filename"><tt>/var/log</tt></b>
                </p><p>Miscellaneous log files.</p></li><li><p>
                    <b class="filename"><tt>/var/preserve</tt></b>
                </p><p>This is where vi saves edit sessions so they can be restored later.</p></li><li><p>
                    <b class="filename"><tt>/var/run</tt></b>
                </p><p>Run-time variable files, like files holding process identifiers (PIDs) and
                    logged user information (utmp). Files in this directory are usually cleared when
                    the system boots.</p></li><li><p>
                    <b class="filename"><tt>/var/spool</tt></b>
                </p><p>Spooled (or queued) files for various programs.</p></li><li><p>
                    <b class="filename"><tt>/var/spool/at</tt></b>
                </p><p>Spooled jobs for at(1).</p></li><li><p>
                    <b class="filename"><tt>/var/spool/cron</tt></b>
                </p><p>Spooled jobs for cron</p></li><li><p>
                    <b class="filename"><tt>/var/spool/lpd</tt></b>
                </p><p>Spooled files for printing.</p></li><li><p>
                    <b class="filename"><tt>/var/spool/mail</tt></b>
                </p><p>Users' mailboxes.</p></li><li><p>
                    <b class="filename"><tt>/var/tmp</tt></b>
                </p><p>Like /tmp, this directory holds temporary files stored for an unspecified duration.</p></li></ul></div><a class="indexterm" name="d0e3566"></a><a class="indexterm" name="d0e3569"></a><a class="indexterm" name="d0e3572"></a><a class="indexterm" name="d0e3575"></a><a class="indexterm" name="d0e3578"></a><a class="indexterm" name="d0e3581"></a><a class="indexterm" name="d0e3584"></a><a class="indexterm" name="d0e3587"></a><a class="indexterm" name="d0e3590"></a><a class="indexterm" name="d0e3593"></a><a class="indexterm" name="d0e3596"></a><a class="indexterm" name="d0e3599"></a><a class="indexterm" name="d0e3602"></a><a class="indexterm" name="d0e3605"></a><a class="indexterm" name="d0e3608"></a><a class="indexterm" name="d0e3611"></a><a class="indexterm" name="d0e3614"></a><a class="indexterm" name="d0e3617"></a><a class="indexterm" name="d0e3620"></a><a class="indexterm" name="d0e3623"></a><a class="indexterm" name="d0e3626"></a><a class="indexterm" name="d0e3629"></a><a class="indexterm" name="d0e3632"></a><a class="indexterm" name="d0e3635"></a><a class="indexterm" name="d0e3638"></a><a class="indexterm" name="d0e3641"></a><a class="indexterm" name="d0e3644"></a><a class="indexterm" name="d0e3647"></a><a class="indexterm" name="d0e3650"></a><a class="indexterm" name="d0e3653"></a><a class="indexterm" name="d0e3656"></a><a class="indexterm" name="d0e3659"></a><a class="indexterm" name="d0e3662"></a><a class="indexterm" name="d0e3665"></a><a class="indexterm" name="d0e3668"></a><a class="indexterm" name="d0e3671"></a><a class="indexterm" name="d0e3674"></a><a class="indexterm" name="d0e3677"></a><a class="indexterm" name="d0e3680"></a><p>You can find a more comprehensive description in the hier(7) man page. This layout
            conforms with the Linux filesystem standard, Release 1.2, and reflects the layout for
            Debian, RedHat and SuSE Linux.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="whatis_filesystem"></a>What is a filesystem?</h2></div></div><div></div></div><p>A filesystem is a logical division within a physical partition.</p><p>As discussed during our installation chapter, we know that we have installed MS
            Windows and Linux on the same hard drive, however they are loaded in two separate disk
            partitions (physical divisions).</p><p>There can only be one of the physical partitions active at any one time, this will be
            the partition that you boot up with by default when the machine is switched on.</p><p>Within the Linux division we can have further divisions or filesystems based on the
            following decision criteria:</p><div class="orderedlist"><ol type="1"><li><p>Size of hard drive</p></li><li><p>Security issues</p></li><li><p>Swap</p></li><li><p>User requirements</p></li></ol></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="filesystem_types"></a>Types of filesystems</h2></div></div><div></div></div><p>The Linux kernel supports a myriad of filesystem types, the most popular of which are:
            ext2, ext3, Reiserfs and XFS.</p><p>Currently, ext2 is the only one supported by Debian out of the box.</p><a class="indexterm" name="d0e3716"></a><p>The ext3 filesystem is the next generation of the Extended Filesystem, and allows for
            larger filesystems and files, as well as improving performance.</p><p>The Reiserfs and XFS filesystems allow for improved performance when using large
            filesystems, and are suited to specific applications where data concurrency is
            important, such as filesystems which contain high volume databases.</p><a class="indexterm" name="d0e3723"></a><a class="indexterm" name="d0e3726"></a></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="filesystem_Layout"></a>The layout of a filesystem</h2></div></div><div></div></div><div class="orderedlist"><ol type="1"><li><p>Boot block</p></li><li><p>Superblock - contains some general information about the filesystem such as:</p><p>Filesystem size.</p><p>The condition of the filesystem e.g. Would be marked as an error if the
                    machine not shut down correctly and this would start the process of
                    "fsck" on bootup. </p><p>A list of some of the free inodes and blocks available</p></li><li><p>Inode Table- which contains the number of inodes allocated to that filesystem.
                    This is elastic in Linux and will expand if you require more inodes than those
                    allocated. When you create a new file the kernel will allocate an inode for that
                    file from the free list held in the superblock.</p></li><li><p>Data Blocks - containing the file data, a block is fixed in size. The kernel
                    can only access the data blocks via the information held in the inode of that file.</p></li></ol></div><a class="indexterm" name="d0e3751"></a><a class="indexterm" name="d0e3754"></a></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="File_Systems"></a>Using Filesystems</h2></div></div><div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mount_unmount"></a>mount and unmount</h3></div></div><div></div></div><a class="indexterm" name="d0e3764"></a><a class="indexterm" name="d0e3767"></a><p>The <span><b class="command">mount</b></span> command, and it's cousin <span><b class="command">umount</b></span>
                can be used to mount and unmount filesystems on your Linux system.</p><p>An extract from the mount(1) man page:</p><div class="blockquote"><table border="0" width="100%" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote"><tr><td width="10%" valign="top">&nbsp;</td><td width="80%" valign="top"><p> All files accessible in a Unix system are arranged in one big tree, the file
                    hierarchy, rooted at /. These files can be spread out over several devices. The
                    mount command serves to attach the file system found on some device to the big
                    file tree. Conversely, the umount(8) command will detach it again.</p></td><td width="10%" valign="top">&nbsp;</td></tr><tr><td colspan="2" align="right" valign="top">--<span class="attribution">man mount(1)</span></td><td width="10%" valign="top">&nbsp;</td></tr></table></div><p>Issuing the <span><b class="command">mount</b></span> command without any parameters will display
                the current mounted filesystems, and their status, on your system:</p><p>So when you created the filesystems at installation time a relevant device was
                created in the <b class="filename"><tt>/dev</tt></b> directory. The devices
                that were created each have an address that points to a series of datablocks on your
                hard disk.</p><p>As an example let us say that when you were installing the operating system you
                specified a third filesystem called "database" that you wanted to
                create as well as the root filesystem and the swap filesystem. A device called
                database (<b class="filename"><tt>/dev/database</tt></b>) would be created at
                that time and a mount point would be created as well called say <b class="filename"><tt>/database</tt></b>.</p><p>Now when you do a listing under root you will see an empty directory called
                "database". When you attach or mount the filesystem to the empty
                directory now called a mount-point, then you are able to access the series of
                datablocks reserved on the hard disk for that filesystem as defined by <b class="filename"><tt>/dev/database</tt></b> at installation time.</p><p>Once mounted the filesystem is now accessible through the mount-point called
                    <b class="filename"><tt>/database</tt></b>.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# mount
/dev/hda2 on / type ext2 (rw,errors=remount-ro)
proc on /proc type proc (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
                </pre></td></tr></table><p>Here you can see that there are currently three file systems mounted.</p><p>One is your root ("/") file system, which is mounted off
                "hda2", which you should remember is the second partition on your
                primary master IDE drive. You can also see that the filesystem is mounted as
                "read-write", and is of type "ext2" (short for
                Linux second extended file system)</p><a class="indexterm" name="d0e3819"></a><p>There are then two special filesystems, <b class="filename"><tt>proc</tt></b>, and "devpts". The
                "devpts" filesystem is a simple, virtual filesystem which allows
                for easy control over the terminal devices and their ownership. We will explain the
                    <b class="filename"><tt>proc</tt></b> filesystem within the next section.</p><a class="indexterm" name="d0e3830"></a><a class="indexterm" name="d0e3833"></a><p>You can mount additional filesystems, as long as they been defined in your
                    <b class="filename"><tt>/etc/fstab</tt></b> file, by using the mount command:</p><p>In the following example we are going to mount <b class="filename"><tt>/dev/cdrom</tt></b> on a mount-point called <b class="filename"><tt>/cdrom:</tt></b>
            </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# mount
/dev/hdb2 on / type ext2 (rw,errors=remount-ro)
proc on /proc type proc (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
debian:~# mount /cdrom
debian:~# mount
/dev/hdb2 on / type ext2 (rw,errors=remount-ro)
proc on /proc type proc (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
/dev/cdrom on /cdrom type iso9660 (ro,noexec,nosuid,nodev)
debian:~# 
                </pre></td></tr></table><p>In the example above, we've successfully mounted a CD-ROM onto the /cdrom mount
                point. You can now change directory into the /cdrom directory and you will have
                access to the information held on the CDROM itself. Read write access will depend on
                the capabilities of the CDROM and the permissions of your username.</p><p>To unmount it again once we've finished, we can use the <span><b class="command">unmount</b></span> command:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# umount /cdrom
debian:~# mount
/dev/hdb2 on / type ext2 (rw,errors=remount-ro)
proc on /proc type proc (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
debian:~# 
                </pre></td></tr></table><p>If you wish to mount a filesystem which isn't configured in your <b class="filename"><tt>/etc/fstab</tt></b> file, then you can use the following syntax:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
mount -t &lt;type&gt; -o &lt;options&gt; &lt;device&gt; &lt;mount point&gt;
                </pre></td></tr></table><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# mount -t ext2 -o rw /dev/hdb3 /mnt
debian:~# mount
/dev/hdb2 on / type ext2 (rw,errors=remount-ro)
/dev/hdb3 on /mnt type ext2 (rw)
proc on /proc type proc (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
debian:~# umount /mnt
                </pre></td></tr></table><p>As you can see, it takes fields very similar to what you find in <b class="filename"><tt>/etc/fstab</tt></b>. As a point of interest, the currently
                mounted filesystem information is kept in a file called <b class="filename"><tt>/etc/mtab</tt></b>.</p><a class="indexterm" name="d0e3877"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /etc/mtab 
/dev/hdb2 / ext2 rw,errors=remount-ro 0 0
proc /proc proc rw 0 0
devpts /dev/pts devpts rw,gid=5,mode=620 0 0
                </pre></td></tr></table><p>Make sure that whether you mount a diskette, cdrom or hard drive filesystem that
                you un-mount it prior to removing it from the system or prior to shutting down the system.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="proc"></a>/proc</h3></div></div><div></div></div><p>The /proc filesystem is a special interface to the Linux kernel. It allows you to
                access various Linux kernel structures as if they were normal files.</p><a class="indexterm" name="d0e3890"></a><p>Let's take a look:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cd /proc 
debian:/proc# ls -F
./     1886/  2035/  2110/  6/           ksyms
../    1887/  2068/  2146/  7/           loadavg
1/     1888/  2069/  2309/  8/           locks
1080/  1908/  2070/  2325/  899/         lvm/
11/    1940/  2071/  2388/  902/         mdstat
1116/  1941/  2072/  2425/  961/         meminfo
1254/  1959/  2073/  2426/  acpi/        misc
1283/  1962/  2074/  2427/  asound/      mm
1292/  1965/  2075/  2428/  buddyinfo    modules
1300/  1968/  2076/  2439/  bus/         mounts@
1322/  1984/  2077/  3/     cmdline      mtrr
1323/  1986/  2079/  3291/  config.gz    net/
1435/  1987/  2082/  3342/  cpufreq      partitions
1663/  1989/  2083/  3348/  cpuinfo      pci
1668/  1990/  2084/  3349/  crypto/      pisch
1719/  1992/  2087/  3350/  devices      pisch_version
1752/  1994/  2095/  3351/  dma          scsi/
1759/  1997/  2096/  3352/  driver/      self@
1804/  2/     2098/  3517/  execdomains  slabinfo
1806/  2007/  2100/  3562/  fb           splash
1814/  2009/  2101/  3662/  filesystems  stat
1815/  2013/  2102/  3663/  fs/          swaps
1816/  2015/  2103/  3751/  ide/         sys/
1817/  2017/  2104/  3753/  interrupts   sysrq-trigger
1818/  2018/  2105/  3754/  iomem        sysvipc/
1822/  2019/  2106/  3763/  ioports      tty/
1883/  2021/  2107/  386/   irq/         uptime
1884/  2028/  2108/  4/     kcore        version
1885/  2030/  2109/  5/     kmsg         video/

                </pre></td></tr></table><p>The numbers refer to process IDs, and within those directories you can find out
                information about that currently running process. The <b class="filename"><tt>self</tt></b> directory is a symlink to the process that checks
                it's current PID.</p><p>Some useful files in proc are:</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3904"></a>/proc/cpuinfo</h4></div></div><div></div></div><a class="indexterm" name="d0e3907"></a><p>This file displays information about the system's CPU(s):</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/proc# cat cpuinfo 
processor          : 0
vendor_id          : AuthenticAMD
cpu family         : 6
model               : 3
model name    : AMD Duron(tm) Processor 
stepping          : 1
cpu MHz         : 656.476
cache size      : 64 KB
fdiv_bug        : no
hlt_bug         : no
sep_bug         : no
f00f_bug        : no
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 1
wp              : yes
flags           : fpu vme de pse tsc msr 
    : mca cmov pat pse36 psn mmxext \
                        mmx fxsr 3dnowext 3dnow
bogomips   : 1307.44

debian:/proc#
                    </pre></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3914"></a>/proc/uptime</h4></div></div><div></div></div><a class="indexterm" name="d0e3917"></a><p>This displays the amount of time that the system has been up, given in seconds.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/proc# cat uptime 
43736.51 43685.48
                    </pre></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3924"></a>/proc/loadavg</h4></div></div><div></div></div><a class="indexterm" name="d0e3927"></a><p>This displays the system's load average, the same as the
                    <span><b class="command">top</b></span> and "uptime" commands that were covered earlier.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/proc# cat loadavg 
0.00 0.00 0.00 1/22 3448
debian:/proc# _
                    </pre></td></tr></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="File_Sys_Mointoring"></a>file system monitoring</h3></div></div><div></div></div><p>One of the things that almost all operating systems do not handle very well is
                running out of disk space. Some applications will fail relatively gracefully, but
                probably won't be able to save their most recent changes. Other applications,
                usually the more complicated ones, will only be able to partially save, thus
                resulting in corrupted file data, which means you're going to have to end up
                restoring from backups!</p><p>You will find the following commands useful for keeping an eye on your filesystems:</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3946"></a> df</h4></div></div><div></div></div><a class="indexterm" name="d0e3949"></a><a class="indexterm" name="d0e3952"></a><p>The df (disk free) command shows your the amount of free disk space on the
                    currently mounted filesystems:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# df
Filesystem           1k-blocks      Used Available Use% Mounted on
/dev/hdb2              9550788     79056   8986572   1% /
                    </pre></td></tr></table><p>You can use the "-h" parameter to tell <span><b class="command">df</b></span>
                    to display the values in "human readable" form:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/hdb2             9.8G   81M  9.2G   1% /
                    </pre></td></tr></table><p>Specifying the "-i" switch will cause <span><b class="command">df</b></span>
                    to display the free inode count, instead of the default free block count:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# df -i
Filesystem            Inodes   IUsed   IFree IUse% Mounted on
/dev/hdb2            1214400   12043 1202357    1% /
                    </pre></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3973"></a>du</h4></div></div><div></div></div><p>The du (disk used) command can be used to determine how much space has been
                    used by directories. This is useful when you're doing some cleaning up and
                    looking for areas that are consuming a lot of space:</p><a class="indexterm" name="d0e3978"></a><a class="indexterm" name="d0e3981"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# du -sh /usr
53M     /usr
                    </pre></td></tr></table><p>The "-s" switch gives us a summary, rather than a listing of
                    each sub directory, and the "-h" switch again gives us the
                    values in "human readable" form, rather than in block sizes.</p><p>You can use a combination of these commands to track down disk usage on your filesystems.</p><p>A good system administrator should keep an eye on the output of
                    <span><b class="command">df</b></span> and note when filesystems are reaching their limit, so
                    that a new disk can be arranged before the system runs out of space!</p><p>It's often useful to look for the largest files and directories on a certain
                    drive, as you may be wishing to free up some space quickly. You can use the
                    "du" command together with a few others to achieve this:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# du -k /usr | sort -n | tail -10
37660   /usr/X11R6
39864   /usr/bin
52704   /usr/share/doc
76588   /usr/local/src/kernel-source-2.4.18/drivers
122336  /usr/lib
154308  /usr/local/src/kernel-source-2.4.18
155456  /usr/local/src
155496  /usr/local
192672  /usr/share
583824  /usr
                    </pre></td></tr></table><p>The "-k" switch tells "du" to display the
                    size of everything in kilobytes; it's important for the unit of measurement to
                    be the same so that the "sort" command can order things properly.</p><p>The "-n" switch tells "sort" to treat the
                    numbers as values, rather than words.</p><p>The "tail -10" command specifies that only the last 10 lines
                    of output should be displayed.</p><p>This little one liner can now easily give you the top 10 largest files and
                    directories in a specified path!</p><a class="indexterm" name="d0e4007"></a></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="adv_File_perm"></a>Advanced file permissions</h3></div></div><div></div></div><p>We've dealt previously with "chmod", and with the
                "r", "w" and "x" permission
                bits. However, there are a few more, which we will deal with now.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4017"></a>suid and sgid bits</h4></div></div><div></div></div><a class="indexterm" name="d0e4020"></a><a class="indexterm" name="d0e4023"></a><p>The "set user id" (suid) and "set group
                    id" (sgid) on execution bits are denoted by an "s" in
                    the column that would normally have an "x" (execute) character.</p><p>For example, the "passwd" command has its suid bit set:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls -l /usr/bin/passwd
-rwsr-xr-x    1 root     root        24680 Apr  7  2002 /usr/bin/passwd
                    </pre></td></tr></table><p>These bits have the effect of causing the command to be run as the user (suid)
                    and/or as the group (sgid) that owns the file. In the case of
                    "passwd", it means that even if you execute the
                    "passwd" command as a normal user, the kernel will elevate the
                    command's privileges to that of the root user.</p><p>In this specific case, it is so that the passwd command can access the
                    /etc/shadow password file, so that it can check and change passwords.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admon/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>Problems with suid and sgid binaries can very often lead to a system
                        compromise, so it is very important to make sure that you know which files
                        on your system have these bits set, and to make sure that you keep that
                        particular package up to date with security fixes, or perhaps even uninstall
                        it if the package isn't necessary.</p></td></tr></table></div><p>You can use the "find" command to locate all the suid and
                    sgid binaries on your system:</p><a class="indexterm" name="d0e4041"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# find / -xdev -perm +4000 -ls
17591   24 -rwsr-xr-x   1 root     root        21112 Sep
 23  2003 /bin/su
 12789   32 -rwsr-xr-x   1 root     root        31188 Sep 
 23  2003 /bin/ping
  9736   36 -rwsr-xr-x   1 root     audio       36142 Sep 
  23  2003 /bin/eject
 40687   76 -rwsr-xr-x   1 root     root        77488 Sep
 23  2003 /bin/mount
 12790   28 -rwsr-xr-x   1 root     root        26996 Sep
 23  2003 /bin/ping6
 40688   40 -rwsr-xr-x   1 root     root        40788 Sep
 23  2003 /bin/umount
 64765   60 -rwsr-xr-x   1 root     root        61396 Sep
 24  2003 /opt/kde3/bin/fileshareset
 52172    8 -rwsr-xr-x   1 root     root         6206 Sep
 24  2003 /opt/kde3/bin/artswrapper
 64769   16 -rwsr-xr-x   1 root     shadow      14134 Sep
 24  2003 /opt/kde3/bin/kcheckpass
 54971    8 -rwsr-xr-x   1 root     root         7946 Sep
 24  2003 /opt/kde3/bin/kpac_dhcp_helper
198953   44 -rwsr-xr-x   1 root     video       43996 Sep 
 24  2003 /opt/gnome/sbin/zapping_setup_fb
 64521   36 -rwsr-xr-x   1 root     root        35196 Sep
 23  2003 /usr/bin/at
 43724    8 -rwsr-xr-x   2 root     root         4572 Sep 
 24  2003 /usr/bin/man
 49943   16 -rwsr-xr-x   1 root     root        15488 Sep 
 23  2003 /usr/bin/rcp
 49946   12 -rwsr-xr-x   1 root     root         8228 Sep 
 23  2003 /usr/bin/rsh
 69488  228 -rwsr-xr-x   1 root     root       229480 Sep 
 23  2003 /usr/bin/ssh
144705   32 -rwsr-xr-x   1 root     trusted     30623 Sep 
23  2003 /usr/bin/bing
 58745   76 -rwsr-xr-x   3 root     shadow      77204 Sep 
 24  2003 /usr/bin/chfn
 58745   76 -rwsr-xr-x   3 root     shadow      77204 Sep 
 24  2003 /usr/bin/chsh
 17782   92 -rwsr-xr-x   1 root     root        90508 Sep 
 23  2003 /usr/bin/sudo
 49653   16 -rwsr-xr-x   1 lp       sys         15206 Sep 
 23  2003 /usr/bin/lppasswd
202972   16 -rwsr-xr-x   1 root     trusted     14880 Sep 
23  2003 /usr/bin/vboxbeep
 71038   24 -rwsr-xr-x   1 root     root        22812 Sep 
 23  2003 /usr/bin/crontab
 58662   60 -rwsr-xr-x   1 root     shadow      60944 Sep 
 24  2003 /usr/bin/chage
 43724    8 -rwsr-xr-x   2 root     root         4572 Sep 
 24  2003 /usr/bin/mandb
                    </pre></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4046"></a>sticky bit</h4></div></div><div></div></div><a class="indexterm" name="d0e4049"></a><p>The sticky bit is denoted by a "t" in instead of the group
                    execute permission ("x"). An example is the /tmp directory:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls -ld /tmp
drwxrwxrwt    2 root     root         4096 Mar 15 04:35 /tmp
                    </pre></td></tr></table><p>The sticky bit only has an affect on directories, not regular files. It turns
                    a directory into an append-only directory. This means that files in this
                    directory can only be removed or renamed by the owner of the file. Thus, it is
                    very useful for directories, which are publically writable, but where you want
                    to protect the user's files from other users.</p><p>Again, you can use the "find" command to show you all the
                    sticky-bit directories on your system:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# find / -xdev -perm +1000 -ls
  97153    4 drwxrwxrwt   2 root     root         4096 Mar 12 04:35 /tmp
1117249    4 drwxrwxrwt   2 root     root         4096 Feb  8  2002 /var/lock
1182017    4 drwxrwxrwt   3 root     root         4096 Mar 11 14:22 /var/tmp
                    </pre></td></tr></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="File_Attrib_ext2"></a>file attributes on the ext2 file system</h3></div></div><div></div></div><p>In addition to the standard Unix file permission scheme, the ext2 file system has
                the ability to set the following attributes on both files and directories:</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4069"></a>no access time (A)</h4></div></div><div></div></div><p>When a file or directory with this attribute is accessed for reading or
                    writing, its last access time (atime) will not be updated. This may be useful on
                    files which are accessed very often, but which you're not interested in
                    recording the atime for. An example might be the system man pages.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4074"></a>append only (a)</h4></div></div><div></div></div><p>Files with this attribute set can only be appended to. For directories, this
                    means that you can only add files to it; you cannot delete or rename files.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4079"></a>no dump (d)</h4></div></div><div></div></div><p>This prevents the dump(8) backup utility from backing up a file or directory
                    marked with this attributed.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4084"></a>immutable (i)</h4></div></div><div></div></div><p>This prevents the file from being modified in any way. Only the root user can
                    set or clear this attribute.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4089"></a>secure deletion (s)</h4></div></div><div></div></div><p>When a file or directory with this attribute is deleted, the space they
                    occupied on the disk is overwritten with zeros before the filesystem entries are removed.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4094"></a>synchronous mode (S)</h4></div></div><div></div></div><p>Modifications to files or directories with this bit set are written to disk
                    immediately, without doing any buffering.</p><p>You can use the following commands to examine and set ext2 attributes:</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4101"></a>lsattr</h4></div></div><div></div></div><a class="indexterm" name="d0e4104"></a><p>The "lsattr" command displays the attributes.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4109"></a>chattr</h4></div></div><div></div></div><p>The "chattr" command can set and remove attributes on files.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls -l test.txt 
-rw-r--r--    1 root     root            9 Mar 15 03:17 test.txt
debian:~# lsattr test.txt 
-------------- test.txt
debian:~# chattr +i test.txt 
debian:~# lsattr test.txt 
---i---------- test.txt
debian:~# rm test.txt 
rm: remove write-protected file 'test.txt&amp;apos;? y
rm: cannot unlink 'test.txt&amp;apos;: Operation not permitted
debian:~# chattr -i test.txt 
debian:~# rm test.txt 
                    </pre></td></tr></table><p>As you can see, even the root user cannot delete an
                    "immutable" file until the attribute has been removed.</p></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="backups"></a>Chapter&nbsp;4.&nbsp;Backups</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#backup_introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#BackupMedia">Backup media</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4141">Magnetic Tape</a></span></dt><dt><span class="sect2"><a href="#d0e4153">CD-ROM</a></span></dt><dt><span class="sect2"><a href="#d0e4160">Hard Disk</a></span></dt><dt><span class="sect2"><a href="#d0e4165">Which form of Media to use?</a></span></dt><dt><span class="sect2"><a href="#d0e4180">Securing your backup</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Backup_concepts">Backup concepts</a></span></dt><dt><span class="sect1"><a href="#backup_software">Backup software</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4257">mt</a></span></dt><dt><span class="sect2"><a href="#d0e4381">tar</a></span></dt><dt><span class="sect2"><a href="#d0e4424">cpio</a></span></dt><dt><span class="sect2"><a href="#d0e4475">dump and restore</a></span></dt><dt><span class="sect2"><a href="#d0e4511">dd</a></span></dt></dl></dd><dt><span class="sect1"><a href="#OpenSource_Backup_Software">Open source backup solutions</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4533">AMANDA -- http://www.amanda.org/</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e4546">Roll your own</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e4558">Performing a backup</a></span></dt><dt><span class="sect2"><a href="#d0e4616">Verifying Backups</a></span></dt><dt><span class="sect2"><a href="#cmds_Restore_backup">Restore from backup</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="backup_introduction"></a>Introduction</h2></div></div><div></div></div><p>If you've worked with computers for any length of time, you should already be aware of
            the importance of keeping good, up-to-date backups. The definition of a good backup is
            one that you are able to restore from!</p><p>Backups guard against hardware failures (such as the hard disk drive in your server
            breaking), accidental file deletion and even physical theft (such as someone pinching
            your laptop).</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="BackupMedia"></a>Backup media</h2></div></div><div></div></div><a class="indexterm" name="d0e4136"></a><p>Linux supports a wide variety of backup media.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4141"></a>Magnetic Tape</h3></div></div><div></div></div><p>The canonical backup media is magnetic tape. There are a wide variety of tape
                drives available, and Linux supports the majority of them.</p><a class="indexterm" name="d0e4146"></a><p>Magnetic tape usually has a high storage capacity, but is slow to access relative
                to the speed of hard drives, and the data stored on it can only be accessed
                sequentially. This means that if you have something backed up onto tape, you can
                only restore it by going through the whole tape, from the beginning, until you reach
                the end of what you want to restore.</p><p>This means that tapes are generally only good for archival purposes, or for
                restoring entire system, rather than restoring individual files.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4153"></a>CD-ROM</h3></div></div><div></div></div><p>Another popular backup media are write-able CD-ROMs. This allows you to backup a
                small amount of data, but you have random read access to it, which means that it's
                quicker and easier to restore from.</p><p>With the advent of write-able DVDs, this allows you to store even larger amounts
                of data on a single disc.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4160"></a>Hard Disk</h3></div></div><div></div></div><p>As the price of hard drives has dropped dramatically, it is becoming popular to
                simply keep your backups on a large, but perhaps slow and relatively cheap, hard
                drive, usually in a separate machine. Again, this is handy because you will have
                random read access to your data, and won't have to fiddle with inserting and
                removing magnetic tapes or CDs.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4165"></a>Which form of Media to use?</h3></div></div><div></div></div><p>Which option you decide to go with will depend on a number of factors:</p><div class="orderedlist"><ol type="1"><li><p>the amount of data you want</p></li><li><p>the desired time to perform a restore</p></li><li><p>your budget </p></li></ol></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4180"></a>Securing your backup</h3></div></div><div></div></div><p>No matter which media you decide to go with, it is important to remember that the
                media holding your backed up data should be stored as far away as possible from the
                system that you wish to keep backed up!</p><p>Imagine that you'd been regularly backing up your server, only to lose
                all your data as well as the backups because you had the magnetic tapes sitting on
                top of the server chassis when lightning struck your computer room!</p><p>For this reason, companies with critical data often make two backups. One is kept
                on site, for quick and easy restores, while another copy is taken off-site, to guard
                against site-wide disasters.</p><p>Backup media that is kept on-site should be kept in a fireproof safe, to guard
                against fire and water damage.</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Backup_concepts"></a>Backup concepts</h2></div></div><div></div></div><p>Depending on your choice of backup software, you will have several types of backup
            paradigms at your disposal:</p><div class="orderedlist"><ol type="1"><li><p>full - as the name implies, this is a backup of everything</p></li><li><p>differential - this is a backup of everything since the last full backup</p></li><li><p>incremental - this is a backup of everything since the last _incremental_ backup</p></li></ol></div><a class="indexterm" name="d0e4207"></a><a class="indexterm" name="d0e4210"></a><a class="indexterm" name="d0e4213"></a><p>As an example:</p><p>You would do a full backup every Sunday morning. Then, from Monday to Friday you would
            do an incremental backup.</p><p>This would mean that if you wanted to do a restore of Thursday's data, you would have
            to have to restore from the following backups:</p><div class="itemizedlist"><ul type="disc"><li><p>the full backup from Sunday</p></li><li><p>all four incremental backups (Mon, Tue, Wed, Thurs)</p></li></ul></div><p>That could easily be 5 tapes, which you have to shuffle in order to restore something,
            which you may find to be too time consuming for your needs.</p><p>Your other alternative is then:</p><p>Do the full backup on Sunday morning, and then do a differential backup each day after that.</p><p>Then to do a restore of Thursday's data you would only require:</p><div class="itemizedlist"><ul type="disc"><li><p>the full backup from Sunday</p></li><li><p>and the one differential from Thursday.</p></li></ul></div><p>Obviously, keeping differential backups requires more storage space on your backup
            media, so you'll need to decide which method works best for your situation.</p><p>Some backup utilities allow for an even finer grained set of levels (0-9), where each
            level only does a backup of the data that's changed since the last backup of the next
            lowest level.</p><p>In other words; level 0 is a full backup, while continually doing a level 1 backup
            after that would be the equivalent of a differential backup.</p><p>Doing a backup at level 0, 1, 2, 3, 4 and 5 would be the same as doing an initial full
            backup, and then following that by incremental backups through the week.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="backup_software"></a>Backup software</h2></div></div><div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4257"></a>mt</h3></div></div><div></div></div><p>The <span><b class="command">mt</b></span> command can be used to control the magnetic tape device
                attached to your Debian machine.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
mt &lt;command&gt;
                </pre></td></tr></table><a class="indexterm" name="d0e4267"></a><p>A list of valid commands are:</p><div class="table"><a name="d0e4272"></a><p class="title"><b>Table&nbsp;4.1.&nbsp;mt commands</b></p><a class="indexterm" name="d0e4275"></a><a class="indexterm" name="d0e4278"></a><a class="indexterm" name="d0e4281"></a><a class="indexterm" name="d0e4284"></a><a class="indexterm" name="d0e4287"></a><a class="indexterm" name="d0e4290"></a><a class="indexterm" name="d0e4293"></a><a class="indexterm" name="d0e4296"></a><a class="indexterm" name="d0e4299"></a><a class="indexterm" name="d0e4302"></a><a class="indexterm" name="d0e4305"></a><table summary="mt commands" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">eof, weof</td><td align="left">Write count EOF marks at current position.</td></tr><tr><td align="left">fsf </td><td align="left">Forward space count files. The tape is positioned on the first
                                block of the next file.</td></tr><tr><td align="left">bsf</td><td align="left">Backward space count files. The tape is positioned on the first
                                block of the next file.</td></tr><tr><td align="left">fsr</td><td align="left">Forward space count records.</td></tr><tr><td align="left">bsr</td><td align="left">Backward space count records.</td></tr><tr><td align="left">bsfm</td><td align="left">Backward space count file marks. The tape is positioned on the
                                beginning-of-the-tape side of the file mark</td></tr><tr><td align="left">fsfm</td><td align="left">Forward space count file marks. The tape is positioned on the
                                beginning-of-the-tape side of the file mark.</td></tr><tr><td align="left">rewind</td><td align="left">Rewind the tape.</td></tr><tr><td align="left">offline, rewoffl</td><td align="left">Rewind the tape and, if applicable, unload the tape.</td></tr><tr><td align="left">status</td><td align="left">Print status information about the tape unit.</td></tr><tr><td align="left">erase</td><td align="left">Erase the tape.</td></tr></tbody></table></div><p>When using a tape stream to make backups onto, you will need to set EOF marks
                (using the <span><b class="command">weof</b></span> command) between each backup session on the tape,
                so that you can easily seek between them. You can then use the
                <span><b class="command">fsf</b></span> and <span><b class="command">bsf</b></span> commands to seek through the tape
                to the various positions for each backup. In order to make the tape drive eject the
                current tape, you should issue the <span><b class="command">offline</b></span> command.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4381"></a>tar</h3></div></div><div></div></div><a class="indexterm" name="d0e4384"></a><p>The "tape archiver", or <span><b class="command">tar</b></span> command is one
                that you should be familiar with already. This can form the staple part of your
                backup strategy. This can be used to users to make backups of their own files, or by
                the system administrator to make backups of entire filesystems.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
tar [c | x | t ] [z ] [ v ] [ -f filename ] [ files ... ]

  c  create an archive
  x  extract from an archive
  t   test an archive

  z   compress/uncompress the archive using gzip

  v   be verbose

  -f  filename  -- this specifies which archive or device to use.
                </pre></td></tr></table><p>The "files ..." is a matching path for the files and/or
                directories that you wish to archive or extract.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4396"></a>Examples:</h4></div></div><div></div></div><p>To archive your <b class="filename"><tt>/usr</tt></b> directory into a
                    file called <b class="filename"><tt>/backups/usr.tar.gz</tt></b>, and
                    compress it, you would use:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/# tar czf /backups/usr.tar.gz usr
debian:/# _
                    </pre></td></tr></table><p>To verify that the archive you created:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/# tar tzf /backups/usr.tar.gz
usr/
usr/bin/
usr/bin/whiptail
[ ... ]
                    </pre></td></tr></table><p>If you add the verbose ("v") switch, you'll even be given a
                    long directory listing:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/# tar tzvf /backups/usr.tar.gz
drwxr-xr-x root/root         0 2004-03-12 15:40:28 usr/
drwxr-xr-x root/root         0 2004-03-25 23:18:34 usr/bin/
-rwxr-xr-x root/root     15936 2002-03-31 03:00:42 usr/bin/whiptail
[ ... ]
                    </pre></td></tr></table><p>If we wanted to extract the files into a new directory, we could do something
                    like this:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:/# mkdir newusr
debian:/# cd newusr
debian:/newusr# tar xzf /backups/usr.tar.gz
                    </pre></td></tr></table><a class="indexterm" name="d0e4421"></a></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4424"></a>cpio</h3></div></div><div></div></div><p>The "CoPy In/Out", or <span><b class="command">cpio</b></span> command is very
                similar to <span><b class="command">tar</b></span> in functionality.</p><p>Unfortunately, <span><b class="command">cpio</b></span> is not as intuitive to use as
                <span><b class="command">tar</b></span>, but it can handle backing up and restoring device files
                (those in <b class="filename"><tt>/dev</tt></b>), which <span><b class="command">tar</b></span> cannot.</p><p>For an example, we will back up our <b class="filename"><tt>/dev</tt></b> directory:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# find /dev -print | cpio -o &gt; backup.cpio
debian:~# ls backup.cpio 
backup.cpio
                </pre></td></tr></table><a class="indexterm" name="d0e4456"></a><p>We pass cpio a list of files that we want backed up, from the find command, via
                standard input. The "-o" flag tells cpio that we wish to create a
                backup archive. We then redirect the output from cpio to a file called
                "backup.cpio". We could also have directed this output to a tape
                device if we wanted the backup to go directly to tape.</p><p>In order to restore files from a cpio archive, we use the "-i"
                flags. Let's test restoring our <b class="filename"><tt>/dev/null</tt></b>
                device back to where it should be after we delete it:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls /dev/null 
/dev/null
debian:~# rm /dev/null 
debian:~# ls /dev/null 
ls: /dev/null: No such file or directory
debian:~# cpio -i /dev/null &lt; backup.cpio 
414 blocks
debian:~# ls /dev/null 
/dev/null
debian:~# cpio -i /dev/null &lt; backup.cpio 
cpio: /dev/null not created: newer or same age version exists
414 blocks
debian:~# _
                </pre></td></tr></table><p>You'll notice that cpio won't let us overwrite an already existing file if it is
                newer or the same age as the one in the archive.</p><p>The "-i" flags takes a pattern as a parameter; the pattern
                should match the file(s) that you wish to have restored. In the example above, we
                only wanted the <b class="filename"><tt>/dev/null</tt></b> file restored</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4475"></a>dump and restore</h3></div></div><div></div></div><a class="indexterm" name="d0e4478"></a><a class="indexterm" name="d0e4481"></a><a class="indexterm" name="d0e4484"></a><p>The dump and restore commands, which originated from 4.4BSD, will do a dump
                (backup) and restore of an ext2 filesystem, respectively. Dump understands the
                concept of "dump levels", as discussed previously. However, this
                mode only works on complete filesystems.</p><p>Debian doesn't come with these commands by default, so you'll have to install the
                dump package if you wish to use them:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install dump
                </pre></td></tr></table><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX: dump [-0 ... -9 ] [-u] -f &lt;target&gt; &lt;filesystem&gt;
                </pre></td></tr></table><p>The numeric options specify the dump level, the "target" is the
                destination file or device where you wish to send the backup to, and the
                "filesystem" is the one you wish to back up. The
                "-u" options tells dump to record the date and time of the dump,
                so that you can check later when the last backup was done. You can use the
                "-W" switch to check this later.</p><p>To do a full (level 0) backup of our root ("/") partition onto
                tape (<b class="filename"><tt>/dev/st0</tt></b>), we would issue a command
                similar to:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
dump -0u -f /dev/st0 /
                </pre></td></tr></table><p>And then to check and see when the last time a dump was done:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
dump -W
                </pre></td></tr></table><p>The package comes with a lot of useful examples and documentation, which you
                should definitely take a look through. Remember, you can ask dpkg to give you a list
                of all the files associated with a specific package:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
dpkg --listfiles dump
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4511"></a>dd</h3></div></div><div></div></div><a class="indexterm" name="d0e4514"></a><p>The <span><b class="command">dd</b></span> command can be useful for transferring backups to and
                from tape and other media.</p><p>For example, to send a .tar.gz backup that we'd made earlier to a tape drive, we
                could issue a command similar to:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
dd if=backup.tar.gz of=/dev/nrsa0
                </pre></td></tr></table></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="OpenSource_Backup_Software"></a>Open source backup solutions</h2></div></div><div></div></div><p>If the thought of rolling your own backup system using a combination of tar, cpio,
            shell scripting and cron jobs does not appeal, or if you require a more advanced or
            robust system, there are some open source projects which you should investigate:</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4533"></a>AMANDA -- http://www.amanda.org/</h3></div></div><div></div></div><a class="indexterm" name="d0e4536"></a><p>The "Automated Network Disk Archiver" was developed at the
                University of Maryland, and is one of the most widely deployed free backup utilities.</p><p>AMANDA is composed of two parts; a backup client which runs on a machine that has
                your tape storage system attached to it, and backup servers, which run on the
                machines which you wish to have backed up.</p><p>The client then connects to the servers and requests the data which is to be
                backed up, and stores it on the tape drives attached to the backup machine.</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4546"></a>Roll your own</h2></div></div><div></div></div><p>Most small installations, and even some of the larger ones, have their own home grown
            collection of backup scripts to handle automating the task of making backups.</p><p>We'll go through the steps briefly of what the script would need to do, and then give
            an example of what the script might look like.</p><p>We want to backup the two partitions (/ and <b class="filename"><tt>/home</tt></b>) on our server. We have a tape drive in the machine,
            and a single tape can quite easily hold a full backup for the entire system.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4558"></a>Performing a backup</h3></div></div><div></div></div><div class="procedure"><p class="title"><b>Procedure&nbsp;4.1.&nbsp;Steps to backup</b></p><ol type="1"><li><p>rewind the tape</p></li><li><p>backup / partition using tar</p></li><li><p>set EOF marker</p></li><li><p>backup /home partition using tar</p></li><li><p>set EOF marker</p></li><li><p>rewind and eject tape</p></li></ol></div><p>Thus, the commands we would need to issue would be:</p><div class="procedure"><p class="title"><b>Procedure&nbsp;4.2.&nbsp;Commands to backup</b></p><ol type="1"><li><p>mt rewind</p></li><li><p>tar cz /</p></li><li><p>mt eof</p></li><li><p>tar cz /home</p></li><li><p>mt eof</p></li><li><p>mt rewoffl</p></li></ol></div><p>This could all be easily placed inside a shell script, like this one:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat backup.sh 
#!/bin/sh
echo &amp;quot;Starting backup...&amp;quot;
mt rewind
tar cz /
mt eof
tar cz /home
mt eof
mt rewoffl
echo &amp;quot;Backup complete!&amp;quot;
                </pre></td></tr></table><p>You could easily schedule this script to be run automatically every evening, using
                the <span><b class="command">cron</b></span> command.</p><p>Now we need to verify the backup, so that we know that we can actually restore
                from it.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4616"></a>Verifying Backups</h3></div></div><div></div></div><div class="procedure"><p class="title"><b>Procedure&nbsp;4.3.&nbsp;Commands to verify</b></p><ol type="1"><li><p>mt rewind</p></li><li><p>tar tz</p></li><li><p>mt fsf</p></li><li><p>tar tz</p></li><li><p>mt rewoffl</p></li></ol></div><a class="indexterm" name="d0e4638"></a><p>This will rewind the tape to the beginning, and then stream the first section of
                the tape through tar, with the "t" (test) switch, which will
                verify that tar can read the stream. Once that's done, then we use the
                <span><b class="command">mt</b></span> command to position the tape at the start of the next stream
                (which is our backup of the /home partition), and then we perform another
                "test". Once we're done, we rewind and eject the tape, and can now
                store it away and be pretty sure that we can restore from it.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../images/admon/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>Remember to label your tapes!</p></td></tr></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cmds_Restore_backup"></a>Restore from backup</h3></div></div><div></div></div><p>OK, user "Joe" has managed to delete some critical files from
                his home directory, and he wants them restored. We manage to get the latest tape
                backup from out of the fire proof safe, and pop it into the tape drive.</p><div class="procedure"><p class="title"><b>Procedure&nbsp;4.4.&nbsp;Commands to restore</b></p><ol type="1"><li><p>Now we need to rewind it: <span><b class="command">mt rewind</b></span>
                    </p></li><li><p>OK, now we know that the stuff we want is in the second stream (the
                            <b class="filename"><tt>/home</tt></b> directory), so we can skip
                        ahead to that part of the tape immediately: <span><b class="command">mt fsf</b></span>
                    </p></li><li><p>Once we're there, we can then instruct tar to restore just a specific path
                        of files: <span><b class="command">tar xf home/joe/important.doc</b></span>
                    </p></li><li><p>This will cause tar to seek through the tape stream and only restore the
                        matching files: <span><b class="command">mt rewoffl</b></span>
                    </p></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../images/admon/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>Once we're finished - rewind the tape and eject it, and put it away safely.</p></td></tr></table></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="userinfo-admin"></a>Chapter&nbsp;5.&nbsp;User Information and Administration</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Userinfo_Admininistration">Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="#useradd">useradd</a></span></dt><dt><span class="sect2"><a href="#groupadd">groupadd</a></span></dt><dt><span class="sect2"><a href="#groupmod">groupmod</a></span></dt><dt><span class="sect2"><a href="#groups">groups</a></span></dt><dt><span class="sect2"><a href="#usermod">usermod</a></span></dt><dt><span class="sect2"><a href="#userdel">userdel</a></span></dt><dt><span class="sect2"><a href="#groupdel">groupdel</a></span></dt><dt><span class="sect2"><a href="#add_user_Group_deluser_delgroup">adduser, addgroup, deluser and delgroup</a></span></dt><dt><span class="sect2"><a href="#chfn_chsh">chfn and chsh</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Disk_quotas">Debian and disk quotas:</a></span></dt><dd><dl><dt><span class="sect2"><a href="#quota_init_setup">initial setup</a></span></dt><dt><span class="sect2"><a href="#repquota">repquota</a></span></dt><dt><span class="sect2"><a href="#edquota">edquota</a></span></dt><dt><span class="sect2"><a href="#quota">quota</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Userinfo_Admininistration"></a>Introduction</h2></div></div><div></div></div><p>You'll remember from the Fundamentals course that the user information is stored in
            the system <b class="filename"><tt>/etc/passwd</tt></b> and <b class="filename"><tt>/etc/shadow</tt></b> files, and that additionally, group membership
            information is stored in the /etc/group file.</p><p>While it is possible to edit these files by hand, it is not recommended.</p><p>There exist several command line tools, which can be used to manage these files instead:</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="useradd"></a>useradd</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX: 
useradd [switches] &lt;username&gt;
                </pre></td></tr></table><a class="indexterm" name="d0e4715"></a><p>This is a powerful command, which lets you easily create new users on the system,
                with a range of options.</p><p>The most common ones are:</p><div class="table"><a name="d0e4722"></a><p class="title"><b>Table&nbsp;5.1.&nbsp;useradd options</b></p><table summary="useradd options" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">-c comment</td><td align="left">The new user's GECOS information, normally just their full name.</td></tr><tr><td align="left">-d homedir</td><td align="left">The user's home directory. Defaults to "/home/${username}".</td></tr><tr><td align="left">-e expire date</td><td align="left">The date on which this account expires (YYYY-MM-DD format).</td></tr><tr><td align="left"> -g initial group</td><td align="left">Group name or number of the user's primary group. Defaults to "1".</td></tr><tr><td align="left">-G grp1,grp2,...</td><td align="left">A list of additional groups, which the user will be made a member of.</td></tr><tr><td align="left"> -m </td><td align="left">This option will cause the user's home directory to be created if
                                it does not already exist. Any files and directories which exist in
                                /etc/skel will also be copied into the user's home directory.</td></tr></tbody></table></div><p>The last parameter should be the desired login name for the user.</p><p>You can consult man page for the other options, and for further details.</p><p>One additional switch worth mentioning is "-D", which controls
                the defaults for <span><b class="command">useradd</b></span>.</p><p>Specifying the "-D" switch on its own will simply display the
                default settings, while specifying -D in conjunction with other switches will change
                the defaults to those values.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# useradd -D
GROUP=100

INACTIVE=-1HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/bash
SKEL=/etc/skel
debian:~# useradd -D -s /bin/sh
debian:~# useradd -D
GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/sh
SKEL=/etc/skel
                </pre></td></tr></table><p>As you can see, this changes the default shell for created users from
                "bash" to "sh".</p><p>Let's change it back though, and create a test user:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# useradd -D -s /bin/bash
debian:~# useradd -c &amp;quot;Joe Blogs&amp;quot; -m jblogs
debian:~# finger jblogs
Login: jblogs                           Name: Joe Blogs
Directory: /home/jblogs                 Shell: /bin/bash
Never logged in.
No mail.
No Plan.
debian:~# ls -la /home/jblogs
total 24
drwxr-xr-x    2 jblogs   users        4096 Mar 12 05:58 .
drwxrwsr-x    4 root     staff        4096 Mar 12 05:58 ..
-rw-r--r--    1 jblogs   users         266 Mar 12 05:58 .alias
-rw-r--r--    1 jblogs   users         509 Mar 12 05:58 .bash_profile
-rw-r--r--    1 jblogs   users        1093 Mar 12 05:58 .bashrc
-rw-r--r--    1 jblogs   users         375 Mar 12 05:58 .cshrc
                </pre></td></tr></table><p>You can see that the user's home directory has been populated with the files from
                "/etc/skel". Default configuration files (such as <b class="filename"><tt>.bashrc</tt></b>, <b class="filename"><tt>.bash_profile</tt></b>) should be kept here, so that new users
                that you create will be given them automatically. Remember, though, that you can set
                your system wide defaults in the <b class="filename"><tt>/etc/profile</tt></b> file.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="groupadd"></a>groupadd</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
groupadd &lt;groupname&gt;
                </pre></td></tr></table><a class="indexterm" name="d0e4794"></a><p>This command simply creates additional groups.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# groupadd testing
debian:~# tail -1 /etc/group
testing:x:1001:
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="groupmod"></a>groupmod</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
groupmod -n &lt;newname&gt; &lt;oldname&gt;
                </pre></td></tr></table><p>This command renames a group, from oldname to newname.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# tail -1 /etc/group
testing:x:1001:
debian:~# groupmod -n jblogs testing
debian:~# tail -1 /etc/group
jblogs:x:1001:
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="groups"></a>groups</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
groups [username]
                </pre></td></tr></table><a class="indexterm" name="d0e4815"></a><p>This simple command displays what groups a user is a member of. It takes the
                username of user as a parameter. If no username is given, it defaults to the current user.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# groups
root
debian:~# groups jblogs
jblogs : users
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="usermod"></a>usermod</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
usermod [flags] &lt;username&gt;
                </pre></td></tr></table><a class="indexterm" name="d0e4827"></a><p>This command alters account information for users, which already exist. It takes
                most of the same switches as the <span><b class="command">useradd</b></span> command.</p><p>So, if we wanted to make user "jblogs"'s primary group also be
                "jblogs" (the group we renamed above), then we could do something
                like this:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# groups jblogs
jblogs : users
debian:~# usermod -g jblogs jblogs
debian:~# groups jblogs
jblogs : jblogs
                </pre></td></tr></table><p>The <span><b class="command">usermod</b></span> command also allows the system administrator to
                disable and re-enable accounts. It's usually a good idea to disable accounts which
                you know aren't being used, or if you suspect malicious activity from that user.</p><p>You can disable an account by using the "-L" (lock) switch:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# usermod -L student
                </pre></td></tr></table><p>Now when the user "student" attempts to log in, they will be
                prevented from doing so.</p><p>You can then re-enable the account, using the "-U" (unlock) switch:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# usermod -U student
                </pre></td></tr></table><p>This will allow "student" to log in again as normal, with the
                same password as his account had previously.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="userdel"></a>userdel</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
userdel [-r] &lt;username&gt;
                </pre></td></tr></table><a class="indexterm" name="d0e4861"></a><p>This command removes a user from the password database. If the
                "-r" flag is specified, the users home directory and files are
                also removed.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls -la ~jblogs
total 24
drwxr-xr-x    2 jblogs   users        4096 Mar 12 05:58 .
drwxrwsr-x    4 root     staff        4096 Mar 12 07:57 ..
-rw-r--r--    1 jblogs   users         266 Mar 12 05:58 .alias
-rw-r--r--    1 jblogs   users         509 Mar 12 05:58 .bash_profile
-rw-r--r--    1 jblogs   users        1093 Mar 12 05:58 .bashrc
-rw-r--r--    1 jblogs   users         375 Mar 12 05:58 .cshrc
debian:~# userdel -r jblogs
debian:~# ls -la ~jblogs
ls: ~jblogs: No such file or directory
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="groupdel"></a>groupdel</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
groupdel &lt;group&gt;
                </pre></td></tr></table><a class="indexterm" name="d0e4873"></a><p>This command removes a group from the group database.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="add_user_Group_deluser_delgroup"></a>adduser, addgroup, deluser and delgroup</h3></div></div><div></div></div><a class="indexterm" name="d0e4881"></a><a class="indexterm" name="d0e4884"></a><a class="indexterm" name="d0e4887"></a><a class="indexterm" name="d0e4890"></a><p>The <span><b class="command">adduser</b></span>, <span><b class="command">addgroup</b></span>,
                <span><b class="command">deluser</b></span> and <span><b class="command">delgroup</b></span> commands are more user-
                friendly front-ends to the commands explained earlier. They will prompt you
                interactively instead of requiring command line switches.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# adduser 
Enter a username to add: jane
Adding user jane...
Adding new group jane (1001).
Adding new user jane (1001) with group jane.
Creating home directory /home/jane.
Copying files from /etc/skel
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully
Changing the user information for jane
Enter the new value, or press return for the default
        Full Name []: Jane Doe
        Room Number []: 
        Work Phone []: 
        Home Phone []: 
        Other []: 
Is the information correct? [y/n] y
debian:~# ls -la ~jane
total 24
drwxr-xr-x    2 jane     jane         4096 Mar 12 08:02 .
drwxrwsr-x    4 root     staff        4096 Mar 12 08:02 ..
-rw-r--r--    1 jane     jane          266 Mar 12 08:02 .alias
-rw-r--r--    1 jane     jane          509 Mar 12 08:02 .bash_profile
-rw-r--r--    1 jane     jane         1093 Mar 12 08:02 .bashrc
-rw-r--r--    1 jane     jane          375 Mar 12 08:02 .cshrc
                </pre></td></tr></table><p>You'll notice that, by default, the adduser command creates a group with the same
                name as the username, and makes this group the primary group for that user. This is
                called a user private group (UPG).</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="chfn_chsh"></a>chfn and chsh</h3></div></div><div></div></div><a class="indexterm" name="d0e4914"></a><a class="indexterm" name="d0e4917"></a><p>While all the commands described above are only available to the root user, the
                <span><b class="command">chfn</b></span> and <span><b class="command">chsh</b></span> commands are available to normal
                users too.</p><p>The chfn command allows the user to alter their GECOS information, while the chsh
                command allows the user to alter their shell.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
jane@debian:~$ chsh
Password: 
Changing the login shell for jane
Enter the new value, or press return for the default
Login Shell [/bin/bash]: /bin/sh
                </pre></td></tr></table></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Disk_quotas"></a>Debian and disk quotas:</h2></div></div><div></div></div><a class="indexterm" name="d0e4935"></a><p>Disk quotas are very useful in large multi-user environments where you have a large
            number of users with access to the filesystem, whether because they log into the system
            or use their file space remotely, through either Samba or NFS.</p><p>Debian supports BSD-style disk quotas on the ext2 filesystem. This allows you to limit
            the amount of disk space that your users consume.</p><p>You've already learnt that an ext2 filesystem has two finite resources; blocks and
            inodes. You can limit the quantity of both of these that each user is allowed to use.
            You can specify a "hard limit", which is the user is not allowed to
            exceed - the will receive an error message if they try.</p><p>You can also optionally specify a "soft limit", which the user _is_
            allowed to exceed, but only for a limited amount of time. This amount of time is known
            as the "grace period" and is usually a week (7 days).</p><p>Additionally, you can impose quotas on individual users, as well as groups.</p><p>For example:</p><p>You have three users: Joe, bob and jane</p><p>Joe has his own project funding, which has covered half of the cost of the hard drive
            for the system.</p><p>Bob and Jane work together, but for another project, which has paid for the other half
            of the hard drive. We'll call their project "project-x".</p><p>You can now fairly divide up the disk, giving half to Joe, and the other half to both
            Bob and Jane, who will share that 50%.</p><p>You can do this by allocating a <span class="emphasis"><em>user</em></span> quota to user
            "Joe", and a<span class="emphasis"><em>group</em></span> quota to "project-x".</p><p>If "Joe" exceeds his quota, he will have to clean up some of his old
            files (or buy more disk space). However, if "bob" or
            "jane" exceed their group quota, they will have to decide amongst
            themselves how best to reduce their disk usage.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="quota_init_setup"></a>initial setup</h3></div></div><div></div></div><p>You'll need to install the quota package for Debian:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install quota
Reading Package Lists... Done
Building Dependency Tree... Done
(Reading database ... 6077 files and directories currently installed.)
Unpacking quota (from quota_3.04-1_i386.deb) ...
Setting up quota (3.04-1) ...
                </pre></td></tr></table><p>You will be asked whether or not you wish to send e-mail out to users who have
                exceeded their quota. The default is <span><b class="guibutton">No</b></span>. If your users are
                more likely to check their e-mail in case of problems, then you can opt to specify "yes".</p><p>Your kernel also needs to have quota support compiled in.</p><p>Now you need to tell the system which filesystems should be controlled by the
                quota system. To do this, we need to edit the <b class="filename"><tt>/etc/fstab</tt></b> file and add the
                "usrquota" and/or "grpquota" options to the
                relevant lines.</p><h4><a name="d0e4987"></a>Before:</h4><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /etc/fstab 
# /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;               &lt;dump&gt;  &lt;pass&gt;
/dev/hdb2       /               ext2    errors=remount-ro       0       1
/dev/hdb1       none            swap    sw                      0       0
proc            /proc           proc    defaults                0       0
/dev/fd0        /floppy         auto    user,noauto             0       0
/dev/cdrom      /cdrom          iso9660 ro,user,noauto          0       0
                </pre></td></tr></table><h4><a name="d0e4991"></a>After:</h4><p>
                <b class="filename"><tt>/etc/fstab</tt></b>
            </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# vi /etc/fstab
debian:~# cat /etc/fstab 
# /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;   &lt;dump&gt; &lt;pass&gt;
/dev/hdb2       /               ext2    errors=remount-ro,usrquota,grpquota     0       1
/dev/hdb1       none            swap    sw                        		0       0
proc            /proc           proc    defaults                 		0       0
/dev/fd0        /floppy         auto    user,noauto               		0       0
/dev/cdrom      /cdrom          iso9660 ro,user,noauto                          0       0
                </pre></td></tr></table><p>Now you need to initialize the quota files. These files live in the root directory
                of the filesystem which has quotas enabled, and are named <b class="filename"><tt>quota.user</tt></b> and <b class="filename"><tt>quota.group</tt></b> for user and group quota databases,
                respectively. These files contain both the user and group quota information, as well
                as the filesystem usage information.</p><p>To do this, you need to run the <span><b class="command">quotacheck</b></span> command. However,
                because <span><b class="command">quotacheck</b></span> has to determine the disk usage by inspecting
                the file structure on the disk, there can be no write activity on the disk at the
                time. Otherwise, this may corrupt your quota database. For this reason, it is
                suggested that <span><b class="command">quotacheck</b></span> be run in single-user mode:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# shutdown now

[ ... ]

Give root password for maintenance
(or type Control-D for normal startup):

                </pre></td></tr></table><p>Enter the root password, and then issue the follow command:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# quotacheck -F vfsold -c -a -v
quotacheck: Scanning /dev/hdb2 [/] done
quotacheck: Checked 791 directories and 15539 files
debian:~# _
                </pre></td></tr></table><a class="indexterm" name="d0e5025"></a><p>The "-F vfsold" flag instructs the system to use the old VFS
                quota (version 1) system. The newer (version 2) quota system doesn't work in the
                standard Debian installation.</p><p>The "-c" flag specifies that the quota database files should be
                created, and the "-a" flag specifies that the command should be
                run on all filesystems which have quotas enabled. If you only wanted to perform the
                operation on a specific filesystem, you could have used the following:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# quotacheck -F vfsold -c /home
                </pre></td></tr></table><p>By default, <span><b class="command">quotacheck</b></span> only performs this operation for
                "user" quotas. You will need to run the same command again, this
                time with the "-g" flag, if you also wish to enable
                "group" quotas:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# quotacheck -F vfsold -c -a -g
debian:~# _
                </pre></td></tr></table><p>You should now have both the quota database files created and present in the root
                directory of the filesystem for which you have quotas turned on:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ls /*quota*
/quota.group  /quota.user
                </pre></td></tr></table><p>Once you're finished, you can type "exit" or press <span><b class="keycap">Ctrl</b></span>-<span><b class="keycap">d</b></span> to return to multi-user mode.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="repquota"></a>repquota</h3></div></div><div></div></div><a class="indexterm" name="d0e5056"></a><p>The <span><b class="command">repquota</b></span> command is a utility for reporting quota summary information.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
repquota [ -u | -g ] [ -a | filesystem ]
                </pre></td></tr></table><p>As with <span><b class="command">quotacheck</b></span>, the <span><b class="command">repquota</b></span> command
                only displays user quotas by default, but you can specify that you wish to see group
                quotas by using the "-g" switch. You also need to specify the
                filesystem for which you wish to see a report, or you can specify the
                "-a" switch to see a report for all the filesystems for which
                quotas are enabled.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# repquota -a
*** Report for user quotas on device /dev/hdb2
Block grace time: 7days; Inode grace time: 7days
                        Block limits                File limits
User            used    soft    hard  grace    used  soft  hard  grace
------------------------------------------------------
root      --   80088       0       0          12025     0     0       
daemon    --       8       0       0              3     0     0       
man       --     172       0       0             17     0     0       
lp        --      12       0       0              3     0     0       
mail      --      56       0       0             14     0     0       
news      --       4       0       0              1     0     0       
student   --      12       0       0              3     0     0       

                </pre></td></tr></table><p>The "block limits" refer to the data blocks (the default is 1
                block = 1k). The "file limits" refer to the number of files, or
                inodes, that have been consumed. The "grace" field corresponds to
                the number of grace days remaining before the user is locked out of their account.
                The user has until that time to reduce their quota to below the
                "soft" level.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="edquota"></a>edquota</h3></div></div><div></div></div><p>You can use the <span><b class="command">edquota</b></span> command to edit user and group quotas.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
edquota [ -u | -g ] &lt;username or groupname&gt;
                </pre></td></tr></table><a class="indexterm" name="d0e5088"></a><p>For example, to edit the quota for "student":</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# edquota student
                </pre></td></tr></table><p>The command will open up an instance of your preferred editor, with the following information:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
Disk quotas for user student (uid 1000):
  Filesystem    blocks       soft       hard     inodes     soft     hard
  /dev/hdb2         12          0          0          3        0        0
                </pre></td></tr></table><p>The "blocks" and "inodes" fields cannot be
                edited, they are there for information purposes only. However, you can edit the soft
                and hard fields. The first pair refer to blocks, and the second to inodes.</p><p>For our example, let's set the "student" quota so that the user
                has 8MB of disk space available, and can use an extra 2MB temporarily if required.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
Disk quotas for user student (uid 1000):
Filesystem     blocks       soft       hard     inodes     soft     hard
/dev/hdb2          12       8192      10240          3        0        0
                </pre></td></tr></table><p>Once you've made the changes, you can save and exit. The
                <span><b class="command">edquota</b></span> utility will complain if it doesn't like the values that
                you've given.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="quota"></a>quota</h3></div></div><div></div></div><p>Unlike <span><b class="command">repquota</b></span> and <span><b class="command">edquota</b></span>, which only the
                root user can make use of, the <span><b class="command">quota</b></span> command is available to all
                users, and it allows them to query their current quota information.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
quota [ -q ] [ username ]
                </pre></td></tr></table><a class="indexterm" name="d0e5126"></a><p>The root user may optionally specify the username of a user in order to check
                their quota:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# quota student
Disk quotas for user student (uid 1000): 
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
      /dev/hdb2      12    8192   10240               3       0       0        
                </pre></td></tr></table><p>If you log in as the "student" account, you should be able to
                use <span><b class="command">quota</b></span> to check your disk usage:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
student@debian:~$ quota
Disk quotas for user student (uid 1000): 
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
      /dev/hdb2      12    8192   10240               3       0       0        
                </pre></td></tr></table><p>The optional "-q" switch tells <span><b class="command">quota</b></span> not to
                output anything unless the user has exceeded their quota limits:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
student@debian:~$ quota -q
student@debian:~$ _
                </pre></td></tr></table><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../images/admon/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>This is a useful command to place in the system wide /etc/profile file. That
                    way, whenever a user logs in, they will be presented with a summary of the disk
                    usage information, but only if they are over quota.</p></td></tr></table></div><p>Let's test and see if our quota system works. We'll use the <span><b class="command">dd</b></span>
                command to create a 9MB file as the "student" user:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
student@debian:~$ dd if=/dev/zero of=9mb-file bs=1024 count=9216
student@debian:~$ du 9mb-file 
9232    9mb-file
student@debian:~$ quota
Disk quotas for user student (uid 1000): 
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
      /dev/hdb2    9248*   8192   10240   6days       5       0       0        
                </pre></td></tr></table><p>You'll notice now that there is an asterisk ("*") next to the
                number of blocks that we've used, and that there is a "6day" value
                underneath the account's "grace period". This shows us that we've
                exceeded our soft quota, and have 6 days in which to reduce the amount of space that
                we're using.</p><p>If we were to attempt to create another file slightly larger than 1MB, and thus
                exceed our hard limit, we would receive an "out of disk space"
                error message.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Process_acounting"></a>Chapter&nbsp;6.&nbsp;Process Accounting</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Procc_acc_Introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#installing_acct">Installing the accounting package</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ac">ac</a></span></dt><dt><span class="sect2"><a href="#lastcomm">lastcomm</a></span></dt><dt><span class="sect2"><a href="#sa">sa</a></span></dt><dt><span class="sect2"><a href="#last">last</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Procc_acc_Introduction"></a>Introduction</h2></div></div><div></div></div><p>Over 10 years ago, it cost a lot to keep computing facilities running, with masses
            amounts of money being required to keep a CPU going for only a few hundred cycles. For
            this reason, it was important to keep track of who was using the CPU, and how much they
            were using it.</p><p>Universities and companies used to keep track of this information, and then bill their
            students or customers accordingly.</p><p>Although it costs far less to use CPU time now on most standard PC systems, you may
            still sometimes want to have this functionality; perhaps if you have a large rendering
            cluster than you're renting out to CG companies.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing_acct"></a>Installing the accounting package</h2></div></div><div></div></div><p>In order for Debian to support process accounting, you need to install the
            "acct" Debian package</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install act
Reading Package Lists... Done
(Reading database ... 6023 files and directories currently installed.)
Unpacking acct (from acct_6.3.5-32_i386.deb) ...
Setting up acct (6.3.5-32) ...
Starting process accounting: 
            </pre></td></tr></table><a class="indexterm" name="d0e5181"></a><p>This will start up the system accounting process, and beginning logging all system
            activity to the following file:</p><p>
            <b class="filename"><tt>/var/account/pacct</tt></b>
        </p><a class="indexterm" name="d0e5191"></a><p>When you install the Debian package, it will also add entries to the system cron
            folders (<b class="filename"><tt>/etc/cron.daily</tt></b> and <b class="filename"><tt>/etc/cron.monthly</tt></b>) in order to keep track of these files,
            and make sure that they don't grow too large.</p><p>You will now be able to use the following commands to query the accounting database:</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ac"></a>ac</h3></div></div><div></div></div><p>This commands prints out statistics about users' connection time, in hours. This
                is the amount of time that the user has been connected to the system, either
                remotely via SSH or a serial terminal, or while on the console.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ac
        total       10.44
debian:~# _
                </pre></td></tr></table><p>In the screenshot above, we can see that the root user has been logged in for over
                10 hours so far this month.</p><a class="indexterm" name="d0e5213"></a></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="lastcomm"></a>lastcomm</h3></div></div><div></div></div><a class="indexterm" name="d0e5219"></a><p>The <span><b class="command">lastcomm</b></span> command displays information about the previously
                executed commands. The most recent entries are given at the top of the list. Also
                displayed is the total amount of CPU time that each process used.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# lastcomm
lastcomm      root     stderr     0.02 secs Mon Mar  1 02:36
ls                   root     stderr     0.01 secs Mon Mar  1 02:34
ls                   root     stderr     0.00 secs Mon Mar  1 02:34
ls                   root     stderr     0.01 secs Mon Mar  1 02:34
ls                   root     stderr     0.01 secs Mon Mar  1 02:34
ls                   root     stderr     0.01 secs Mon Mar  1 02:34
sa                  root     stderr     0.00 secs Mon Mar  1 02:34
sa                  root     stderr     0.01 secs Mon Mar  1 02:34
sa                  root     stderr     0.00 secs Mon Mar  1 02:33
acct               root     stderr     0.03 secs Mon Mar  1 02:33
accton    S     root     stderr     0.00 secs Mon Mar  1 02:33
                </pre></td></tr></table><p>Here we can see that the root user executed the <span><b class="command">sa</b></span> command
                three times, and the <span><b class="command">ls</b></span> command 5 times, followed finally by the
                <span><b class="command">lastcomm</b></span> command which is displaying the current listing.</p><p>You'll notice that there's a field after the command, but before the username,
                which can contain the following symbols:</p><div class="itemizedlist"><ul type="disc"><li><p>S - command executed by super-user</p></li><li><p>F - command executed after a fork but without a following exec</p></li><li><p> D - command terminated with the generation of a core file</p></li><li><p>X - command was terminated with the signal SIGTERM</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="sa"></a>sa</h3></div></div><div></div></div><p>The <span><b class="command">sa</b></span> command displays a summary of the accounting database to
                date. A sample output may appear as follows:</p><a class="indexterm" name="d0e5263"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# sa
     195    2083.07re       0.03cp         0avio       418k
      29     512.10re       0.01cp         0avio       507k   sh
       7     184.77re       0.01cp         0avio       401k   less
       4       0.63re       0.01cp         0avio       619k   troff
       6       0.33re       0.00cp         0avio       462k   dpkg
      14     528.33re       0.00cp         0avio       400k   pager
       8      17.97re       0.00cp         0avio       372k   lastcomm
      12       0.18re       0.00cp         0avio       373k   ls
      25     151.47re       0.00cp         0avio       402k   gzip
      14     529.15re       0.00cp         0avio       420k   man
       4      29.98re       0.00cp         0avio       465k   grotty
       8      67.00re       0.00cp         0avio       448k   ***other*
      12       0.12re       0.00cp         0avio       336k   ac
      12       0.07re       0.00cp         0avio       312k   expr
       4      30.22re       0.00cp         0avio       508k   nroff
       4       0.15re       0.00cp         0avio       542k   dhclient-script
       4       0.25re       0.00cp         0avio       445k   tbl
       5       0.03re       0.00cp         0avio       317k   sa
       4       0.07re       0.00cp         0avio       317k   zsoelim
       4      30.02re       0.00cp         0avio       441k   groff
       4       0.03re       0.00cp         0avio       314k   locale
       4       0.10re       0.00cp         0avio       508k   nroff*
       4       0.00re       0.00cp         0avio       310k   uname
       3       0.10re       0.00cp         0avio       508k   sh*
                </pre></td></tr></table><p>The first field contains the total number of times that the specific command has
                been executed on the system. The "re" field shows the amount of
                "real time" that the command consumed, cumulatively, and in
                seconds. The "cp" column shows the number of seconds actually
                spent on the CPU. The "avio" column is the average number of I/O
                operations per execution. Finally, the "k" field shows the average
                amount of CPU core usage, in 1k units. Finally, the last column shows the command
                itself. The asterisk (*) denotes that the command fork()ed, but didn't call exec().</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="last"></a>last</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
last [ -count] [ username ] [ -f file ]
                </pre></td></tr></table><a class="indexterm" name="d0e5275"></a><p>Although the <span><b class="command">last</b></span> command is not part of the
                "acct" package, it is still worth mentioning here.</p><p>[[ exercise: determine which package the <span><b class="command">last</b></span> command is part
                of ]]</p><p>The <span><b class="command">last</b></span> command displays the login and logout times for all
                users who've connected to the system. This data is stored in the <b class="filename"><tt>/var/log/wtmp</tt></b> file.</p><p>The "-count" switch limits the number of entries to display. The
                "username" parameter specifies a particular user whose records
                should be examined; the default is to display the records for all users.</p><p>The "-f file" switch allows you to specify a different file to
                extract this information from, instead of the default <b class="filename"><tt>/var/log/wtmp</tt></b> file.</p><p>The <span><b class="command">wtmp</b></span> file also logs reboot and shutdown commands. You can
                use the word "reboot" instead of a username to just display these entries.</p><p>In addition to the <span><b class="command">wtmp</b></span> file, you can also configure your
                system to use a <span><b class="command">btmp</b></span> file. This file maintains a record of all
                the failed login attempts.</p><p>You can use the <span><b class="command">lastb</b></span> command to view this file. The
                <span><b class="command">lastb</b></span> command is the same as <span><b class="command">last</b></span>, except it
                has the default file to display as <b class="filename"><tt>/var/log/btmp</tt></b> instead of <span><b class="command">wtmp</b></span>.</p><p>You will need to create the file initially for the system to start using it. You
                can do this with the <span><b class="command">touch</b></span> command:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# lastb 
lastb: /var/log/btmp: No such file or directory
Perhaps this file was removed by the operator to prevent logging lastb info.
debian:~# touch /var/log/btmp
debian:~# lastb

btmp begins Sat Mar 27 05:46:05 2004
                </pre></td></tr></table></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Managing_Processes"></a>Chapter&nbsp;7.&nbsp;Managing Processes</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Man_Procc_Introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#process_table_nice_command">The process table and the nice command</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5380">Process creation</a></span></dt><dt><span class="sect2"><a href="#d0e5387">System Processes</a></span></dt><dt><span class="sect2"><a href="#d0e5392">Scheduling Command execution with batch (cron) jobs</a></span></dt><dt><span class="sect2"><a href="#monitor_Sys_resources">Monitoring system resources</a></span></dt><dt><span class="sect2"><a href="#d0e5865">ulimit:</a></span></dt><dt><span class="sect2"><a href="#log_files">Working with log files</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Man_Procc_Introduction"></a>Introduction</h2></div><div><h3 class="subtitle">What is a process?</h3></div></div><div></div></div><p>As we've mentioned previously, the Linux kernel enables us to have a multi-tasking
            operating system. This means that more than task can be running at the same time; while
            they are running, each of these tasks, or programs, are referred to as a process.</p><p>Each process has a unique number assigned to it; this number is known as the process
            ID, or PID. Each process also has a user (uid) and group (gid) assigned to it, much like
            files on the filesystem.</p><a class="indexterm" name="d0e5353"></a><a class="indexterm" name="d0e5356"></a></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="process_table_nice_command"></a>The process table and the <span><b class="command">nice</b></span> command</h2></div></div><div></div></div><p>The kernel maintains a list of all the current processes in a "process
            table"; you can use the <span><b class="command">ps</b></span> command to view the contents of
            this table.</p><p>Each process can also be assigned a priority, or "niceness" level; a
            value which ranges from -20 to 19. A priority of "-20" means that the
            process will be given access to the CPU more often, whereas a priority of
            "19" means that the process will only be given CPU time when the
            system is idle.</p><p>You can use the <span><b class="command">nice</b></span> and <span><b class="command">renice</b></span> commands to
            specify and alter these values for specific processes.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5380"></a>Process creation</h3></div></div><div></div></div><p>From your shell prompt (bash), you will usually instruct the system to run an
                application for you; for example, "vi". This will then cause your
                "bash" process to "fork" off a new process. The
                initial process is referred to as the "parent process", and the
                process which it forked as the "child process".</p><p>The process table contains the parent PID (PPID), and uses this to track which
                processes spawned which other ones.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5387"></a>System Processes</h3></div></div><div></div></div><p>As well as the standard user processes that you would expect to find running, such
                as your shell and perhaps your editor, there are also several system processes that
                you would expect to find running. Examples of these include the cron daemon (crond),
                which handles job scheduling, and the system log daemon (syslogd), which handles the
                logging of system messages.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5392"></a>Scheduling Command execution with batch (cron) jobs</h3></div></div><div></div></div><a class="indexterm" name="d0e5395"></a><p>There are two methods of scheduling jobs on a Unix system. One is called
                <span><b class="command">at</b></span>, which is used for once-off batch jobs. The other is called
                <span><b class="command">cron</b></span>, which is used for regularly run tasks.</p><p>The <span><b class="command">at</b></span> jobs are serviced by the "at daemon (atd)".</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="at"></a>at</h4></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
at [-f script] TIME
                    </pre></td></tr></table><a class="indexterm" name="d0e5416"></a><p>This command is used to schedule batch jobs.</p><p>You can either give it a script to run with the "-f"
                    parameter, or you can specify it after you've typed the command.</p><p>The "TIME" parameter can be in the form of HH:MM, or
                    "now + n minutes". There are several other complicated methods
                    of specifying the time, which you should look up in the man page for at(1).</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# at now + 5 minutes
warning: commands will be executed using /bin/sh
at&gt; echo hello!
at&gt; &lt;EOT&gt;
job 1 at 2004-03-12 13:27
                    </pre></td></tr></table><p>We have now scheduled a job to run in 5 minutes time; that job will simply
                    display (echo) the string "hello!" to stdout.</p><p>To tell <span><b class="command">at</b></span> that you're finished typing commands to be
                    executed, press <span><b class="keycap">Ctrl</b></span>-<span><b class="keycap">d</b></span>, that will display the &lt;EOT&gt; marker that you can see above.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5440"></a>atq</h4></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
atq
                    </pre></td></tr></table><p>This command displays the current batch jobs that are queued:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# atq
1       2004-03-12 13:27 a root
debian:~# 
                    </pre></td></tr></table><p>This is the job that we queued earlier.</p><p>The first number is the "job id", followed by the date and
                    time that the job will be executed, followed by the user who the job belongs to.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5453"></a>atrm</h4></div></div><div></div></div><a class="indexterm" name="d0e5456"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
atrm &lt;job id&gt;
                    </pre></td></tr></table><p>This command simply removes jobs from the queue.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# atrm 1
debian:~# atq
debian:~# 
                    </pre></td></tr></table><p>We've now removed our scheduled job from the queue, so it won't run.</p><p>Let's add another one, and see what happens when it is executed:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# at now + 1 minute
warning: commands will be executed using /bin/sh
at&gt; touch /tmp/at.job.finished
at&gt; &lt;EOT&gt;
job 3 at 2004-03-12 13:27
debian:~# atq
3       2004-03-12 13:27 a root
debian:~# date
Fri Mar 12 13:26:57 SAST 2004
debian:~# date
Fri Mar 12 13:27:04 SAST 2004
debian:~# atq
debian:~# ls -l /tmp/at.job.finished
-rw-r--r--    1 root     root            0 Mar 12 13:27 /tmp/at.job.finished
                    </pre></td></tr></table><p>As you can see, we scheduled a job to execute one minute from now, and then
                    waited for a minute to pass. You'll notice how it was removed from the queue
                    once it was executed.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5473"></a>cron</h4></div></div><div></div></div><p>The <span><b class="command">cron</b></span> jobs are serviced by the "cron daemon (crond)".</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5481"></a>crontab</h4></div></div><div></div></div><a class="indexterm" name="d0e5484"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
crontab [ -u user ] { -l | -r | -e } 
crontab [ -u user ] filename
                    </pre></td></tr></table><p>You can use the <span><b class="command">crontab</b></span> command to edit, display and delete
                    existing cron tables.</p><p>The "-u" switch lets the root user specify another user's
                    crontab to perform the operation on.</p><div class="table"><a name="d0e5496"></a><p class="title"><b>Table&nbsp;7.1.&nbsp;crontab options</b></p><table summary="crontab options" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">l</td><td align="left">lists current crontab</td></tr><tr><td align="left">r</td><td align="left">removes current crontab</td></tr><tr><td align="left">e</td><td align="left">edits current crontab</td></tr></tbody></table></div><p>If a filename is specified instead, that file is made the new crontab.</p><p>The syntax for a crontab is as follows:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
# minute hour day month weekday command

Example:

# minute  hour  day  month  weekday  command
       0     1    *      *        *	backup.sh
                    </pre></td></tr></table><p>This cron job will execute the <b class="filename"><tt>backup.sh</tt></b> script, at 01:00 every day of the year.</p><p>A more complicated example:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
# minute  hour  day  month  weekday  command
       5     2    *      *	5	backup-fri.sh
                    </pre></td></tr></table><p>This cron job will execute the <b class="filename"><tt>backup-fri.sh</tt></b> script, at 02:05 every Friday.</p><p>Weekdays are as follows:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
 01 - Monday
 02 - Tuesday
 etc.
 07 - Sunday
                    </pre></td></tr></table><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admon/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>There is also a "system crontab", which differs slightly
                        from the user crontabs explained above. You can find the system crontab in a
                        file called <b class="filename"><tt>/etc/crontab</tt></b>.</p></td></tr></table></div><p>You can edit this file with vi, you must not use the
                    <span><b class="command">crontab</b></span> command to edit it.</p><p>You'll also notice that this file has an additional field, which specifies the
                    username under which the job should run.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /etc/crontab 
# /etc/crontab: system-wide crontab
# Unlike any other crontab you don't have to run the `crontab&amp;apos;
# command to install the new version when you edit this file.
# This file also has a username field, that none of the other crontabs do.

SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

# m h dom mon dow user  command
25 6    * * *   root    test -e /usr/sbin/anacron || 
		run-parts --report /etc/cron.daily
47 6    * * 7   root    test -e /usr/sbin/anacron || 
		run-parts --report /etc/cron.weekly
52 6    1 * *   root    test -e /usr/sbin/anacron ||
		run-parts --report /etc/cron.monthly
#
                    </pre></td></tr></table><p>Some of the daily system-wide jobs that run are:</p><div class="orderedlist"><ol type="1"><li><p>logrotate - this checks to see that the files in <b class="filename"><tt>/var/log</tt></b> don't grow too large.</p></li><li><p>find - this builds the locate database, used by the
                            <span><b class="command">?locate?</b></span> command.</p></li><li><p>man-db - this builds the "whatis" database, used by
                            the <span><b class="command">whatis</b></span> command.</p></li><li><p>standard - this makes a backup of critical system files from the
                                <b class="filename"><tt>/etc</tt></b> directory, namely, your
                            passwd,shadow and group files - that backups are given a .bak extension.</p></li></ol></div><a class="indexterm" name="d0e5584"></a><a class="indexterm" name="d0e5587"></a><a class="indexterm" name="d0e5590"></a><a class="indexterm" name="d0e5593"></a></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="monitor_Sys_resources"></a>Monitoring system resources</h3></div></div><div></div></div><p>The follow commands are vital for monitoring system resources:</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5602"></a>ps and kill</h4></div></div><div></div></div><a class="indexterm" name="d0e5605"></a><a class="indexterm" name="d0e5608"></a><p>The <span><b class="command">ps</b></span> command displays the process table.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
ps [auxwww]

 a -- select all with a tty except session leaders
 u -- select by effective user ID - shows username associated with each process
 x -- select processes without controlling ttys (daemon or background processes)
 w -- wide format
                    </pre></td></tr></table><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ps
  PID TTY          TIME CMD
 1013 pts/0    00:00:00 bash
 1218 pts/0    00:00:00 ps
                    </pre></td></tr></table><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ps auxwww
USER       PID %CPU %MEM   VSZ  RSS TTY      STAT START   TIME COMMAND
root         1  0.4  0.1  1276  496 ?        S    13:46   0:05 init
root         2  0.0  0.0     0    0 ?        SW   13:46   0:00 [kflushd]
root         3  0.0  0.0     0    0 ?        SW   13:46   0:00 [kupdate]
root         4  0.0  0.0     0    0 ?        SW   13:46   0:00 [kswapd]
root         5  0.0  0.0     0    0 ?        SW   13:46   0:00 [keventd]
root       140  0.0  0.2  1344  596 ?        S    13:46   0:00 /sbin/syslogd
root       143  0.0  0.3  1652  836 ?        S    13:46   0:00 /sbin/klogd
root       151  0.0  0.1  1292  508 ?        S    13:46   0:00 /usr/sbin/inetd
daemon     180  0.0  0.2  1388  584 ?        S    13:46   0:00 /usr/sbin/atd
root       183  0.0  0.2  1652  684 ?        S    13:46   0:00 /usr/sbin/cron
root       682  0.0  0.4  2208 1256 tty1     S    13:48   0:00 -bash
root      1007  0.0  0.4  2784 1208 ?        S    13:51   0:00 /usr/sbin/sshd
root      1011  0.0  0.6  5720 1780 ?        S    13:52   0:00 /usr/sbin/sshd
root      1013  0.0  0.4  2208 1236 pts/0    S    13:52   0:00 -bash
root      1220  0.0  0.4  2944 1096 pts/0    R    14:06   0:00 ps auxwww
                    </pre></td></tr></table><p>The USER column is the user to whom that particular process belongs; the PID
                    is that processes unique Process ID. You can use this PID to send signals to a
                    process using the <span><b class="command">kill</b></span> command.</p><p>For example, you can signal the "sshd" process (PID = 1007)
                    to quit, by sending it the terminate (TERM) signal:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ps auxwww | grep 1007
root      1007  0.0  0.4  2784 1208 ?        S    13:51   0:00 /usr/sbin/sshd
debian:~# kill -SIGTERM 1007
debian:~# ps auxwww | grep 1007
                    </pre></td></tr></table><p>The "TERM" signal is the default that the
                    <span><b class="command">kill</b></span> command sends, so you can leave the signal parameter out usually.</p><p>If a process refuses to exit gracefully when you send it a KILL signal; e.g.
                    "kill -SIGKILL &lt;pid&gt;".</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5638"></a>top</h4></div></div><div></div></div><a class="indexterm" name="d0e5641"></a><p>The <span><b class="command">top</b></span> command will display a running process table of the
                    top CPU processes:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
 14:15:34 up 29 min,  2 users,  load average: 0.00, 0.00, 0.00
20 processes: 19 sleeping, 1 running, 0 zombie, 0 stopped
CPU states:   1.4% user,   0.9% system,   0.0% nice,  97.7% idle
Mem:    257664K total,    45104K used,   212560K free,    13748K buffers
Swap:    64224K total,        0K used,    64224K free,    21336K cached

  PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME COMMAND
    1 root       0   0   496  496   428 S     0.0  0.1   0:05 init
    2 root       0   0     0    0     0 SW    0.0  0.0   0:00 kflushd
    3 root       0   0     0    0     0 SW    0.0  0.0   0:00 kupdate
    4 root       0   0     0    0     0 SW    0.0  0.0   0:00 kswapd
[ ... ]
                    </pre></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="nice_renice"></a>nice and renice</h4></div></div><div></div></div><a class="indexterm" name="d0e5654"></a><a class="indexterm" name="d0e5657"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
nice -&lt;niceness&gt; &lt;command&gt;
                    </pre></td></tr></table><h5><a name="d0e5662"></a>Example:</h5><p>To run the <span><b class="command">sleep</b></span> command with a niceness of "-10":</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# nice --10 sleep 50
                    </pre></td></tr></table><p>If you then run the <span><b class="command">top</b></span> command in a different terminal,
                    you should see that the sleep's NI column has been altered:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
  PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME COMMAND
 2708 root      -9 -10   508  508   428 S &lt;   0.0  0.1   0:00 sleep
                    </pre></td></tr></table><p>You can use the <span><b class="command">renice</b></span> command to alter the niceness level
                    of an already running process.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
renice &lt;niceness&gt; [ -p &lt;pid&gt; ] [ -u &lt;user&gt; ]
                    </pre></td></tr></table><p>The "-p pid" parameter specifies the PID of a specific
                    process, and the "-u user" parameter specifies a specific
                    user, all of whose currently running processes will have their niceness value changed.</p><h5><a name="d0e5687"></a>Example:</h5><p>To renice all of user "student"'s processes to a value of "-10":</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# renice -10 -u student
                    </pre></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5693"></a>vmstat</h4></div></div><div></div></div><p>The <span><b class="command">vmstat</b></span> command gives you statistics on the virtual
                    memory system.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
vmstat [delay [count]]
                    </pre></td></tr></table><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# vmstat 1 5
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  0  0      0 212636  13748  21348   0   0     4     4  156    18   1   1  98
 0  0  0      0 212636  13748  21348   0   0     0     0  104    12   0   0 100
 0  0  0      0 212636  13748  21348   0   0     0     0  104     8   0   0 100
 0  0  0      0 212636  13748  21348   0   0     0     0  104    10   0   0 100
 0  0  0      0 212636  13748  21348   0   0     0     0  104     8   0   0 100
debian:~# 
                    </pre></td></tr></table><a class="indexterm" name="d0e5705"></a><h5><a name="d0e5708"></a>Field descriptions:</h5><div class="table"><a name="d0e5710"></a><p class="title"><b>Table&nbsp;7.2.&nbsp;procs</b></p><table summary="procs" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><tbody><tr><td align="center">r</td><td align="center">processes waiting for run time</td></tr><tr><td align="center">b</td><td align="center">processes in uninterpretable sleep</td></tr><tr><td align="center">w</td><td align="center">processes swapped out but otherwise runnable</td></tr></tbody></table></div><div class="table"><a name="d0e5730"></a><p class="title"><b>Table&nbsp;7.3.&nbsp;memory</b></p><table summary="memory" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">swpd</td><td align="left">virtual memory used (Kb)</td></tr><tr><td align="left">free</td><td align="left">idle memory (Kb)</td></tr><tr><td align="left"> buff</td><td align="left">memory used as buffers (Kb)</td></tr></tbody></table></div><div class="table"><a name="d0e5752"></a><p class="title"><b>Table&nbsp;7.4.&nbsp;swap</b></p><table summary="swap" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">si</td><td align="left">memory swapped in from disk (kB/s)</td></tr><tr><td align="left">so</td><td align="left">memory swapped out to disk (kB/s)</td></tr></tbody></table></div><div class="table"><a name="d0e5769"></a><p class="title"><b>Table&nbsp;7.5.&nbsp;io</b></p><table summary="io" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">bi</td><td align="left">blocks sent to a block device (blocks/s)</td></tr><tr><td align="left">bo</td><td align="left">blocks received from a block device (blocks/s)</td></tr></tbody></table></div><div class="table"><a name="d0e5786"></a><p class="title"><b>Table&nbsp;7.6.&nbsp;system</b></p><table summary="system" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">in</td><td align="left">interrupts per second (including the clock)</td></tr><tr><td align="left">cs</td><td align="left">context switches per second</td></tr></tbody></table></div><div class="table"><a name="d0e5803"></a><p class="title"><b>Table&nbsp;7.7.&nbsp;cpu</b></p><table summary="cpu" border="1"><colgroup><col width="50%" align="left"><col width="50%" align="left"></colgroup><tbody><tr><td align="left">us</td><td align="left">user time as a percentage of total CPU time</td></tr><tr><td align="left">sy</td><td align="left">system time as a percentage of total CPU time</td></tr><tr><td align="left">id</td><td align="left">idle time as a percentage of total CPU time</td></tr></tbody></table></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e5825"></a>system monitoring tools:</h5></div></div><div></div></div><p>It is often useful to be able to keep a historical record of system
                        activity and resource usage. This is useful to spot possible problems before
                        they occur (such as running out of disk space), as well as for future
                        capacity planning.</p><p>Usually, these tools are built by using system commands (such as
                        <span><b class="command">vmstat</b></span>, <span><b class="command">ps</b></span> and <span><b class="command">df</b></span>),
                        coupled together with rrdtool or mrtg, which store the data and generate graphs.</p><p>rrdtool: <a href="http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/" target="_top">http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/</a>
                    </p><p>mrtg: <a href="http://people.ee.ethz.ch/~oetiker/webtools/mrtg/" target="_top">http://people.ee.ethz.ch/~oetiker/webtools/mrtg/</a>
                    </p><p>Some of the more complex monitoring systems that have been built using
                        these tools include the following:</p><p>Cacti: <a href="http://www.raxnet.net/products/cacti/" target="_top">http://www.raxnet.net/products/cacti/</a>
                    </p><p>Zabbix:<a href="http://www.zabbix.com/" target="_top">http://www.zabbix.com/</a>
                    </p><p>All of the above tools are open source and free to use.</p></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5865"></a>ulimit:</h3></div></div><div></div></div><p>You may use the bash shell built-in command "ulimit" to limit
                the system resources that your processes are allowed to consume.</p><p>The following is an excerpt from the bash man page:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
  ulimit [-SHacdflmnpstuv [limit]]

Provides control over the resources available to the shell and to
processes started by it, on systems that allow such control.

The -H and -S options specify that the hard or soft limit is set for
the given resource.  A hard limit cannot be increased once it is set;
a soft limit may be increased up to the value of the hard limit.  If
neither -H nor -S is specified, both the soft and hard limits are set.  

The value of limit can be a number in the unit specified for the
resource or one of the special values hard, soft, or unlimited, which
stand for the current hard limit, the current soft limit, and no
limit, respectively.  If limit is omitted, the current value of the
soft limit of the resource is printed, unless the -H option is given.
When more than one resource is specified, the limit name and unit are
printed before the value.

Other options are interpreted as follows:

  -a     All current limits are reported
  -c     The maximum size of core files created
  -d     The maximum size of a process's data segment
  -f     The maximum size of files created by the shell
  -l     The maximum size that may be locked into memory
  -m     The maximum resident set size
  -n     The maximum number of open file descriptors 
  	(most systems do not allow this value to be set)
  -p     The pipe size in 512-byte blocks (this may not be set)
  -s     The maximum stack size
  -t     The maximum amount of cpu time in seconds
  -u     The maximum number of processes available to a single user
  -v     The maximum amount of virtual memory available to the shell

If limit is given, it is the new value of the specified resource (the
-a option is display only).  If no option is given, then -f
is assumed.  Values are in 1024-byte increments, except for -t, which
is in seconds, -p, which is in units of 512-byte blocks, and -n and
-u, which are unscaled values.  The return status is 0 unless an
invalid option or argument is supplied, or an error occurs while
setting a new limit.
                </pre></td></tr></table><p>On a Debian system, the default ulimit settings should appear as follows:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ulimit -a
core file size        (blocks, -c) 0
data seg size         (kbytes, -d) unlimited
file size             (blocks, -f) unlimited
max locked memory     (kbytes, -l) unlimited
max memory size       (kbytes, -m) unlimited
open files                    (-n) 1024
pipe size          (512 bytes, -p) 8
stack size            (kbytes, -s) 8192
cpu time             (seconds, -t) unlimited
max user processes            (-u) 256
virtual memory        (kbytes, -v) unlimited
                </pre></td></tr></table><p>The common use of this command is to prevent long running processes, such as web
                servers (e.g., Apache) and CGI scripts from leaking memory and consuming all
                available system resources. Using the ulimit command to reduce the locked memory and
                memory size options before starting up your web server would mitigate this problem.</p><p>Another common use is on shell servers where users may not "tidy
                up" after themselves; you can then set the cpu time limit in /etc/profile,
                thus having the system automatically terminate long running processes.</p><p>Another example specifically relates to core files. You'll notice that the default
                core file size is set to 0. This means that when an application crashes (called a
                "segmentation fault"), it does not leave behind a core file (a
                file containing the memory contents of the application at the time that it crashed).
                This core file can prove invaluable for debugging, but can obviously be quite large
                as it will be the same size as the amount of memory the application was consuming at
                the time! Hence the default "0" value.</p><p>However, to enable core dumps, you can specify the "-c" switch:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# ulimit -c
0
debian:~# ulimit -c 1024
debian:~# ulimit -c
1024
                </pre></td></tr></table><p>Any further applications launched from this shell, which crash, will now generate
                core dump files up to 1024 blocks in size.</p><p>The core files are normally named "core" or sometimes <b class="filename"><tt>processname.core</tt></b>, and will be written to the current
                working directory of the specific application that crashed.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="log_files"></a>Working with log files</h3></div></div><div></div></div><p>On a Linux system, you should find all the system log files are in the <b class="filename"><tt>/var/log</tt></b> directory.</p><p>The first place you should look if you were experiencing problems with a running
                system is the system "messages" logfile.</p><p>You can use the tail command to see the last few entries:</p><a class="indexterm" name="d0e5907"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
 $ tail /var/log/messages
                </pre></td></tr></table><p>It's sometimes useful to keep the log scrolling in a window as entries are added,
                and you can use tail's -f (follow) flag to achieve this:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
$ tail -f /var/log/messages
                </pre></td></tr></table><p>Other files of interest in /var/log:</p><div class="orderedlist"><ol type="1"><li><p>
                        <b class="filename"><tt>auth.log</tt></b> -- log messages relating to
                        system authentication</p></li><li><p>
                        <b class="filename"><tt>daemon.log</tt></b> -- log message relating
                        to running daemons on the system</p></li><li><p>
                        <b class="filename"><tt>debug</tt></b> -- debug level messages</p></li><li><p>
                        <b class="filename"><tt>syslog</tt></b> -- system level log messages</p></li><li><p>
                        <b class="filename"><tt>kern.log</tt></b> -- kernel messages</p></li></ol></div><p>The process which writes to these logfiles is called "syslogd",
                and its behavior is configured by <b class="filename"><tt>/etc/syslog.conf</tt></b>.</p><p>Each log message has a facility (kern, mail, news, daemon) and a severity (debug,
                info, warn, err, crit). The syslog.conf file uses these to determine where to send
                the messages.</p><p>As machines continue to run over time, these files can obviously become quite
                large. Rather than the system administrator having to manually trim them, there is a
                utility called "logrotate".</p><p>This utility can be configured to rotate (backup and compress) old log files and
                make way for new ones. It can also be configured to only store a certain amount of
                log files, making sure that you keep your disk space free.</p><p>The files which controls this behavior is <b class="filename"><tt>/etc/logrotate.conf</tt></b>. See the logrotate(8) man page for
                details on the syntax of this file.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Hardware_Installation"></a>Chapter&nbsp;8.&nbsp;Hardware Installation</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#add_new_hd">Adding a new drive to a Linux system:</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5976">Does the kernel detect the drive?</a></span></dt><dt><span class="sect2"><a href="#d0e5995">Partition the new drive</a></span></dt><dt><span class="sect2"><a href="#d0e6014">Build Linux filesystem on any relevant partitions</a></span></dt><dt><span class="sect2"><a href="#d0e6026">Decide on a mountpoint and create it</a></span></dt><dt><span class="sect2"><a href="#d0e6044">Add the new filesystem to /etc/fstab
            </a></span></dt></dl></dd><dt><span class="sect1"><a href="#Print_configuration">Print configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e6077">BSD Print Spooler (lpr)</a></span></dt><dt><span class="sect2"><a href="#d0e6090">/etc/printcap</a></span></dt><dt><span class="sect2"><a href="#d0e6102">Explanation of the legend used</a></span></dt><dt><span class="sect2"><a href="#d0e6206">Explaining the Generic entry</a></span></dt></dl></dd><dt><span class="sect1"><a href="#cups">CUPS - Common Unix Printing System</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e6302">installation</a></span></dt><dt><span class="sect2"><a href="#d0e6311">lpinfo</a></span></dt><dt><span class="sect2"><a href="#d0e6325">lpadmin</a></span></dt><dt><span class="sect2"><a href="#d0e6355">Removing a printer:</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="add_new_hd"></a>Adding a new drive to a Linux system:</h2></div></div><div></div></div><p>While the installation process takes you through all the steps necessary in order to
            prepare a drive to install your system onto, you may find that you wish to add an
            additional drive at a later stage.</p><p>We will cover the steps you need to follow in order to achieve this:</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5976"></a>Does the kernel detect the drive?</h3></div></div><div></div></div><p>Once you've installed the physical drive media in your machine, and booted up into
                Linux, you will need to check and see if the system has detected your drive.</p><p>You should consult the output of the <span><b class="command">dmesg</b></span> command to verify this:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# dmesg
[ ... ]
hda: ST360014A, ATA DISK drive
hdb: WDC WD100EB-00BHF0, ATA DISK drive
hdc: 24X10, ATAPI CDROM drive
[ ... ]
Partition check:
 hda: hda1 hda2! &lt; hda5 hda6 hda7 &gt;
 hdb: hdb1 hdb2
[ ... ]
debian:~# _
                </pre></td></tr></table><a class="indexterm" name="d0e5988"></a><p>Here, we can see that there are two drives in the system (hda and hdb), and that
                the first drive has a primary partition (hda1) and an extended partition (hda2),
                which is further split up into 3 logical partitions (hda5, hda6 and hda7).</p><p>The second drive (hdb) only has two primary partitions (hdb1 and hdb2).</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5995"></a>Partition the new drive</h3></div></div><div></div></div><p>You must then use the <span><b class="command">cfdisk</b></span> command to partition the new drive.</p><p>You will need to run the command with the device name of the new drive as a parameter.</p><p>Example, to modify the partition table on the second hard disk:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cfdisk /dev/hdb
                </pre></td></tr></table><a class="indexterm" name="d0e6009"></a><p>Partition the disk to your liking, as discussed in the original installation section.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6014"></a>Build Linux filesystem on any relevant partitions</h3></div></div><div></div></div><p>If you created any Linux partitions in the previous step, you will now need to
                create a filesystem on them. You will use the <span><b class="command">mksf</b></span> command to
                achieve this. Again, you specify the device that you wish to create the filesystem
                on as a parameter.</p><p>If we wanted to create a Linux filesystem on the second partition of the second
                drive, we would use the following command:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# mkfs /dev/hdb2
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6026"></a>Decide on a mountpoint and create it</h3></div></div><div></div></div><a class="indexterm" name="d0e6029"></a><p>Now you'll need to decide where you want to mount the new filesystem, and create
                the mountpoint. This is very simply, as a mountpoint is simply an empty directory.</p><p>For our example, we'll decide that we want to mount the new filesystem under
                    <b class="filename"><tt>/data</tt></b>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# mkdir /data
                </pre></td></tr></table><a class="indexterm" name="d0e6041"></a></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6044"></a>Add the new filesystem to <b class="filename"><tt>/etc/fstab</tt></b>
            </h3></div></div><div></div></div><p>The last step will be to add the newly created filesystem to your fstab file, so
                that the filesystem will be mounted at boot time.</p><p>fstab before:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /etc/fstab 
# /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;             &lt;dump&gt;  &lt;pass&gt;
/dev/hda2       /               ext2    errors=remount-ro     0       1
/dev/hda1       none            swap    sw                    0       0
proc            /proc           proc    defaults              0       0
/dev/fd0        /floppy         auto    user,noauto           0       0
/dev/cdrom      /cdrom          iso9660 ro,user,noauto        0       0
                </pre></td></tr></table><a class="indexterm" name="d0e6056"></a><p>fstab after:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /etc/fstab 
# /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;             &lt;dump&gt;  &lt;pass&gt;
/dev/hda2       /               ext2    errors=remount-ro     0       1
/dev/hda1       none            swap    sw                    0       0
proc            /proc           proc    defaults              0       0
/dev/fd0        /floppy         auto    user,noauto           0       0
/dev/cdrom      /cdrom          iso9660 ro,user,noauto        0       0
/dev/hdb2       /data           ext2    defaults              0       1
                </pre></td></tr></table><p>The line that we added specifies that /dev/hdb2 should be mounted on the /data
                mountpoint, is of a ext2 type filesystem.</p><p>Now you can issue the mount command to mount this filesystem now:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# mount /data
                </pre></td></tr></table></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Print_configuration"></a>Print configuration</h2></div></div><div></div></div><a class="indexterm" name="d0e6072"></a><p>Printing on Debian can be handled by one of several pieces of software; the original
            BSD lpr (line printer) system, a rewrite of this system, called lprNG, and also by CUPS
            (Common Unix Print System).</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6077"></a>BSD Print Spooler (lpr)</h3></div></div><div></div></div><a class="indexterm" name="d0e6080"></a><a class="indexterm" name="d0e6083"></a><p>In order to use the BSD Print Spooler, you will first need to install it as follows:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# apt-get install lpr
Reading Package Lists... Done
Building Dependency Tree... Done
The following NEW packages will be installed:
  lpr 
0 packages upgraded, 1 newly installed, 0 to remove and 0  not
upgraded.
Need to get 0B/93.1kB of archives. After unpacking 237Kb will be used.
Selecting previously deselected package lpr.
(Reading database ... 6049 files and directories currently installed.)
Unpacking lpr (from .../lpr_2000.05.07-4.2_i386.deb) ...
Setting up lpr (2000.05.07-4.2) ...
Starting printer spooler: lpd.

debian:~# _
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6090"></a>/etc/printcap</h3></div></div><div></div></div><p>Once installed, you will need to modify the /etc/printcap file to suit your tastes:</p><a class="indexterm" name="d0e6095"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /etc/printcap 

# /etc/printcap: printer capability database. See printcap(5).
# You can use the filter entries df, tf, cf, gf etc. for
# your own filters. See /etc/filter.ps, /etc/filter.pcl and
# the printcap(5) manual page for further details.

lp|Generic dot-matrix printer entry:\
        :lp=/dev/lp0:\
        :sd=/var/spool/lpd/lp:\
        :af=/var/log/lp-acct:\
        :lf=/var/log/lp-errs:\
        :pl#66:\
        :pw#80:\
        :pc#150:\
        :mx#0:\
        :sh:

# rlp|Remote printer entry:\
#         :lp=:\
#         :rm=remotehost:\
#         :rp=remoteprinter:\
#         :sd=/var/spool/lpd/remote:\
#         :mx#0:\
#         :sh:
                </pre></td></tr></table><p>The default installation has a local printer, attached to your first parallel port (/dev/lp0).</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6102"></a>Explanation of the legend used</h3></div></div><div></div></div><p>The legend for the two-character entries in the /etc/printcap file are as follows:</p><div class="informaltable"><table border="1"><colgroup><col width="25%" align="left"><col width="25%" align="left"><col width="25%" align="left"><col width="25%" align="left"></colgroup><tbody><tr><td align="left">Name</td><td align="left">Type</td><td align="left">Default</td><td align="left">Description</td></tr><tr><td align="left">lp</td><td align="left">str</td><td align="left">/dev/lp</td><td align="left">local printer device, or port@host for remote</td></tr><tr><td align="left">sd</td><td align="left">str</td><td align="left"> /var/spool/lpd</td><td align="left">spool directory</td></tr><tr><td align="left">af</td><td align="left">str</td><td align="left">NULL</td><td align="left">name of accounting file</td></tr><tr><td align="left">lf</td><td align="left">str</td><td align="left">/dev/console</td><td align="left">error logging file name</td></tr><tr><td align="left">pl</td><td align="left">num</td><td align="left">66</td><td align="left">page length (in lines)</td></tr><tr><td align="left">pw</td><td align="left">num</td><td align="left">132</td><td align="left">page width (in characters)</td></tr><tr><td align="left">pc</td><td align="left">num</td><td align="left">200</td><td align="left">price per foot or page in hundredths of cents</td></tr><tr><td align="left">mx</td><td align="left">num</td><td align="left">1000</td><td align="left">max file size (in BUFSIZ blocks); 0=unlimited</td></tr><tr><td align="left">sh</td><td align="left">bool</td><td align="left">false</td><td align="left">suppress printing of burst page header</td></tr></tbody></table></div><p>There are several more obscure options which are also available, and you can find
                them in the printcap(5) man page.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6206"></a>Explaining the Generic entry</h3></div></div><div></div></div><p>The default entry is for a printer called "lp", and which can
                also be referred to as Generic dot-matrix printer entry.</p><p>An extract:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
lp|Generic dot-matrix printer entry:\
        :lp=/dev/lp0:\
        :sd=/var/spool/lpd/lp:\
        :af=/var/log/lp-acct:\
        :lf=/var/log/lp-errs:\
        :pl#66:\
        :pw#80:\
        :pc#150:\
        :mx#0:\
        :sh:
                </pre></td></tr></table><p>You can use the pipe ("|") symbol to separate as many different
                names for the same printer as you want.</p><p>The print jobs themselves are spooled into a directory called <b class="filename"><tt>/var/spool/lpd/lp</tt></b>, and are then shipped off to the
                "/dev/lp0" device.</p><p>You can use the following commands to operate the print spooler:</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e6224"></a>lpr</h4></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
lpr [ -P printername ] &lt;filename&gt;
                    </pre></td></tr></table><a class="indexterm" name="d0e6229"></a><p>The <span><b class="command">lpr</b></span> command is used to submit jobs to the printer. You
                    can optionally specify the printer to use by way of the "-P"
                    switch. Otherwise, you will print to the default printer, <span><b class="command">lp</b></span>.</p><p>Sending the contents of <b class="filename"><tt>test.txt</tt></b> to the printer:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# lpr test.txt 
debian:~# _
                    </pre></td></tr></table></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e6247"></a>lpq</h4></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
lpq [ -P printername ]
                    </pre></td></tr></table><p>The "lpq" command queries what's inside the printers queue.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# lpq
lp is ready and printing
Rank   Owner      Job  Files                                 Total Size
active root       1    test.txt                              9 bytes
                    </pre></td></tr></table><a class="indexterm" name="d0e6256"></a><p>Again, you can optionally specify the printer queue to query using the
                    "-P" switch otherwise it defaults to the <span><b class="command">lp</b></span> printer.</p><p>Here we can see that our previously submitted job is currently being
                    processed. Once it has finished printing, it will disappear from the queue.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e6266"></a>lprm</h4></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
lprm [ -P printername] jobnumber
                    </pre></td></tr></table><a class="indexterm" name="d0e6271"></a><p>The <span><b class="command">lprm</b></span> command can be used to remove jobs from the queue.
                    This is useful if there's been a paper jam, or if you suddenly realize you've
                    sent your job to the wrong printer, or similar.</p><p>You can find out your print job's id number but inspecting the output of
                    "lpq", as we did above.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# lpq
lp is ready and printing
Rank   Owner      Job  Files                                 Total Size
active root       1    test.txt                              9 bytes
debian:~# lprm 1
dfA001debian dequeued
cfA001debian dequeued
debian:~# lpq
no entries
    </pre></td></tr></table></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cups"></a>CUPS - Common Unix Printing System</h2></div></div><div></div></div><a class="indexterm" name="d0e6286"></a><p>For more information, visit <a href="http://www.cups.org/" target="_top">this</a> page</p><p>The Common Unix Printing System, CUPS, aims to provide a portable printing solution
            for Unix based systems, based on the Internet Printing Protocol (IPP). CUPS provides
            System V and Berkeley command-line user interfaces, as well as command line and
            web-based configuration interface.</p><p>CUPS allows for easy integration of printing resources for both open source and
            proprietary operating systems in a homogeneous network.</p><p>The CUPS server (cupsd) should be run on the machine which is physically connected to
            your printing devices (in the case of a parallel, serial or USB printer), and should be
            the machine where you wish to spool jobs while they wait to be printed.</p><p>The CUPS client tools should, obviously, be installed on any Debian machines from
            which you wish to print to the remote printer(s).</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6302"></a>installation</h3></div></div><div></div></div><p>Debian already has CUPS packages available, so you can simply use apt to install them:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
# apt-get install cupsys-client cupsys
                </pre></td></tr></table><p>This will install both the client and server portions of the CUPS system. This
                should be done on the machine which is to be the CUPS server.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6311"></a>lpinfo</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
SYNTAX:
lpinfo -v
                </pre></td></tr></table><a class="indexterm" name="d0e6316"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
# lpinfo -v
network socket
network http
network ipp
network lpd
direct parallel:/dev/lp0
serial serial:/dev/ttyS1?baud=115200
serial serial:/dev/ttyS2?baud=115200
network smb
                </pre></td></tr></table><p>The "lpinfo -v" command lists the supported and available
                devices on the system. The first word is the type of device; direct, file, network
                or serial.</p><p>The "direct" and "serial" devices are printers
                that are physically connected to the machine, while the rest are all available over
                the network.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6325"></a>lpadmin</h3></div></div><div></div></div><p>The <span><b class="command">lpadmin</b></span> command allows you to add, remove and configure printers.</p><p>You can also use the web based configuration tool, by connecting to the following
                URL from the local machine:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
http://localhost:631/admin
                </pre></td></tr></table><p>Adding a printer:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
lpadmin -p &lt;printername&gt; -E -v &lt;device&gt; -m &lt;ppd&gt;
                </pre></td></tr></table><p>Where "printername" is the name you wish to give your printer,
                "device" is the device as we discussed earlier, and
                "ppd" is the printer driver to use.</p><p>You can find a list of PPD drivers on the CUPS site.</p><h4><a name="d0e6345"></a>Examples:</h4><p>This adds a local printer, connected on the parallel port, and gives it the name "deskjet":</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
lpadmin -p deskjet -E -v parallel:/dev/lp0 -m deskjet.ppd
                </pre></td></tr></table><p>This adds a remote, network printer, on 192.168.1.22, and gives it the name "laserjet":</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
lpadmin -p laserjet -E -v socket://192.168.1.22 -m laserjet.ppd
                </pre></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6355"></a>Removing a printer:</h3></div></div><div></div></div><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
lpadmin -x &lt;printername&gt;
                </pre></td></tr></table><p>You can simply remove a printer by specifying the "-x" switch.</p><h4><a name="d0e6362"></a>Example:</h4><p>This removes our previously defined "laserjet" printer:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
lpadmin -x laserjet
                </pre></td></tr></table></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Kernel_config"></a>Chapter&nbsp;9.&nbsp;Configuration of the Kernel</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#proc_config">The /proc filesystem:</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="proc_config"></a>The /proc filesystem:</h2></div></div><div></div></div><a class="indexterm" name="d0e6375"></a><p>The <b class="filename"><tt>/proc</tt></b> filesystem is a pseudo-filesystem,
            which acts as an interface to kernel data structures. Most of it is read-only, but some
            files allow kernel variables to be changed.</p><p>You can use the <span><b class="command">cat</b></span> command to view the contents of most files, and
            can use a combination of <span><b class="command">echo</b></span> and a redirect to set the values for
            files you wish to change.</p><p>As an example, we'll change the hostname of the system, at least as far as the kernel
            is concerned.</p><p>The relevant file in the /proc system is <b class="filename"><tt>/proc/sys/kernel/hostname</tt></b>.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# cat /proc/sys/kernel/hostname
debian
            </pre></td></tr></table><p>As we can see, the current value is "debian"; this is the name that
            we have given our machine.</p><p>We can also verify this with the <span><b class="command">hostname</b></span> command:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# hostname
debian
            </pre></td></tr></table><a class="indexterm" name="d0e6409"></a><p>To change the hostname to "something":</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
debian:~# echo something &gt; /proc/sys/kernel/hostname
debian:~# hostname
something
debian:~# cat /proc/sys/kernel/hostname
something
            </pre></td></tr></table><p>Obviously, this change has only been made in the currently running kernel, and will be
            lost when the system is next booted.</p><h3><a name="d0e6418"></a>excercise:</h3><p>where would you set this value in order for it to become permanent?</p></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="troubleshooting"></a>Appendix&nbsp;A.&nbsp;Troubleshooting</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#trouble_log_files">Log files</a></span></dt><dt><span class="sect1"><a href="#common_probelms">Common problems:</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e6439">Lost root password:</a></span></dt><dt><span class="sect2"><a href="#trouble_lilo">Troubleshooting LILO:</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="trouble_log_files"></a>Log files</h2></div></div><div></div></div><p>If you encounter problems with a running system, always remember to check the log
            files in /var/log first. Usually, very valuable information will be logged here, which
            will hopefully allow you to more easily debug any problems that you might come across.</p><p>It's usually a good idea to have at least one window open with a <span><b class="command">tail -f
            /var/log/messages</b></span> command running at all times. This means that you'll be able
            to very quickly spot any problems as they arise.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="common_probelms"></a>Common problems:</h2></div></div><div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6439"></a>Lost root password:</h3></div></div><div></div></div><div class="orderedlist"><ol type="1"><li><p>Reboot the system; pressing <span><b class="keycap">Ctrl</b></span>-<span><b class="keycap">Alt</b></span>-<span><b class="keycap">Del</b></span> from the console should achieve this without causing and damage
                        to the running system.</p></li><li><p>At the LILO prompt, type:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
linux init=/bin/bash
                        </pre></td></tr></table><p>This will cause the Linux kernel to boot, and drop you straight into a
                        running copy of the bash shell</p></li><li><p>When the system boots, it leaves the root filesystem in read-only mode.
                        Once the system's booted and you're in bash, type the following command to
                        remount the root filesystem as read-write:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
mount -o remount,rw -n /
                        </pre></td></tr></table></li><li><p>Now you can run <span><b class="command">passwd</b></span> and simply enter your preferred
                        new root password.</p></li><li><p>Now you can type <span><b class="command">exit</b></span> and the system will return to
                        multi-user mode, and you should be able to log in as root with your new password!</p></li></ol></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="trouble_lilo"></a>Troubleshooting LILO:</h3></div></div><div></div></div><a class="indexterm" name="d0e6481"></a><p>As we've mentioned previously, Debian makes use of the Linux Loader (LILO) as the
                boot manager.</p><p>As LILO has to fit into a very small space in the first part of the disk, it
                doesn't come with very descriptive error messages.</p><p>If you attempt to boot your LILO-enabled Linux system and are presented with a
                partial LILO prompt, the following table will hopefully be able to help you track
                down the cause of the problem:</p><h4><a name="d0e6490"></a>display status description</h4><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
L 00   internal error
L 01   illegal command
L 02   address mark not found
L 03   write-protected disk
L 04   sector not found
L 06   change line active
L 07   invalid initialization
L 08   DMA overrun
L 09   DMA attempt across 64k boundary
L 0C   invalid media
L 10   CRC error
L 11   ECC correction successful
L 20   controller error
L 40   seek failure
L 80   disk timeout
L BB   BIOS error
LI       the second-stage boot loader loaded, but could not run
LIL     the descriptor table could not be read
LIL?    the second-stage boot loader loaded at an incorrect address
LIL-    LILO found a corrupt descriptor table
LILO    LILO ran successfully
                </pre></td></tr></table><p>The following error codes usually indicate a problem with the physical hardware:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
L 02, L 0C, L 40
                </pre></td></tr></table><p>You should attempt to reboot the system a few times and see if this error is
                transient; if not, it may be time to replace that disk!</p><p>The other "L ##" error codes usually indicate a problem with the
                BIOS and its understanding of the device you are attempting to boot from.</p><p>A common cause of the "L 01" error message is as follows:</p><p>If your hard drive is not the primary master drive in the system (i.e. hda), then
                LILO may fail to detect this when it looks for the first (i.e., bootable) drive in
                the system.</p><p>Assuming that your drive is the secondary master (hdb), you can add the following
                entries to your <b class="filename"><tt>/etc/lilo.conf</tt></b> file to fix
                the problem:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
---
disk = /dev/hdc
bios = 0x80
---
                </pre></td></tr></table><p>Once that's done, rerun the <span><b class="command">lilo</b></span> command to install the new
                boot loader. The "0x80" value is the drive that the BIOS considers
                to be the first drive it detects in the system. Therefore, if you wished to boot
                from the second drive that the BIOS normally detects during bootup, you would
                specify "0x81".</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../images/admon/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>If you can't boot from your hard drive because of a LILO error, use the boot
                    floppy that you created during the Debian installation process.</p></td></tr></table></div><p>Some other LILO related problems could be caused by:</p><div class="itemizedlist"><ul type="disc"><li><p>not rerunning <span><b class="command">lilo</b></span> following a kernel change </p></li><li><p>installing and booting Linux from a very large (&gt;2GB) partition you
                        should either make the partition smaller, or switch to using GRUB</p></li><li><p>installing an additional operating system, which overwrites the master
                        boot record, and thus LILO</p></li><li><p>errors in your <b class="filename"><tt>lilo.conf</tt></b> file</p></li></ul></div><p>LILO comes with some intensive documentation, which is available on your Debian
                system in the following directory:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="literallayout">
/usr/share/doc/lilo/
                </pre></td></tr></table></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="sys-admin-exercises"></a>Appendix&nbsp;B.&nbsp;Additional exercises:</h2></div></div><div></div></div><div class="task"><p class="title"><b>Task One</b></p><div class="tasksummary">
            <p>You look after a Debian server for a small company; apart from you, there are
                three other people:</p>
            <div class="itemizedlist"><ul type="disc"><li><p>Billy Bob, your boss.</p></li><li><p>Jane Doe, the secretary and receptionist.</p></li><li><p>Joe Blogs, the sales rep.</p></li></ul></div>
        </div><div class="procedure"><ol type="1"><li><p>Create login accounts for these three people, and generate good passwords for
                    them. Make sure that each user has their own UPG.</p></li><li><p>Lock Jane Doe's account.</p></li><li><p>Can you find out where the system makes a note of which accounts are locked?
                    [Hint: read the man page for passwd(5)]</p></li><li><p>Verify that each user has their own UPG; what command do you use to do this?</p></li><li><p>Now create a directory called <b class="filename"><tt>/home/shared</tt></b>. Make sure that Billy Bob and Joe
                    Blogs have read and write access to it. Jane Doe, however, should only have read
                    access. (It doesn't matter if everyone on the system has read access to the directory).</p></li><li><p>Pretend that you don't know the passwords for the user accounts, and make use
                    of the <span><b class="command">su</b></span> command to become the other users, and verify that
                    they have the correct access permissions to the <b class="filename"><tt>/home/shared</tt></b> directory.</p></li><li><p>Now create a cron job, which runs at 08:00AM every weekday, which sends an
                    e-mail to Billy Bob, displaying the contents of the <b class="filename"><tt>/home/shared</tt></b> directory.</p></li><li><p>Now create an additional cron job, which backs up the contents of the
                        <b class="filename"><tt>/home/shared</tt></b> directory into a tar
                    &amp; gzipd file called <b class="filename"><tt>/home/shared-backup.tar.gz</tt></b>. The job should run
                    every Friday at 6PM.</p></li><li><p>Which cron table did you edit to create the first cron job? Did you use the
                    same one for the second cron job, or a different one?</p></li></ol></div></div><div class="task"><p class="title"><b>Task Two</b></p><div class="procedure"><ol type="1"><li><p>Use the apt system to install the "zip" package.</p></li><li><p>Can you find out where the bin files for this package have been installed?
                    What command did you use?</p></li><li><p>Now manually delete the bin files that this package installed.</p></li><li><p>Does dpkg still think that the package is installed? Why?</p></li><li><p>Use dpkg to re-install the missing files.</p></li><li><p>Now use dpkg to remove the package completely.</p></li></ol></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="sys-admin-lab"></a>Appendix&nbsp;C.&nbsp;Practical lab</h2></div></div><div></div></div><p>Matthew west has created a practical lab that will test your knowledge of System
        Administration. This can be downloaded from <a href="../images/saprac.tar.gz" target="_top">this link</a>
    </p><p>This is how to use the scripts:</p><div class="orderedlist"><ol type="1"><li><p>extract the archive: <span><b class="command">tar -xzvf saprac.tar.gz</b></span>
            </p></li><li><p>run the "sabrk" to start the practical: <span><b class="command">./nabrk</b></span>
            </p></li><li><p>run the "sachk" to check that you have successfully completed it: <span><b class="command">./nachk</b></span>
            </p></li></ol></div></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a name="d0e6674"></a>Index</h2></div></div><div></div></div><div class="index"><div class="indexdiv"><h3>Symbols</h3><dl><dt>.deb, <a href="#Package_management">Debian Package Management</a></dt><dt>.deb files, <a href="#ispell">ispell</a></dt><dt>/, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/bin, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/boot, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/dev, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/etc, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/etc/fstab, <a href="#d0e2113">Mounting Filesystems</a>, <a href="#d0e6044">Add the new filesystem to /etc/fstab
            </a></dt><dt>/etc/mtab, <a href="#mount_unmount">mount and unmount</a></dt><dt>/etc/printcap, <a href="#d0e6090">/etc/printcap</a></dt><dt>/etc/skel, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/etc/X11, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/home, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/lib, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/mnt, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/proc, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a>, <a href="#mount_unmount">mount and unmount</a>, <a href="#proc">/proc</a>, <a href="#proc_config">The /proc filesystem:</a></dt><dt>/proc/cpuinfo, <a href="#d0e3904">/proc/cpuinfo</a></dt><dt>/proc/loadavg, <a href="#d0e3924">/proc/loadavg</a></dt><dt>/proc/uptime, <a href="#d0e3914">/proc/uptime</a></dt><dt>/sbin, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/tmp, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/bin, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/bin/X11, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/dict, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/doc, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/etc, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/include, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/include/asm, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/include/g++, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/include/linux, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/include/X11, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/lib, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/lib/gcc-lib, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/lib/groff, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/lib/X11, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/bin, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/doc, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/etc, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/info, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/lib, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/man, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/sbin, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/local/src, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/man, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/sbin, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/share, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/share/man, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/src, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/src/linux, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/tmp, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/usr/X11R6, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/account/pacct, <a href="#installing_acct">Installing the accounting package</a></dt><dt>/var/adm, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/backups, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/lock, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/log, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/preserve, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/run, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/spool, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/spool/at, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/spool/cron, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/spool/lpd, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/spool/mail, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>/var/tmp, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>82 - Linux swap, <a href="#cfdisk">cfdisk</a></dt><dt>83 - Linux, <a href="#cfdisk">cfdisk</a></dt></dl></div><div class="indexdiv"><h3></h3><dl><dt>, <a href="#d0e4475">dump and restore</a></dt></dl></div><div class="indexdiv"><h3>A</h3><dl><dt>ac, <a href="#ac">ac</a></dt><dt>ACACIA, <a href="#config_Dev_Drivers">Configure device driver modules</a></dt><dd><dl><dt>Laptop, ACACIA , <a href="#pcmcia">ACACIA</a></dt></dl></dd><dt>act, <a href="#installing_acct">Installing the accounting package</a></dt><dt>addgroup, <a href="#add_user_Group_deluser_delgroup">adduser, addgroup, deluser and delgroup</a></dt><dt>adduser, <a href="#add_user_Group_deluser_delgroup">adduser, addgroup, deluser and delgroup</a></dt><dt>AMANDA, <a href="#d0e4533">AMANDA -- http://www.amanda.org/</a></dt><dt>APT, <a href="#config_apt">Configuring APT</a>, <a href="#tasksel_dselect">tasksel and dselect</a></dt><dd><dl><dt>Advanced Package Tool, <a href="#apt">apt</a></dt></dl></dd><dt>at, <a href="#at">at</a></dt><dt>atrm, <a href="#d0e5453">atrm</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>backup, <a href="#d0e2113">Mounting Filesystems</a></dt><dt>Backup Log, <a href="#d0e459">Backup Log</a></dt><dt>backup media, <a href="#BackupMedia">Backup media</a></dt><dt>binutils, <a href="#binutils">binutils</a></dt><dt>BIOS, <a href="#d0e1947">Switch on BIOS and CMOS</a>, <a href="#device_files">Device files</a></dt><dt>block device, <a href="#device_files">Device files</a></dt><dt>boot block, <a href="#filesystem_Layout">The layout of a filesystem</a></dt><dt>boot floppy, <a href="#make_boot_floppy">Make a boot floppy</a></dt><dt>bootable flag, <a href="#cfdisk">cfdisk</a></dt><dt>BSD Spooler, <a href="#d0e6077">BSD Print Spooler (lpr)</a></dt><dt>bsf, <a href="#d0e4257">mt</a></dt><dt>bsfm, <a href="#d0e4257">mt</a></dt><dt>bsr, <a href="#d0e4257">mt</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>cfdisk, <a href="#cfdisk">cfdisk</a>, <a href="#d0e5995">Partition the new drive</a></dt><dt>Character Device Files, <a href="#device_files">Device files</a></dt><dt>chfn, <a href="#chfn_chsh">chfn and chsh</a></dt><dt>chsh, <a href="#chfn_chsh">chfn and chsh</a></dt><dt>CMOS, <a href="#d0e1947">Switch on BIOS and CMOS</a></dt><dt>cpio, <a href="#d0e4424">cpio</a></dt><dt>cron, <a href="#d0e5392">Scheduling Command execution with batch (cron) jobs</a></dt><dt>crontab, <a href="#d0e5481">crontab</a></dt><dt>CUPS, <a href="#cups">CUPS - Common Unix Printing System</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>datablocks, <a href="#inodes">Inodes</a></dt><dt>dbootstrap, <a href="#Language_Dbootstrap">Language and "dbootstrap"</a></dt><dt>dd, <a href="#d0e4511">dd</a></dt><dt>Debian filesystem, <a href="#root_filesysytem">A detailed look at the filesystem in Debian</a></dt><dt>default hostname, <a href="#Config_netwk">Configure the network</a></dt><dt>delgroup, <a href="#add_user_Group_deluser_delgroup">adduser, addgroup, deluser and delgroup</a></dt><dt>deluser, <a href="#add_user_Group_deluser_delgroup">adduser, addgroup, deluser and delgroup</a></dt><dt>device files, <a href="#device_files">Device files</a></dt><dt>devpts, <a href="#mount_unmount">mount and unmount</a></dt><dt>df, <a href="#d0e3946"> df</a></dt><dt>DHCP, <a href="#Config_netwk">Configure the network</a></dt><dt>differential backup, <a href="#Backup_concepts">Backup concepts</a></dt><dt>directory files, <a href="#directory_files">Directory files</a></dt><dt>disk free, <a href="#d0e3946"> df</a></dt><dt>disk used, <a href="#d0e3973">du</a></dt><dt>dkpg, <a href="#d0e2386">dkpg</a></dt><dt>dmesg, <a href="#d0e5976">Does the kernel detect the drive?</a></dt><dt>DOS, <a href="#device_files">Device files</a></dt><dt>dpkg, <a href="#X11_System">The X11 system</a>, <a href="#d0e2465">Uninstall an installed package _and_ its associated configuration files:</a></dt><dt>dselect, <a href="#tasksel_dselect">tasksel and dselect</a></dt><dt>du, <a href="#d0e3973">du</a></dt><dt>dump, <a href="#d0e2113">Mounting Filesystems</a>, <a href="#d0e4475">dump and restore</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>edquota, <a href="#edquota">edquota</a></dt><dt>EOF, <a href="#Regular_files">Regular files</a></dt><dt>eof, <a href="#d0e4257">mt</a></dt><dt>erase, <a href="#d0e4257">mt</a></dt><dt>exim, <a href="#exim">exim</a></dt><dt>ext2, <a href="#filesystem_types">Types of filesystems</a>, <a href="#mount_unmount">mount and unmount</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>fd0, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>filenames, <a href="#directory_files">Directory files</a></dt><dt>find, <a href="#d0e4017">suid and sgid bits</a>, <a href="#d0e5481">crontab</a></dt><dt>fsck, <a href="#d0e2113">Mounting Filesystems</a></dt><dt>fsfm, <a href="#d0e4257">mt</a></dt><dt>fsr, <a href="#d0e4257">mt</a></dt><dt>FTP, <a href="#apt">apt</a></dt><dt>full backup, <a href="#Backup_concepts">Backup concepts</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>Getty, <a href="#d0e2180">Getty, issue and motd</a></dt><dt>GID, <a href="#inodes">Inodes</a></dt><dt>gid, <a href="#Man_Procc_Introduction">Introduction</a></dt><dt>Gnome, <a href="#d0e2785">Installing and running Gnome:</a></dt><dt>groupadd, <a href="#groupadd">groupadd</a></dt><dt>groupdel, <a href="#groupdel">groupdel</a></dt><dt>groups, <a href="#groups">groups</a></dt><dt>GRUB, <a href="#lilo_grub">Changing your bootloader from LILO to GRUB</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>hard drive device names, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>hda, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>hdb, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>hdc, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>hdd, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>hostname, <a href="#proc_config">The /proc filesystem:</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>incremental backup, <a href="#Backup_concepts">Backup concepts</a></dt><dt>init, <a href="#d0e2012">"init" and Run Levels</a></dt><dt>inode, <a href="#inodes">Inodes</a></dt><dt>inode number, <a href="#Regular_files">Regular files</a></dt><dt>inode numbers, <a href="#directory_files">Directory files</a></dt><dt>inode table, <a href="#filesystem_Layout">The layout of a filesystem</a></dt><dt>Interprocess communication Devices, <a href="#Interprocess_communication_Devices">Interprocess communication Devices</a></dt><dt>ISA/EISA network cards, <a href="#config_Dev_Drivers">Configure device driver modules</a></dt><dt>issue, <a href="#d0e2180">Getty, issue and motd</a></dt></dl></div><div class="indexdiv"><h3>K</h3><dl><dt>KDE, <a href="#d0e2766">Installing and running KDE:</a></dt><dt>keyboard type, <a href="#select_keyboard">Select a keyboard</a></dt><dt>kill, <a href="#d0e5602">ps and kill</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>last, <a href="#last">last</a></dt><dt>lastcomm, <a href="#lastcomm">lastcomm</a></dt><dt>LILO, <a href="#make_Sys_boot">Make system bootable</a>, <a href="#d0e1996">Boot Loader (LILO)</a>, <a href="#lilo_grub">Changing your bootloader from LILO to GRUB</a>, <a href="#trouble_lilo">Troubleshooting LILO:</a></dt><dt>locale, <a href="#Locale">locale</a></dt><dt>logrotate, <a href="#d0e5481">crontab</a></dt><dt>lpinfo, <a href="#d0e6311">lpinfo</a></dt><dt>lpq, <a href="#d0e6247">lpq</a></dt><dt>lpr, <a href="#d0e6077">BSD Print Spooler (lpr)</a>, <a href="#d0e6224">lpr</a></dt><dt>lprm, <a href="#d0e6266">lprm</a></dt><dt>lsattr, <a href="#d0e4101">lsattr</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>magnetic tape, <a href="#d0e4141">Magnetic Tape</a></dt><dt>Mail Transfer Agent, <a href="#exim">exim</a></dt><dt>Major and Minor Device Numbers, <a href="#Major_Minor_dev_numb">Major and Minor Device Numbers</a></dt><dt>man-db, <a href="#d0e5481">crontab</a></dt><dt>Master Boot Record, <a href="#make_Sys_boot">Make system bootable</a>, <a href="#d0e1981">Master Boot Record</a></dt><dt>MBR, <a href="#make_Sys_boot">Make system bootable</a>, <a href="#d0e1981">Master Boot Record</a>, <a href="#upgrd_kernel">Upgrading your Linux kernel in Debian</a></dt><dt>MD5 password, <a href="#MD5_Passwd">MD5 passwords</a></dt><dt>mkdir, <a href="#d0e4396">Examples:</a>, <a href="#d0e6026">Decide on a mountpoint and create it</a></dt><dt>mkfs, <a href="#d0e6026">Decide on a mountpoint and create it</a></dt><dt>Modem, <a href="#PPP_DialUp_Config">PPP dial-up configuration</a></dt><dt>motd, <a href="#d0e2180">Getty, issue and motd</a></dt><dt>mount, <a href="#mount_unmount">mount and unmount</a>, <a href="#Print_configuration">Print configuration</a></dt><dt>Mounting Filesystems, <a href="#d0e2113">Mounting Filesystems</a></dt><dt>Mozilla, <a href="#Mozilla">Mozilla</a></dt><dt>mt, <a href="#d0e4257">mt</a>, <a href="#d0e4616">Verifying Backups</a></dt><dt>MTA, <a href="#exim">exim</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>nice, <a href="#nice_renice">nice and renice</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>offline, <a href="#d0e4257">mt</a></dt><dt>OpenSSH, <a href="#Openssh">OpenSSH</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>partitioning, <a href="#partition_hd">Partition hard disk</a></dt><dt>PCI network card, <a href="#config_Dev_Drivers">Configure device driver modules</a></dt><dt>pipes, <a href="#pipes">Pipes</a></dt><dt>POST, <a href="#d0e1947">Switch on BIOS and CMOS</a></dt><dt>postmaster-mail, <a href="#exim">exim</a></dt><dt>Postscript printer</dt><dd><dl><dt>Printer, Postsctript, <a href="#psfontmgr_paper">psfontmgr and paper size</a></dt></dl></dd><dt>PPP, <a href="#PPP_DialUp_Config">PPP dial-up configuration</a></dt><dt>primary master, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>ps, <a href="#d0e5602">ps and kill</a></dt><dt>pstree, <a href="#d0e2180">Getty, issue and motd</a></dt></dl></div><div class="indexdiv"><h3>Q</h3><dl><dt>quota, <a href="#Disk_quotas">Debian and disk quotas:</a>, <a href="#quota">quota</a></dt><dt>quotacheck, <a href="#quota_init_setup">initial setup</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>RAM, <a href="#d0e791">Why create a swap partition?</a></dt><dt>rc#.d, <a href="#d0e2012">"init" and Run Levels</a></dt><dt>regular files, <a href="#Regular_files">Regular files</a></dt><dt>Reiserfs, <a href="#filesystem_types">Types of filesystems</a></dt><dt>renice, <a href="#nice_renice">nice and renice</a></dt><dt>repquota, <a href="#repquota">repquota</a></dt><dt>restore, <a href="#d0e4475">dump and restore</a></dt><dt>rewind, <a href="#d0e4257">mt</a></dt><dt>root filesystem, <a href="#init_linux_part">Initialize a Linux partition</a></dt><dt>root user, <a href="#Loggin_in">Logging In</a></dt><dt>RPM, <a href="#Package_management">Debian Package Management</a>, <a href="#RPM">RPM Package Management:</a></dt><dt>Run Levels, <a href="#d0e2012">"init" and Run Levels</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>sa, <a href="#sa">sa</a></dt><dt>scd0, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>sd0, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>semaphore, <a href="#semaphore">Semaphore</a></dt><dt>sgid, <a href="#d0e4017">suid and sgid bits</a></dt><dt>Shadow password, <a href="#Shadow_Passwd">Shadow passwords</a></dt><dt>shared memory, <a href="#shared_memory">Shared Memory</a></dt><dt>shutdown, <a href="#d0e2231">Shutting down:</a></dt><dt>standard, <a href="#d0e5481">crontab</a></dt><dt>startkde, <a href="#d0e2766">Installing and running KDE:</a></dt><dt>startx, <a href="#d0e2736">startx</a></dt><dt>status, <a href="#d0e4257">mt</a></dt><dt>sticky bit, <a href="#d0e4046">sticky bit</a></dt><dt>suid, <a href="#d0e4017">suid and sgid bits</a></dt><dt>swap partition, <a href="#d0e791">Why create a swap partition?</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>tail, <a href="#d0e3973">du</a>, <a href="#log_files">Working with log files</a></dt><dt>tar, <a href="#d0e4381">tar</a></dt><dt>tasksel, <a href="#tasksel_dselect">tasksel and dselect</a></dt><dt>Time Zone, <a href="#Time_Zone">Time Zone</a></dt><dt>top, <a href="#d0e5638">top</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>UID, <a href="#inodes">Inodes</a></dt><dt>uid, <a href="#Man_Procc_Introduction">Introduction</a></dt><dt>uninstall, <a href="#d0e2454">Uninstall an installed package:</a></dt><dt>unmount, <a href="#mount_unmount">mount and unmount</a></dt><dt>upgrading the kernel, <a href="#upgrd_kernel">Upgrading your Linux kernel in Debian</a></dt><dt>useradd, <a href="#useradd">useradd</a></dt><dt>userdel, <a href="#userdel">userdel</a></dt><dt>usermod, <a href="#usermod">usermod</a></dt></dl></div><div class="indexdiv"><h3>V</h3><dl><dt>vmstat, <a href="#d0e5693">vmstat</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>weof, <a href="#d0e4257">mt</a></dt></dl></div><div class="indexdiv"><h3>X</h3><dl><dt>X11 system, <a href="#X11_System">The X11 system</a></dt><dt>xda, <a href="#harddrive_Device_names">Hard drive device names</a></dt><dt>xdm, <a href="#d0e2753">xdm</a></dt><dt>XFree86, <a href="#d0e2736">startx</a></dt><dt>XFS, <a href="#filesystem_types">Types of filesystems</a></dt><dt>Xserver, <a href="#Xserver">Xserver</a></dt></dl></div></div></div></div></body></html>